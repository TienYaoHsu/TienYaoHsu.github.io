
[{"content":"","date":"28 February 2025","externalUrl":null,"permalink":"/tags/c++/","section":"Tags","summary":"","title":"C++","type":"tags"},{"content":"","date":"28 February 2025","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"28 February 2025","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"28 February 2025","externalUrl":null,"permalink":"/tags/ros/","section":"Tags","summary":"","title":"ROS","type":"tags"},{"content":"","date":"28 February 2025","externalUrl":null,"permalink":"/categories/ros/","section":"Categories","summary":"","title":"ROS","type":"categories"},{"content":"","date":"28 February 2025","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"28 February 2025","externalUrl":null,"permalink":"/","section":"TienYao@Tech","summary":"","title":"TienYao@Tech","type":"page"},{"content":"\rğŸ’» ROS C++ ç¨‹å¼è¨­è¨ˆé¢¨æ ¼æŒ‡å— #\rå‰è¨€ #\råœ¨ ROS2 é–‹ç™¼ä¸­ï¼Œè‰¯å¥½çš„ç¨‹å¼è¨­è¨ˆé¢¨æ ¼ä¸åƒ…èƒ½æé«˜ä»£ç¢¼çš„å¯è®€æ€§å’Œå¯ç¶­è­·æ€§ï¼Œé‚„èƒ½é¿å…ä¸€äº›å¸¸è¦‹çš„éŒ¯èª¤å’Œæ€§èƒ½å•é¡Œã€‚æœ¬æ–‡å°‡ä»‹ç´¹ ROS2 ä¸­ C++ ç¨‹å¼è¨­è¨ˆçš„é¢¨æ ¼æŒ‡å—å’Œæœ€ä½³å¯¦è¸ï¼Œç‰¹åˆ¥æ˜¯é—œæ–¼ç¯€é»å‰µå»ºçš„ä¸åŒæ–¹å¼åŠå…¶å„ªç¼ºé»ã€‚\nROS2 ç¯€é»å‰µå»ºçš„å…©ç¨®æ–¹å¼ #\råœ¨ ROS2 ä¸­ï¼Œå‰µå»ºç¯€é»æœ‰å…©ç¨®ä¸»è¦çš„æ–¹å¼ï¼šå¯¦ä¾‹åŒ–ç¯€é»å°è±¡å’Œç¹¼æ‰¿ç¯€é»é¡ã€‚è®“æˆ‘å€‘ä¾†çœ‹çœ‹é€™å…©ç¨®æ–¹å¼çš„å…·é«”å¯¦ç¾å’Œæ¯”è¼ƒã€‚\n1. å¯¦ä¾‹åŒ–ç¯€é»å°è±¡ #\ré€™æ˜¯æœ€ç°¡å–®ç›´æ¥çš„æ–¹å¼ï¼Œç›´æ¥å‰µå»ºä¸€å€‹ rclcpp::Node çš„å¯¦ä¾‹ï¼š\n#include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; int main(int argc, char ** argv) { rclcpp::init(argc, argv); auto node = rclcpp::Node::make_shared(\u0026#34;helloworld_node\u0026#34;); RCLCPP_INFO(node-\u0026gt;get_logger(), \u0026#34;hello world!\u0026#34;); rclcpp::shutdown(); return 0; } é€™ç¨®æ–¹å¼ç°¡å–®æ˜äº†ï¼Œé©åˆå¿«é€Ÿé–‹ç™¼å’Œç°¡å–®çš„æ‡‰ç”¨å ´æ™¯ã€‚\n2. ç¹¼æ‰¿ç¯€é»é¡ #\ré€™ç¨®æ–¹å¼é€šéå‰µå»ºä¸€å€‹ç¹¼æ‰¿è‡ª rclcpp::Node çš„è‡ªå®šç¾©é¡ä¾†å¯¦ç¾ï¼š\n#include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; class MyNode: public rclcpp::Node{ public: MyNode():Node(\u0026#34;node_name\u0026#34;){ RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;hello world!\u0026#34;); } }; int main(int argc, char *argv[]) { rclcpp::init(argc,argv); auto node = std::make_shared\u0026lt;MyNode\u0026gt;(); rclcpp::shutdown(); return 0; } é€™ç¨®æ–¹å¼æ›´åŠ é¢å‘å°è±¡ï¼Œé©åˆè¤‡é›œçš„æ‡‰ç”¨å ´æ™¯å’Œå¤§å‹é …ç›®ã€‚\nå…©ç¨®æ–¹å¼çš„æ¯”è¼ƒ #\rå¯¦ä¾‹åŒ–ç¯€é»å°è±¡çš„å„ªç¼ºé» #\rå„ªé»ï¼š\nç°¡å–®ç›´æ¥ï¼Œä»£ç¢¼é‡å°‘ é©åˆå¿«é€ŸåŸå‹é–‹ç™¼å’Œç°¡å–®æ‡‰ç”¨ å­¸ç¿’æ›²ç·šè¼ƒä½ï¼Œé©åˆåˆå­¸è€… ç¼ºé»ï¼š\nä¸é©åˆè¤‡é›œåŠŸèƒ½çš„å¯¦ç¾ ä»£ç¢¼å¯èƒ½è®Šå¾—é›œäº‚ï¼Œé›£ä»¥ç¶­è­· ä¸ç¬¦åˆ ROS2 çš„æ¨è–¦é¢¨æ ¼ ç¹¼æ‰¿ç¯€é»é¡çš„å„ªç¼ºé» #\rå„ªé»ï¼š\næ›´åŠ é¢å‘å°è±¡ï¼Œç¬¦åˆ ROS2 çš„è¨­è¨ˆç†å¿µ æ›´å¥½çš„ä»£ç¢¼çµ„ç¹”å’Œå°è£ é©åˆè¤‡é›œåŠŸèƒ½å’Œå¤§å‹é …ç›® æ›´å®¹æ˜“æ“´å±•å’Œç¶­è­· é€™æ˜¯ ROS2 å®˜æ–¹æ¨è–¦çš„æ–¹å¼ ç¼ºé»ï¼š\nä»£ç¢¼é‡ç¨å¤š å°åˆå­¸è€…ä¾†èªªå¯èƒ½æœ‰ä¸€å®šçš„å­¸ç¿’æ›²ç·š æœ€ä½³å¯¦è¸å»ºè­° #\råœ¨ ROS2 ä¸­ï¼Œæ›´æ¨è–¦ä½¿ç”¨ç¹¼æ‰¿ Node çš„æ–¹å¼ä¾†å‰µå»ºç¯€é»å°è±¡ã€‚é€™ç¨®æ–¹å¼é›–ç„¶åˆçœ‹èµ·ä¾†ä»£ç¢¼é‡ç¨å¤šï¼Œä½†å®ƒæä¾›äº†æ›´å¥½çš„ä»£ç¢¼çµ„ç¹”å’Œå°è£ï¼Œä½¿å¾—ä»£ç¢¼æ›´å®¹æ˜“ç¶­è­·å’Œæ“´å±•ã€‚\nä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨ç¹¼æ‰¿æ–¹å¼çš„æœ€ä½³å¯¦è¸ï¼š\næ˜ç¢ºçš„é¡çµæ§‹ï¼šå°‡ç¯€é»çš„åŠŸèƒ½æ¸…æ™°åœ°çµ„ç¹”åœ¨é¡çš„æˆå“¡å‡½æ•¸å’Œè®Šé‡ä¸­ é©ç•¶çš„å°è£ï¼šä½¿ç”¨ private å’Œ protected æˆå“¡ä¾†æ§åˆ¶è¨ªå•æ¬Šé™ åˆå§‹åŒ–åˆ—è¡¨ï¼šåœ¨æ§‹é€ å‡½æ•¸ä¸­ä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ä¾†åˆå§‹åŒ–åŸºé¡ è³‡æºç®¡ç†ï¼šä½¿ç”¨æ™ºèƒ½æŒ‡é‡ç®¡ç†è³‡æºï¼Œé¿å…å…§å­˜æ³„æ¼ ç¯„ä¾‹ï¼šå®Œæ•´çš„ç¹¼æ‰¿å¼ç¯€é» #\rä¸‹é¢æ˜¯ä¸€å€‹æ›´å®Œæ•´çš„ç¹¼æ‰¿å¼ç¯€é»ç¯„ä¾‹ï¼ŒåŒ…å«äº†ç™¼å¸ƒè€…ã€è¨‚é–±è€…å’Œå®šæ™‚å™¨ï¼š\n#include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026#34;std_msgs/msg/string.hpp\u0026#34; class CompleteNode : public rclcpp::Node { private: rclcpp::Publisher\u0026lt;std_msgs::msg::String\u0026gt;::SharedPtr publisher_; rclcpp::Subscription\u0026lt;std_msgs::msg::String\u0026gt;::SharedPtr subscription_; rclcpp::TimerBase::SharedPtr timer_; size_t count_; public: CompleteNode() : Node(\u0026#34;complete_node\u0026#34;), count_(0) { // å‰µå»ºç™¼å¸ƒè€… publisher_ = this-\u0026gt;create_publisher\u0026lt;std_msgs::msg::String\u0026gt;(\u0026#34;topic\u0026#34;, 10); // å‰µå»ºè¨‚é–±è€… subscription_ = this-\u0026gt;create_subscription\u0026lt;std_msgs::msg::String\u0026gt;( \u0026#34;topic\u0026#34;, 10, [this](const std_msgs::msg::String::SharedPtr msg) { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Received: \u0026#39;%s\u0026#39;\u0026#34;, msg-\u0026gt;data.c_str()); }); // å‰µå»ºå®šæ™‚å™¨ timer_ = this-\u0026gt;create_wall_timer( std::chrono::seconds(1), [this]() { auto message = std_msgs::msg::String(); message.data = \u0026#34;Hello World: \u0026#34; + std::to_string(count_++); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Publishing: \u0026#39;%s\u0026#39;\u0026#34;, message.data.c_str()); publisher_-\u0026gt;publish(message); }); } }; int main(int argc, char * argv[]) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;CompleteNode\u0026gt;(); rclcpp::spin(node); rclcpp::shutdown(); return 0; } çµè«– #\råœ¨ ROS2 C++ é–‹ç™¼ä¸­ï¼Œé›–ç„¶å¯¦ä¾‹åŒ–ç¯€é»å°è±¡çš„æ–¹å¼ç°¡å–®ç›´æ¥ï¼Œä½†ç¹¼æ‰¿ç¯€é»é¡çš„æ–¹å¼æ›´ç¬¦åˆ ROS2 çš„è¨­è¨ˆç†å¿µå’Œæœ€ä½³å¯¦è¸ã€‚å°æ–¼ä»»ä½•è¶…å‡ºç°¡å–®ç¤ºä¾‹çš„å¯¦éš›æ‡‰ç”¨ï¼Œéƒ½å»ºè­°ä½¿ç”¨ç¹¼æ‰¿çš„æ–¹å¼ä¾†å‰µå»ºç¯€é»ã€‚é€™ç¨®æ–¹å¼æä¾›äº†æ›´å¥½çš„ä»£ç¢¼çµ„ç¹”ã€å°è£å’Œå¯ç¶­è­·æ€§ï¼Œä½¿å¾—ä»£ç¢¼æ›´åŠ å¥å£¯å’Œæ˜“æ–¼æ“´å±•ã€‚\néš¨è‘—é …ç›®çš„è¤‡é›œåº¦å¢åŠ ï¼Œç¹¼æ‰¿æ–¹å¼çš„å„ªå‹¢æœƒè®Šå¾—æ›´åŠ æ˜é¡¯ã€‚å› æ­¤ï¼Œå³ä½¿å°æ–¼åˆå­¸è€…ï¼Œä¹Ÿå»ºè­°å¾ä¸€é–‹å§‹å°±é¤Šæˆä½¿ç”¨ç¹¼æ‰¿æ–¹å¼å‰µå»ºç¯€é»çš„ç¿’æ…£ï¼Œé€™å°‡æœ‰åŠ©æ–¼æ›´å¥½åœ°ç†è§£å’Œæ‡‰ç”¨ ROS2 çš„è¨­è¨ˆç†å¿µã€‚\n","date":"28 February 2025","externalUrl":null,"permalink":"/posts/ros_cpp_style_guide/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ’» ROS C++ ç¨‹å¼è¨­è¨ˆé¢¨æ ¼æŒ‡å— \r\n    \u003cdiv id=\"-ros-c-%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88%E9%A2%A8%E6%A0%BC%E6%8C%87%E5%8D%97\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros-c-%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88%E9%A2%A8%E6%A0%BC%E6%8C%87%E5%8D%97\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \r\n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨ ROS2 é–‹ç™¼ä¸­ï¼Œè‰¯å¥½çš„ç¨‹å¼è¨­è¨ˆé¢¨æ ¼ä¸åƒ…èƒ½æé«˜ä»£ç¢¼çš„å¯è®€æ€§å’Œå¯ç¶­è­·æ€§ï¼Œé‚„èƒ½é¿å…ä¸€äº›å¸¸è¦‹çš„éŒ¯èª¤å’Œæ€§èƒ½å•é¡Œã€‚æœ¬æ–‡å°‡ä»‹ç´¹ ROS2 ä¸­ C++ ç¨‹å¼è¨­è¨ˆçš„é¢¨æ ¼æŒ‡å—å’Œæœ€ä½³å¯¦è¸ï¼Œç‰¹åˆ¥æ˜¯é—œæ–¼ç¯€é»å‰µå»ºçš„ä¸åŒæ–¹å¼åŠå…¶å„ªç¼ºé»ã€‚\u003c/p\u003e","title":"ğŸ¤– ROS C++ ç¨‹å¼è¨­è¨ˆé¢¨æ ¼æŒ‡å—","type":"posts"},{"content":"\rğŸ¯ C/C++ æŒ‡æ¨™å®Œå…¨æŒ‡å—ï¼š20å€‹è‡´å‘½éŒ¯èª¤èˆ‡è§£æ±ºæ–¹æ¡ˆ #\r1. ç©ºæŒ‡æ¨™è§£å¼•ç”¨ #\r1.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ int* p = NULL; *p = 1; // ç¨‹å¼å´©æ½° printf(\u0026#34;%d\u0026#34;, *p); // éæ³•è¨˜æ†¶é«”å­˜å– 1.2 æ­£ç¢ºåšæ³• #\rint* p = NULL; if (p != NULL) { *p = 1; printf(\u0026#34;%d\u0026#34;, *p); } 1.3 é€²éšè§£æ±ºæ–¹æ¡ˆ #\r// ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™ std::unique_ptr\u0026lt;int\u0026gt; p = std::make_unique\u0026lt;int\u0026gt;(1); if (p) { std::cout \u0026lt;\u0026lt; *p; } 2. é‡æŒ‡æ¨™ä½¿ç”¨ #\r2.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ int* p; // æœªåˆå§‹åŒ– printf(\u0026#34;%d\u0026#34;, *p); // å­˜å–æœªçŸ¥è¨˜æ†¶é«”ä½ç½® 2.2 æ­£ç¢ºåšæ³• #\rint* p = nullptr; // C++11 å»ºè­°ä½¿ç”¨ nullptr // æˆ– int value = 42; int* p = \u0026amp;value; // æŒ‡å‘æœ‰æ•ˆè®Šæ•¸ 2.3 æœ€ä½³å¯¦è¸ #\rclass SafePointer { private: int* ptr; public: SafePointer() : ptr(nullptr) {} explicit SafePointer(int value) : ptr(new int(value)) {} ~SafePointer() { delete ptr; } bool isValid() const { return ptr != nullptr; } int getValue() const { if (!isValid()) throw std::runtime_error(\u0026#34;Null pointer\u0026#34;); return *ptr; } }; 3. è¨˜æ†¶é«”æ´©æ¼ #\r3.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ void memoryLeak() { int* p = new int(42); // å¿˜è¨˜ delete } // è¨˜æ†¶é«”æ´©æ¼ 3.2 æ­£ç¢ºåšæ³• #\rvoid noLeak() { int* p = new int(42); // ä½¿ç”¨ p delete p; p = nullptr; } 3.3 ç¾ä»£è§£æ±ºæ–¹æ¡ˆ #\rvoid modernWay() { // ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™ std::unique_ptr\u0026lt;int\u0026gt; p = std::make_unique\u0026lt;int\u0026gt;(42); // è‡ªå‹•ç®¡ç†è¨˜æ†¶é«” } 4. é‡è¤‡é‡‹æ”¾ #\r4.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ int* p = new int(42); delete p; delete p; // é‡è¤‡é‡‹æ”¾ï¼Œæœªå®šç¾©è¡Œç‚º 4.2 æ­£ç¢ºåšæ³• #\rint* p = new int(42); delete p; p = nullptr; // è¨­ç‚º nullptr é¿å…é‡è¤‡é‡‹æ”¾ 4.3 æ™ºæ…§æŒ‡æ¨™è§£æ±ºæ–¹æ¡ˆ #\rstd::shared_ptr\u0026lt;int\u0026gt; p = std::make_shared\u0026lt;int\u0026gt;(42); // è‡ªå‹•è™•ç†é‡‹æ”¾ï¼Œä¸éœ€è¦æ‰‹å‹•ç®¡ç† 5. æŒ‡æ¨™è¶Šç•Œ #\r5.1 é™£åˆ—è¶Šç•Œå•é¡Œ #\r// âŒ éŒ¯èª¤ç¤ºç¯„ int arr[5] = {1, 2, 3, 4, 5}; int* p = arr; p[5] = 6; // è¶Šç•Œå¯«å…¥ printf(\u0026#34;%d\u0026#34;, p[10]); // è¶Šç•Œè®€å– 5.2 æ­£ç¢ºåšæ³• #\r// ä½¿ç”¨ STL å®¹å™¨ std::vector\u0026lt;int\u0026gt; arr = {1, 2, 3, 4, 5}; if (arr.size() \u0026gt; 5) { arr[5] = 6; } // æˆ–ä½¿ç”¨ç¯„åœæª¢æŸ¥ template\u0026lt;size_t N\u0026gt; class SafeArray { int data[N]; public: int\u0026amp; operator[](size_t i) { if (i \u0026gt;= N) throw std::out_of_range(\u0026#34;Index out of bounds\u0026#34;); return data[i]; } }; 6. æ‡¸æ›æŒ‡æ¨™ #\r6.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ int* getDangling() { int local = 42; return \u0026amp;local; // å›å‚³å€åŸŸè®Šæ•¸ä½å€ } // æˆ– int* p = new int(42); int* q = p; delete p; // p è¢«é‡‹æ”¾ *q = 100; // q æˆç‚ºæ‡¸æ›æŒ‡æ¨™ 6.2 æ­£ç¢ºåšæ³• #\r// ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™ std::shared_ptr\u0026lt;int\u0026gt; getNumber() { return std::make_shared\u0026lt;int\u0026gt;(42); } // æˆ– std::shared_ptr\u0026lt;int\u0026gt; p = std::make_shared\u0026lt;int\u0026gt;(42); std::shared_ptr\u0026lt;int\u0026gt; q = p; // å…±äº«æ‰€æœ‰æ¬Š 7. æŒ‡æ¨™å‹åˆ¥ä¸åŒ¹é… #\r7.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ int* intPtr = new int(42); char* charPtr = (char*)intPtr; // å±éšªçš„å‹åˆ¥è½‰æ› 7.2 æ­£ç¢ºåšæ³• #\r// ä½¿ç”¨ static_cast æˆ– reinterpret_cast int* intPtr = new int(42); // åªåœ¨ç¢ºå¯¦éœ€è¦æ™‚ä½¿ç”¨ char* charPtr = reinterpret_cast\u0026lt;char*\u0026gt;(intPtr); // æ›´å¥½çš„åšæ³•æ˜¯é¿å…å‹åˆ¥è½‰æ› template\u0026lt;typename T\u0026gt; class TypeSafePtr { T* ptr; public: explicit TypeSafePtr(T* p) : ptr(p) {} T\u0026amp; operator*() { return *ptr; } }; 8. å­—ä¸²æŒ‡æ¨™éŒ¯èª¤ #\r8.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ char* str = \u0026#34;Hello\u0026#34;; // å­—ä¸²å¸¸é‡ä¸å¯ä¿®æ”¹ str[0] = \u0026#39;h\u0026#39;; // æœªå®šç¾©è¡Œç‚º // æˆ– char* str = new char[6]; strcpy(str, \u0026#34;Hello\u0026#34;); // å¿˜è¨˜é‡‹æ”¾è¨˜æ†¶é«” 8.2 æ­£ç¢ºåšæ³• #\r// ä½¿ç”¨å­—ä¸²é™£åˆ— char str[] = \u0026#34;Hello\u0026#34;; // å¯ä¿®æ”¹çš„æ‹·è² // æˆ–ä½¿ç”¨ string std::string str = \u0026#34;Hello\u0026#34;; str[0] = \u0026#39;h\u0026#39;; // å®‰å…¨çš„ä¿®æ”¹ // æˆ–ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™ std::unique_ptr\u0026lt;char[]\u0026gt; str(new char[6]); strcpy(str.get(), \u0026#34;Hello\u0026#34;); 9. å‡½å¼æŒ‡æ¨™éŒ¯èª¤ #\r9.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ void (*fp)(); fp(); // å‘¼å«æœªåˆå§‹åŒ–çš„å‡½å¼æŒ‡æ¨™ 9.2 æ­£ç¢ºåšæ³• #\rvoid func() { std::cout \u0026lt;\u0026lt; \u0026#34;Hello\u0026#34;; } // åŸºæœ¬ç”¨æ³• void (*fp)() = func; if (fp) fp(); // ç¾ä»£å¯«æ³• std::function\u0026lt;void()\u0026gt; fp = func; if (fp) fp(); // æˆ–ä½¿ç”¨ std::bind auto fp = std::bind(\u0026amp;MyClass::method, \u0026amp;obj); 10. å¤šåŸ·è¡Œç·’æŒ‡æ¨™å•é¡Œ #\r10.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ class SharedResource { int* data; public: void update(int value) { *data = value; // æ²’æœ‰åŒæ­¥æ©Ÿåˆ¶ } }; 10.2 æ­£ç¢ºåšæ³• #\rclass ThreadSafeResource { std::shared_ptr\u0026lt;int\u0026gt; data; mutable std::mutex mutex; public: void update(int value) { std::lock_guard\u0026lt;std::mutex\u0026gt; lock(mutex); if (data) *data = value; } int getValue() const { std::lock_guard\u0026lt;std::mutex\u0026gt; lock(mutex); return data ? *data : 0; } }; 11. å¾ªç’°åƒè€ƒå•é¡Œ #\r11.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ struct Node { std::shared_ptr\u0026lt;Node\u0026gt; next; std::shared_ptr\u0026lt;Node\u0026gt; prev; }; void createNodes() { auto node1 = std::make_shared\u0026lt;Node\u0026gt;(); auto node2 = std::make_shared\u0026lt;Node\u0026gt;(); node1-\u0026gt;next = node2; node2-\u0026gt;prev = node1; // é€ æˆå¾ªç’°åƒè€ƒ } 11.2 æ­£ç¢ºåšæ³• #\rstruct Node { std::shared_ptr\u0026lt;Node\u0026gt; next; std::weak_ptr\u0026lt;Node\u0026gt; prev; // ä½¿ç”¨ weak_ptr }; void createNodes() { auto node1 = std::make_shared\u0026lt;Node\u0026gt;(); auto node2 = std::make_shared\u0026lt;Node\u0026gt;(); node1-\u0026gt;next = node2; node2-\u0026gt;prev = node1; // ä¸æœƒé€ æˆå¾ªç’°åƒè€ƒ } 12. æ™ºæ…§æŒ‡æ¨™èª¤ç”¨ #\r12.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ void processData(std::unique_ptr\u0026lt;Data\u0026gt; data) { std::unique_ptr\u0026lt;Data\u0026gt; copy = data; // ç·¨è­¯éŒ¯èª¤ï¼šunique_ptr ä¸èƒ½è¤‡è£½ } // æˆ– std::shared_ptr\u0026lt;int\u0026gt; ptr(new int[10]); // éŒ¯èª¤ï¼šä½¿ç”¨éŒ¯èª¤çš„åˆªé™¤å™¨ 12.2 æ­£ç¢ºåšæ³• #\r// å‚³é unique_ptr void processData(std::unique_ptr\u0026lt;Data\u0026gt;\u0026amp;\u0026amp; data) { // ä½¿ç”¨ std::move std::unique_ptr\u0026lt;Data\u0026gt; local = std::move(data); } // æ­£ç¢ºç®¡ç†é™£åˆ— std::shared_ptr\u0026lt;int[]\u0026gt; ptr(new int[10]); // æˆ– auto ptr = std::make_unique\u0026lt;int[]\u0026gt;(10); 13. æŒ‡æ¨™èˆ‡ç¹¼æ‰¿ #\r13.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ class Base { public: virtual ~Base() = default; }; class Derived : public Base { int* data; public: Derived() : data(new int(42)) {} // å¿˜è¨˜å¯¦ä½œè§£æ§‹å­ï¼Œé€ æˆè¨˜æ†¶é«”æ´©æ¼ }; 13.2 æ­£ç¢ºåšæ³• #\rclass Base { public: virtual ~Base() = default; }; class Derived : public Base { std::unique_ptr\u0026lt;int\u0026gt; data; public: Derived() : data(std::make_unique\u0026lt;int\u0026gt;(42)) {} // ä¸éœ€è¦æ‰‹å‹•å¯¦ä½œè§£æ§‹å­ }; 14. å®¹å™¨æŒ‡æ¨™å•é¡Œ #\r14.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ std::vector\u0026lt;int*\u0026gt; vec; for (int i = 0; i \u0026lt; 5; ++i) { vec.push_back(new int(i)); // æ‰‹å‹•ç®¡ç†è¨˜æ†¶é«” } // å¿˜è¨˜æ¸…ç† 14.2 æ­£ç¢ºåšæ³• #\r// ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™å®¹å™¨ std::vector\u0026lt;std::unique_ptr\u0026lt;int\u0026gt;\u0026gt; vec; for (int i = 0; i \u0026lt; 5; ++i) { vec.push_back(std::make_unique\u0026lt;int\u0026gt;(i)); } // è‡ªå‹•æ¸…ç† // æˆ–æ›´å¥½çš„åšæ³• std::vector\u0026lt;int\u0026gt; vec; for (int i = 0; i \u0026lt; 5; ++i) { vec.push_back(i); } 15. æŒ‡æ¨™èˆ‡ä¾‹å¤–è™•ç† #\r15.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ void riskyFunction() { int* p = new int(42); // å¯èƒ½æ‹‹å‡ºä¾‹å¤– functionThatMightThrow(); delete p; // å¦‚æœç™¼ç”Ÿä¾‹å¤–ï¼Œé€™è¡Œä¸æœƒåŸ·è¡Œ } 15.2 æ­£ç¢ºåšæ³• #\r// ä½¿ç”¨ RAII void safeFunction() { std::unique_ptr\u0026lt;int\u0026gt; p = std::make_unique\u0026lt;int\u0026gt;(42); functionThatMightThrow(); // å³ä½¿æ‹‹å‡ºä¾‹å¤–ï¼Œp ä¹Ÿæœƒè¢«æ­£ç¢ºé‡‹æ”¾ } // æˆ–ä½¿ç”¨æ™ºæ…§è³‡æºç®¡ç† class ResourceGuard { FILE* file; public: ResourceGuard(const char* filename) { file = fopen(filename, \u0026#34;r\u0026#34;); if (!file) throw std::runtime_error(\u0026#34;Failed to open file\u0026#34;); } ~ResourceGuard() { if (file) fclose(file); } }; 16. æŒ‡æ¨™èˆ‡ STL å®¹å™¨ #\r16.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ std::vector\u0026lt;int\u0026gt; vec = {1, 2, 3}; int* p = \u0026amp;vec[0]; vec.push_back(4); // å¯èƒ½å°è‡´é‡æ–°é…ç½®ï¼Œp è®Šæˆæ‡¸æ›æŒ‡æ¨™ 16.2 æ­£ç¢ºåšæ³• #\rstd::vector\u0026lt;int\u0026gt; vec = {1, 2, 3}; // ä½¿ç”¨è¿­ä»£å™¨ auto it = vec.begin(); // æˆ–ä½¿ç”¨åƒè€ƒ int\u0026amp; ref = vec[0]; // å¦‚æœéœ€è¦ä¿æŒæŒ‡æ¨™ vec.reserve(4); // é å…ˆé…ç½®ç©ºé–“ int* p = \u0026amp;vec[0]; vec.push_back(4); // ä¸æœƒé‡æ–°é…ç½® 17. è‡ªè¨‚åˆªé™¤å™¨ #\r17.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ struct CustomResource { void* data; CustomResource() : data(specialAlloc()) {} ~CustomResource() { free(data); // ä½¿ç”¨éŒ¯èª¤çš„é‡‹æ”¾å‡½å¼ } }; 17.2 æ­£ç¢ºåšæ³• #\r// è‡ªè¨‚åˆªé™¤å™¨ struct CustomDeleter { void operator()(void* p) const { specialFree(p); // ä½¿ç”¨æ­£ç¢ºçš„é‡‹æ”¾å‡½å¼ } }; using CustomPtr = std::unique_ptr\u0026lt;void, CustomDeleter\u0026gt;; struct CustomResource { CustomPtr data; CustomResource() : data(specialAlloc(), CustomDeleter()) {} // ä¸éœ€è¦è§£æ§‹å­ }; 18. æŒ‡æ¨™èˆ‡å‹åˆ¥è½‰æ› #\r18.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ class Base {}; class Derived : public Base {}; Base* bp = new Derived; Derived* dp = (Derived*)bp; // å±éšªçš„ C é¢¨æ ¼è½‰æ› 18.2 æ­£ç¢ºåšæ³• #\r// ä½¿ç”¨ C++ é¢¨æ ¼è½‰æ› Base* bp = new Derived; if (Derived* dp = dynamic_cast\u0026lt;Derived*\u0026gt;(bp)) { // å®‰å…¨çš„è½‰æ› } // ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™ std::shared_ptr\u0026lt;Base\u0026gt; bp = std::make_shared\u0026lt;Derived\u0026gt;(); if (auto dp = std::dynamic_pointer_cast\u0026lt;Derived\u0026gt;(bp)) { // å®‰å…¨çš„è½‰æ› } 19. æŒ‡æ¨™èˆ‡å¸¸æ•¸ #\r19.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ const int constant = 42; int* ptr = (int*)\u0026amp;constant; // ç§»é™¤ const é™å®š *ptr = 43; // æœªå®šç¾©è¡Œç‚º 19.2 æ­£ç¢ºåšæ³• #\r// ä¿æŒ const æ­£ç¢ºæ€§ const int constant = 42; const int* ptr = \u0026amp;constant; // *ptr = 43; // ç·¨è­¯éŒ¯èª¤ // ä½¿ç”¨ const æ™ºæ…§æŒ‡æ¨™ std::shared_ptr\u0026lt;const int\u0026gt; ptr = std::make_shared\u0026lt;const int\u0026gt;(42); 20. æŒ‡æ¨™èˆ‡ç§»å‹•èªæ„ #\r20.1 å•é¡Œæè¿° #\r// âŒ éŒ¯èª¤ç¤ºç¯„ class Resource { int* data; public: Resource(int value) : data(new int(value)) {} ~Resource() { delete data; } // ç¼ºå°‘ç§»å‹•å»ºæ§‹å­å’Œè³¦å€¼é‹ç®—å­ Resource(const Resource\u0026amp; other) : data(new int(*other.data)) {} Resource\u0026amp; operator=(const Resource\u0026amp; other) { if (this != \u0026amp;other) { delete data; data = new int(*other.data); } return *this; } }; 20.2 æ­£ç¢ºåšæ³• #\rclass Resource { std::unique_ptr\u0026lt;int\u0026gt; data; public: Resource(int value) : data(std::make_unique\u0026lt;int\u0026gt;(value)) {} // ç§»å‹•å»ºæ§‹å­ Resource(Resource\u0026amp;\u0026amp; other) noexcept = default; // ç§»å‹•è³¦å€¼é‹ç®—å­ Resource\u0026amp; operator=(Resource\u0026amp;\u0026amp; other) noexcept = default; // ç¦ç”¨æ‹·è² Resource(const Resource\u0026amp;) = delete; Resource\u0026amp; operator=(const Resource\u0026amp;) = delete; }; ğŸ¯ æœ€ä½³å¯¦è¸ç¸½çµ #\r1. åˆå§‹åŒ– #\r// âœ… æ°¸é åˆå§‹åŒ–æŒ‡æ¨™ int* ptr = nullptr; std::unique_ptr\u0026lt;int\u0026gt; smartPtr; 2. æ™ºæ…§æŒ‡æ¨™ä½¿ç”¨åŸå‰‡ #\r// âœ… å„ªå…ˆä½¿ç”¨ unique_ptr std::unique_ptr\u0026lt;Resource\u0026gt; single_owner(); // âœ… éœ€è¦å…±äº«æ™‚ä½¿ç”¨ shared_ptr std::shared_ptr\u0026lt;Resource\u0026gt; shared_resource(); // âœ… é¿å…å¾ªç’°åƒè€ƒæ™‚ä½¿ç”¨ weak_ptr std::weak_ptr\u0026lt;Resource\u0026gt; weak_resource; 3. RAII åŸå‰‡ #\rclass RAIIWrapper { std::unique_ptr\u0026lt;Resource\u0026gt; resource; public: RAIIWrapper() : resource(std::make_unique\u0026lt;Resource\u0026gt;()) {} // è‡ªå‹•ç®¡ç†è³‡æºç”Ÿå‘½é€±æœŸ }; 4. å®¹å™¨ä½¿ç”¨ #\r// âœ… ä½¿ç”¨ STL å®¹å™¨ std::vector\u0026lt;int\u0026gt; vec; // è€Œä¸æ˜¯ int* arr = new int[size]; std::array\u0026lt;int, 5\u0026gt; arr; // è€Œä¸æ˜¯ int arr[5]; std::string str; // è€Œä¸æ˜¯ char* str; 5. ç·šç¨‹å®‰å…¨ #\rclass ThreadSafe { mutable std::mutex mutex; std::shared_ptr\u0026lt;Resource\u0026gt; resource; public: void access() { std::lock_guard\u0026lt;std::mutex\u0026gt; lock(mutex); if (resource) { resource-\u0026gt;use(); } } }; ğŸ“ æª¢æŸ¥æ¸…å–® #\râœ… æ‰€æœ‰æŒ‡æ¨™ä½¿ç”¨å‰éƒ½å·²åˆå§‹åŒ– âœ… ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™ç®¡ç†è³‡æº âœ… å¯¦ä½œ RAII åŸå‰‡ âœ… é¿å…åŸå§‹æŒ‡æ¨™çš„æ‰‹å‹•è¨˜æ†¶é«”ç®¡ç† âœ… ä½¿ç”¨ STL å®¹å™¨ä»£æ›¿åŸå§‹é™£åˆ— âœ… æ­£ç¢ºè™•ç†å¤šåŸ·è¡Œç·’æƒ…æ³ âœ… æ³¨æ„ä¾‹å¤–å®‰å…¨ âœ… ä½¿ç”¨ç¾ä»£ C++ ç‰¹æ€§ âœ… é©ç•¶ä½¿ç”¨ const âœ… å¯¦ä½œç§»å‹•èªæ„ ğŸ”§ é™¤éŒ¯å·¥å…·å»ºè­° #\rValgrind\nè¨˜æ†¶é«”æ´©æ¼æª¢æ¸¬ æœªåˆå§‹åŒ–è¨˜æ†¶é«”ä½¿ç”¨æª¢æ¸¬ è¨˜æ†¶é«”å­˜å–éŒ¯èª¤æª¢æ¸¬ AddressSanitizer (ASAN)\nå³æ™‚è¨˜æ†¶é«”éŒ¯èª¤æª¢æ¸¬ æ•ˆèƒ½é–‹éŠ·è¼ƒå° Visual Studio é™¤éŒ¯å™¨\nè¨˜æ†¶é«”æª¢è¦– æ–·é»é™¤éŒ¯ è¨˜æ†¶é«”æ´©æ¼æª¢æ¸¬ Static Analysis Tools\nClang Static Analyzer Cppcheck PVS-Studio ğŸ’¡ æç¤ºï¼š\nå®šæœŸä½¿ç”¨è¨˜æ†¶é«”æª¢æŸ¥å·¥å…· é–‹å•Ÿç·¨è­¯å™¨è­¦å‘Š (-Wall -Wextra) ä½¿ç”¨éœæ…‹åˆ†æå·¥å…· é€²è¡Œå–®å…ƒæ¸¬è©¦ ä¿æŒç¨‹å¼ç¢¼ç°¡æ½” ","date":"27 February 2025","externalUrl":null,"permalink":"/posts/cpp_pointer_guide/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ¯ C/C++ æŒ‡æ¨™å®Œå…¨æŒ‡å—ï¼š20å€‹è‡´å‘½éŒ¯èª¤èˆ‡è§£æ±ºæ–¹æ¡ˆ \r\n    \u003cdiv id=\"-cc-%E6%8C%87%E6%A8%99%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%9720%E5%80%8B%E8%87%B4%E5%91%BD%E9%8C%AF%E8%AA%A4%E8%88%87%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-cc-%E6%8C%87%E6%A8%99%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%9720%E5%80%8B%E8%87%B4%E5%91%BD%E9%8C%AF%E8%AA%A4%E8%88%87%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003e1. ç©ºæŒ‡æ¨™è§£å¼•ç”¨ \r\n    \u003cdiv id=\"1-%E7%A9%BA%E6%8C%87%E6%A8%99%E8%A7%A3%E5%BC%95%E7%94%A8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#1-%E7%A9%BA%E6%8C%87%E6%A8%99%E8%A7%A3%E5%BC%95%E7%94%A8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e1.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"11-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#11-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e    \u003cspan class=\"c1\"\u003e// ç¨‹å¼å´©æ½°\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003eprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// éæ³•è¨˜æ†¶é«”å­˜å–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e1.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"12-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#12-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"nb\"\u003eNULL\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e1.3 é€²éšè§£æ±ºæ–¹æ¡ˆ \r\n    \u003cdiv id=\"13-%E9%80%B2%E9%9A%8E%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#13-%E9%80%B2%E9%9A%8E%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_unique\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e2. é‡æŒ‡æ¨™ä½¿ç”¨ \r\n    \u003cdiv id=\"2-%E9%87%8E%E6%8C%87%E6%A8%99%E4%BD%BF%E7%94%A8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#2-%E9%87%8E%E6%8C%87%E6%A8%99%E4%BD%BF%E7%94%A8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e2.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"21-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#21-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e           \u003cspan class=\"c1\"\u003e// æœªåˆå§‹åŒ–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003eprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// å­˜å–æœªçŸ¥è¨˜æ†¶é«”ä½ç½®\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e2.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"22-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#22-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enullptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// C++11 å»ºè­°ä½¿ç”¨ nullptr\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003evalue\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// æŒ‡å‘æœ‰æ•ˆè®Šæ•¸\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e2.3 æœ€ä½³å¯¦è¸ \r\n    \u003cdiv id=\"23-%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#23-%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSafePointer\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eprivate\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eSafePointer\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enullptr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eexplicit\u003c/span\u003e \u003cspan class=\"nf\"\u003eSafePointer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eSafePointer\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eisValid\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"k\"\u003enullptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003egetValue\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003eisValid\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eruntime_error\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;Null pointer\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e3. è¨˜æ†¶é«”æ´©æ¼ \r\n    \u003cdiv id=\"3-%E8%A8%98%E6%86%B6%E9%AB%94%E6%B4%A9%E6%BC%8F\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#3-%E8%A8%98%E6%86%B6%E9%AB%94%E6%B4%A9%E6%BC%8F\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e3.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"31-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#31-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ememoryLeak\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// å¿˜è¨˜ delete\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// è¨˜æ†¶é«”æ´©æ¼\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e3.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"32-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#32-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003enoLeak\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ä½¿ç”¨ p\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enullptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e3.3 ç¾ä»£è§£æ±ºæ–¹æ¡ˆ \r\n    \u003cdiv id=\"33-%E7%8F%BE%E4%BB%A3%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#33-%E7%8F%BE%E4%BB%A3%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003emodernWay\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_unique\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// è‡ªå‹•ç®¡ç†è¨˜æ†¶é«”\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e4. é‡è¤‡é‡‹æ”¾ \r\n    \u003cdiv id=\"4-%E9%87%8D%E8%A4%87%E9%87%8B%E6%94%BE\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#4-%E9%87%8D%E8%A4%87%E9%87%8B%E6%94%BE\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e4.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"41-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#41-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// é‡è¤‡é‡‹æ”¾ï¼Œæœªå®šç¾©è¡Œç‚º\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e4.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"42-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#42-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enullptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// è¨­ç‚º nullptr é¿å…é‡è¤‡é‡‹æ”¾\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e4.3 æ™ºæ…§æŒ‡æ¨™è§£æ±ºæ–¹æ¡ˆ \r\n    \u003cdiv id=\"43-%E6%99%BA%E6%85%A7%E6%8C%87%E6%A8%99%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#43-%E6%99%BA%E6%85%A7%E6%8C%87%E6%A8%99%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%A1%88\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// è‡ªå‹•è™•ç†é‡‹æ”¾ï¼Œä¸éœ€è¦æ‰‹å‹•ç®¡ç†\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e5. æŒ‡æ¨™è¶Šç•Œ \r\n    \u003cdiv id=\"5-%E6%8C%87%E6%A8%99%E8%B6%8A%E7%95%8C\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#5-%E6%8C%87%E6%A8%99%E8%B6%8A%E7%95%8C\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e5.1 é™£åˆ—è¶Šç•Œå•é¡Œ \r\n    \u003cdiv id=\"51-%E9%99%A3%E5%88%97%E8%B6%8A%E7%95%8C%E5%95%8F%E9%A1%8C\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#51-%E9%99%A3%E5%88%97%E8%B6%8A%E7%95%8C%E5%95%8F%E9%A1%8C\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e    \u003cspan class=\"c1\"\u003e// è¶Šç•Œå¯«å…¥\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003eprintf\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;%d\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// è¶Šç•Œè®€å–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e5.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"52-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#52-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨ STL å®¹å™¨\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003evector\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003earr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esize\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–ä½¿ç”¨ç¯„åœæª¢æŸ¥\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003etemplate\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003esize_t\u003c/span\u003e \u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSafeArray\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003eoperator\u003c/span\u003e\u003cspan class=\"p\"\u003e[](\u003c/span\u003e\u003cspan class=\"n\"\u003esize_t\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;=\u003c/span\u003e \u003cspan class=\"n\"\u003eN\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eout_of_range\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;Index out of bounds\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e6. æ‡¸æ›æŒ‡æ¨™ \r\n    \u003cdiv id=\"6-%E6%87%B8%E6%8E%9B%E6%8C%87%E6%A8%99\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#6-%E6%87%B8%E6%8E%9B%E6%8C%87%E6%A8%99\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e6.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"61-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#61-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"nf\"\u003egetDangling\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003elocal\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003elocal\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å›å‚³å€åŸŸè®Šæ•¸ä½å€\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eq\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e    \u003cspan class=\"c1\"\u003e// p è¢«é‡‹æ”¾\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eq\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e    \u003cspan class=\"c1\"\u003e// q æˆç‚ºæ‡¸æ›æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e6.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"62-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#62-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003egetNumber\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eq\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å…±äº«æ‰€æœ‰æ¬Š\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e7. æŒ‡æ¨™å‹åˆ¥ä¸åŒ¹é… \r\n    \u003cdiv id=\"7-%E6%8C%87%E6%A8%99%E5%9E%8B%E5%88%A5%E4%B8%8D%E5%8C%B9%E9%85%8D\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#7-%E6%8C%87%E6%A8%99%E5%9E%8B%E5%88%A5%E4%B8%8D%E5%8C%B9%E9%85%8D\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e7.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"71-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#71-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eintPtr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003echarPtr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003eintPtr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å±éšªçš„å‹åˆ¥è½‰æ›\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e7.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"72-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#72-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨ static_cast æˆ– reinterpret_cast\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eintPtr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// åªåœ¨ç¢ºå¯¦éœ€è¦æ™‚ä½¿ç”¨\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003echarPtr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ereinterpret_cast\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eintPtr\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æ›´å¥½çš„åšæ³•æ˜¯é¿å…å‹åˆ¥è½‰æ›\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003etemplate\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"k\"\u003etypename\u003c/span\u003e \u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTypeSafePtr\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eexplicit\u003c/span\u003e \u003cspan class=\"n\"\u003eTypeSafePtr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eT\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003eoperator\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e8. å­—ä¸²æŒ‡æ¨™éŒ¯èª¤ \r\n    \u003cdiv id=\"8-%E5%AD%97%E4%B8%B2%E6%8C%87%E6%A8%99%E9%8C%AF%E8%AA%A4\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#8-%E5%AD%97%E4%B8%B2%E6%8C%87%E6%A8%99%E9%8C%AF%E8%AA%A4\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e8.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"81-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#81-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003estr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Hello\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å­—ä¸²å¸¸é‡ä¸å¯ä¿®æ”¹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sc\"\u003e\u0026#39;h\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e        \u003cspan class=\"c1\"\u003e// æœªå®šç¾©è¡Œç‚º\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003estr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003estrcpy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Hello\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å¿˜è¨˜é‡‹æ”¾è¨˜æ†¶é«”\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e8.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"82-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#82-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨å­—ä¸²é™£åˆ—\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e \u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Hello\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å¯ä¿®æ”¹çš„æ‹·è²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–ä½¿ç”¨ string\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003estr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Hello\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sc\"\u003e\u0026#39;h\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å®‰å…¨çš„ä¿®æ”¹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003estrcpy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Hello\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e9. å‡½å¼æŒ‡æ¨™éŒ¯èª¤ \r\n    \u003cdiv id=\"9-%E5%87%BD%E5%BC%8F%E6%8C%87%E6%A8%99%E9%8C%AF%E8%AA%A4\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#9-%E5%87%BD%E5%BC%8F%E6%8C%87%E6%A8%99%E9%8C%AF%E8%AA%A4\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e9.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"91-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#91-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003efp\u003c/span\u003e\u003cspan class=\"p\"\u003e)();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003efp\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å‘¼å«æœªåˆå§‹åŒ–çš„å‡½å¼æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e9.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"92-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#92-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ecout\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u0026lt;\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;Hello\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// åŸºæœ¬ç”¨æ³•\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003efp\u003c/span\u003e\u003cspan class=\"p\"\u003e)()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efp\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003efp\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ç¾ä»£å¯«æ³•\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003efunction\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003efp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efunc\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efp\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003efp\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–ä½¿ç”¨ std::bind\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003efp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eMyClass\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emethod\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eobj\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e10. å¤šåŸ·è¡Œç·’æŒ‡æ¨™å•é¡Œ \r\n    \u003cdiv id=\"10-%E5%A4%9A%E5%9F%B7%E8%A1%8C%E7%B7%92%E6%8C%87%E6%A8%99%E5%95%8F%E9%A1%8C\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#10-%E5%A4%9A%E5%9F%B7%E8%A1%8C%E7%B7%92%E6%8C%87%E6%A8%99%E5%95%8F%E9%A1%8C\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e10.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"101-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#101-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eSharedResource\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eupdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// æ²’æœ‰åŒæ­¥æ©Ÿåˆ¶\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e10.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"102-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#102-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eThreadSafeResource\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003emutable\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emutex\u003c/span\u003e \u003cspan class=\"n\"\u003emutex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eupdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003elock_guard\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emutex\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003elock\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emutex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003egetValue\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003elock_guard\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emutex\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003elock\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emutex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"o\"\u003e?\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"nl\"\u003edata\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e11. å¾ªç’°åƒè€ƒå•é¡Œ \r\n    \u003cdiv id=\"11-%E5%BE%AA%E7%92%B0%E5%8F%83%E8%80%83%E5%95%8F%E9%A1%8C\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#11-%E5%BE%AA%E7%92%B0%E5%8F%83%E8%80%83%E5%95%8F%E9%A1%8C\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e11.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"111-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#111-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eNode\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eprev\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreateNodes\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003enode1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003enode2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003enode1\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003enext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enode2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003enode2\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eprev\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enode1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// é€ æˆå¾ªç’°åƒè€ƒ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e11.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"112-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#112-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eNode\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enext\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eweak_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eprev\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// ä½¿ç”¨ weak_ptr\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003ecreateNodes\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003enode1\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003enode2\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNode\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003enode1\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003enext\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enode2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003enode2\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003eprev\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enode1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// ä¸æœƒé€ æˆå¾ªç’°åƒè€ƒ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e12. æ™ºæ…§æŒ‡æ¨™èª¤ç”¨ \r\n    \u003cdiv id=\"12-%E6%99%BA%E6%85%A7%E6%8C%87%E6%A8%99%E8%AA%A4%E7%94%A8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#12-%E6%99%BA%E6%85%A7%E6%8C%87%E6%A8%99%E8%AA%A4%E7%94%A8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e12.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"121-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#121-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eprocessData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eData\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eData\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ecopy\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// ç·¨è­¯éŒ¯èª¤ï¼šunique_ptr ä¸èƒ½è¤‡è£½\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// éŒ¯èª¤ï¼šä½¿ç”¨éŒ¯èª¤çš„åˆªé™¤å™¨\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e12.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"122-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#122-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å‚³é unique_ptr\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eprocessData\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eData\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ä½¿ç”¨ std::move\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eData\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003elocal\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emove\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æ­£ç¢ºç®¡ç†é™£åˆ—\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_unique\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e13. æŒ‡æ¨™èˆ‡ç¹¼æ‰¿ \r\n    \u003cdiv id=\"13-%E6%8C%87%E6%A8%99%E8%88%87%E7%B9%BC%E6%89%BF\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#13-%E6%8C%87%E6%A8%99%E8%88%87%E7%B9%BC%E6%89%BF\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e13.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"131-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#131-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBase\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003evirtual\u003c/span\u003e \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eBase\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDerived\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eBase\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// å¿˜è¨˜å¯¦ä½œè§£æ§‹å­ï¼Œé€ æˆè¨˜æ†¶é«”æ´©æ¼\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e13.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"132-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#132-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBase\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003evirtual\u003c/span\u003e \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eBase\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDerived\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eBase\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_unique\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ä¸éœ€è¦æ‰‹å‹•å¯¦ä½œè§£æ§‹å­\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e14. å®¹å™¨æŒ‡æ¨™å•é¡Œ \r\n    \u003cdiv id=\"14-%E5%AE%B9%E5%99%A8%E6%8C%87%E6%A8%99%E5%95%8F%E9%A1%8C\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#14-%E5%AE%B9%E5%99%A8%E6%8C%87%E6%A8%99%E5%95%8F%E9%A1%8C\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e14.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"141-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#141-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003evector\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epush_back\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// æ‰‹å‹•ç®¡ç†è¨˜æ†¶é«”\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å¿˜è¨˜æ¸…ç†\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e14.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"142-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#142-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™å®¹å™¨\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003evector\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epush_back\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_unique\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// è‡ªå‹•æ¸…ç†\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–æ›´å¥½çš„åšæ³•\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003evector\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"o\"\u003e++\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epush_back\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e15. æŒ‡æ¨™èˆ‡ä¾‹å¤–è™•ç† \r\n    \u003cdiv id=\"15-%E6%8C%87%E6%A8%99%E8%88%87%E4%BE%8B%E5%A4%96%E8%99%95%E7%90%86\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#15-%E6%8C%87%E6%A8%99%E8%88%87%E4%BE%8B%E5%A4%96%E8%99%95%E7%90%86\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e15.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"151-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#151-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eriskyFunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// å¯èƒ½æ‹‹å‡ºä¾‹å¤–\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"n\"\u003efunctionThatMightThrow\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å¦‚æœç™¼ç”Ÿä¾‹å¤–ï¼Œé€™è¡Œä¸æœƒåŸ·è¡Œ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e15.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"152-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#152-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨ RAII\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003esafeFunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_unique\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003efunctionThatMightThrow\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å³ä½¿æ‹‹å‡ºä¾‹å¤–ï¼Œp ä¹Ÿæœƒè¢«æ­£ç¢ºé‡‹æ”¾\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–ä½¿ç”¨æ™ºæ…§è³‡æºç®¡ç†\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eResourceGuard\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eFILE\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eResourceGuard\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003echar\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003efile\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003efopen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efilename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\u0026#34;r\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eruntime_error\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\u0026#34;Failed to open file\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eResourceGuard\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"n\"\u003efclose\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efile\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e16. æŒ‡æ¨™èˆ‡ STL å®¹å™¨ \r\n    \u003cdiv id=\"16-%E6%8C%87%E6%A8%99%E8%88%87-stl-%E5%AE%B9%E5%99%A8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#16-%E6%8C%87%E6%A8%99%E8%88%87-stl-%E5%AE%B9%E5%99%A8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e16.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"161-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#161-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003evector\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003evec\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epush_back\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å¯èƒ½å°è‡´é‡æ–°é…ç½®ï¼Œp è®Šæˆæ‡¸æ›æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e16.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"162-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#162-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003evector\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003evec\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨è¿­ä»£å™¨\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003eit\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebegin\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// æˆ–ä½¿ç”¨åƒè€ƒ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eref\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// å¦‚æœéœ€è¦ä¿æŒæŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ereserve\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// é å…ˆé…ç½®ç©ºé–“\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epush_back\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// ä¸æœƒé‡æ–°é…ç½®\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e17. è‡ªè¨‚åˆªé™¤å™¨ \r\n    \u003cdiv id=\"17-%E8%87%AA%E8%A8%82%E5%88%AA%E9%99%A4%E5%99%A8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#17-%E8%87%AA%E8%A8%82%E5%88%AA%E9%99%A4%E5%99%A8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e17.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"171-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#171-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eCustomResource\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eCustomResource\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003especialAlloc\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eCustomResource\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003efree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// ä½¿ç”¨éŒ¯èª¤çš„é‡‹æ”¾å‡½å¼\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e17.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"172-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#172-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// è‡ªè¨‚åˆªé™¤å™¨\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eCustomDeleter\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eoperator\u003c/span\u003e\u003cspan class=\"p\"\u003e()(\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003especialFree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// ä½¿ç”¨æ­£ç¢ºçš„é‡‹æ”¾å‡½å¼\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eusing\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomPtr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003evoid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomDeleter\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eCustomResource\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eCustomPtr\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eCustomResource\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003especialAlloc\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"n\"\u003eCustomDeleter\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ä¸éœ€è¦è§£æ§‹å­\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e18. æŒ‡æ¨™èˆ‡å‹åˆ¥è½‰æ› \r\n    \u003cdiv id=\"18-%E6%8C%87%E6%A8%99%E8%88%87%E5%9E%8B%E5%88%A5%E8%BD%89%E6%8F%9B\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#18-%E6%8C%87%E6%A8%99%E8%88%87%E5%9E%8B%E5%88%A5%E8%BD%89%E6%8F%9B\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e18.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"181-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#181-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eBase\u003c/span\u003e \u003cspan class=\"p\"\u003e{};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eDerived\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eBase\u003c/span\u003e \u003cspan class=\"p\"\u003e{};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eBase\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ebp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003edp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"n\"\u003ebp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// å±éšªçš„ C é¢¨æ ¼è½‰æ›\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e18.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"182-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#182-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨ C++ é¢¨æ ¼è½‰æ›\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003eBase\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ebp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003edp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edynamic_cast\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebp\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// å®‰å…¨çš„è½‰æ›\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eBase\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ebp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003eauto\u003c/span\u003e \u003cspan class=\"n\"\u003edp\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003edynamic_pointer_cast\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eDerived\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebp\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// å®‰å…¨çš„è½‰æ›\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e19. æŒ‡æ¨™èˆ‡å¸¸æ•¸ \r\n    \u003cdiv id=\"19-%E6%8C%87%E6%A8%99%E8%88%87%E5%B8%B8%E6%95%B8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#19-%E6%8C%87%E6%A8%99%E8%88%87%E5%B8%B8%E6%95%B8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e19.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"191-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#191-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003econstant\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003econstant\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// ç§»é™¤ const é™å®š\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eptr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e43\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// æœªå®šç¾©è¡Œç‚º\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e19.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"192-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#192-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä¿æŒ const æ­£ç¢ºæ€§\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003econstant\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003econstant\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// *ptr = 43;  // ç·¨è­¯éŒ¯èª¤\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// ä½¿ç”¨ const æ™ºæ…§æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_shared\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e42\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e20. æŒ‡æ¨™èˆ‡ç§»å‹•èªæ„ \r\n    \u003cdiv id=\"20-%E6%8C%87%E6%A8%99%E8%88%87%E7%A7%BB%E5%8B%95%E8%AA%9E%E6%84%8F\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#20-%E6%8C%87%E6%A8%99%E8%88%87%E7%A7%BB%E5%8B%95%E8%AA%9E%E6%84%8F\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e20.1 å•é¡Œæè¿° \r\n    \u003cdiv id=\"201-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#201-%E5%95%8F%E9%A1%8C%E6%8F%8F%E8%BF%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âŒ éŒ¯èª¤ç¤ºç¯„\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eResource\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"o\"\u003e~\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ç¼ºå°‘ç§»å‹•å»ºæ§‹å­å’Œè³¦å€¼é‹ç®—å­\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003eoperator\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"k\"\u003edelete\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"n\"\u003edata\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e20.2 æ­£ç¢ºåšæ³• \r\n    \u003cdiv id=\"202-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#202-%E6%AD%A3%E7%A2%BA%E5%81%9A%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eResource\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_unique\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ç§»å‹•å»ºæ§‹å­\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003enoexcept\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ç§»å‹•è³¦å€¼é‹ç®—å­\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003eoperator\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003enoexcept\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// ç¦ç”¨æ‹·è²\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e    \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edelete\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003eoperator\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003econst\u003c/span\u003e \u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edelete\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003eğŸ¯ æœ€ä½³å¯¦è¸ç¸½çµ \r\n    \u003cdiv id=\"-%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90%E7%B8%BD%E7%B5%90\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90%E7%B8%BD%E7%B5%90\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e1. åˆå§‹åŒ– \r\n    \u003cdiv id=\"1-%E5%88%9D%E5%A7%8B%E5%8C%96\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#1-%E5%88%9D%E5%A7%8B%E5%8C%96\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âœ… æ°¸é åˆå§‹åŒ–æŒ‡æ¨™\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eptr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enullptr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esmartPtr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e2. æ™ºæ…§æŒ‡æ¨™ä½¿ç”¨åŸå‰‡ \r\n    \u003cdiv id=\"2-%E6%99%BA%E6%85%A7%E6%8C%87%E6%A8%99%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%89%87\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#2-%E6%99%BA%E6%85%A7%E6%8C%87%E6%A8%99%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%89%87\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âœ… å„ªå…ˆä½¿ç”¨ unique_ptr\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esingle_owner\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âœ… éœ€è¦å…±äº«æ™‚ä½¿ç”¨ shared_ptr\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eshared_resource\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âœ… é¿å…å¾ªç’°åƒè€ƒæ™‚ä½¿ç”¨ weak_ptr\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eweak_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eweak_resource\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e3. RAII åŸå‰‡ \r\n    \u003cdiv id=\"3-raii-%E5%8E%9F%E5%89%87\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#3-raii-%E5%8E%9F%E5%89%87\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRAIIWrapper\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eunique_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003eRAIIWrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emake_unique\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e \u003cspan class=\"p\"\u003e{}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"c1\"\u003e// è‡ªå‹•ç®¡ç†è³‡æºç”Ÿå‘½é€±æœŸ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e4. å®¹å™¨ä½¿ç”¨ \r\n    \u003cdiv id=\"4-%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#4-%E5%AE%B9%E5%99%A8%E4%BD%BF%E7%94%A8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e// âœ… ä½¿ç”¨ STL å®¹å™¨\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003evector\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003evec\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                    \u003cspan class=\"c1\"\u003e// è€Œä¸æ˜¯ int* arr = new int[size];\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003earray\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003earr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                  \u003cspan class=\"c1\"\u003e// è€Œä¸æ˜¯ int arr[5];\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"c1\"\u003e\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                         \u003cspan class=\"c1\"\u003e// è€Œä¸æ˜¯ char* str;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch3 class=\"relative group\"\u003e5. ç·šç¨‹å®‰å…¨ \r\n    \u003cdiv id=\"5-%E7%B7%9A%E7%A8%8B%E5%AE%89%E5%85%A8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#5-%E7%B7%9A%E7%A8%8B%E5%AE%89%E5%85%A8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-cpp\" data-lang=\"cpp\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eThreadSafe\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"k\"\u003emutable\u003c/span\u003e \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emutex\u003c/span\u003e \u003cspan class=\"n\"\u003emutex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003eshared_ptr\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eResource\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e\u003cspan class=\"o\"\u003e:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003eaccess\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003elock_guard\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003estd\u003c/span\u003e\u003cspan class=\"o\"\u003e::\u003c/span\u003e\u003cspan class=\"n\"\u003emutex\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003elock\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emutex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e            \u003cspan class=\"n\"\u003eresource\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003euse\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003eğŸ“ æª¢æŸ¥æ¸…å–® \r\n    \u003cdiv id=\"-%E6%AA%A2%E6%9F%A5%E6%B8%85%E5%96%AE\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-%E6%AA%A2%E6%9F%A5%E6%B8%85%E5%96%AE\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003col\u003e\n\u003cli\u003eâœ… æ‰€æœ‰æŒ‡æ¨™ä½¿ç”¨å‰éƒ½å·²åˆå§‹åŒ–\u003c/li\u003e\n\u003cli\u003eâœ… ä½¿ç”¨æ™ºæ…§æŒ‡æ¨™ç®¡ç†è³‡æº\u003c/li\u003e\n\u003cli\u003eâœ… å¯¦ä½œ RAII åŸå‰‡\u003c/li\u003e\n\u003cli\u003eâœ… é¿å…åŸå§‹æŒ‡æ¨™çš„æ‰‹å‹•è¨˜æ†¶é«”ç®¡ç†\u003c/li\u003e\n\u003cli\u003eâœ… ä½¿ç”¨ STL å®¹å™¨ä»£æ›¿åŸå§‹é™£åˆ—\u003c/li\u003e\n\u003cli\u003eâœ… æ­£ç¢ºè™•ç†å¤šåŸ·è¡Œç·’æƒ…æ³\u003c/li\u003e\n\u003cli\u003eâœ… æ³¨æ„ä¾‹å¤–å®‰å…¨\u003c/li\u003e\n\u003cli\u003eâœ… ä½¿ç”¨ç¾ä»£ C++ ç‰¹æ€§\u003c/li\u003e\n\u003cli\u003eâœ… é©ç•¶ä½¿ç”¨ const\u003c/li\u003e\n\u003cli\u003eâœ… å¯¦ä½œç§»å‹•èªæ„\u003c/li\u003e\n\u003c/ol\u003e\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eğŸ”§ é™¤éŒ¯å·¥å…·å»ºè­° \r\n    \u003cdiv id=\"-%E9%99%A4%E9%8C%AF%E5%B7%A5%E5%85%B7%E5%BB%BA%E8%AD%B0\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-%E9%99%A4%E9%8C%AF%E5%B7%A5%E5%85%B7%E5%BB%BA%E8%AD%B0\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eValgrind\u003c/p\u003e","title":"ğŸ’» C++ æŒ‡æ¨™æŒ‡å—","type":"posts"},{"content":"","date":"27 February 2025","externalUrl":null,"permalink":"/categories/c++/","section":"Categories","summary":"","title":"C++","type":"categories"},{"content":"","date":"27 February 2025","externalUrl":null,"permalink":"/tags/pointer/","section":"Tags","summary":"","title":"Pointer","type":"tags"},{"content":"\rğŸ¢ ROS2 TF2 åº§æ¨™è½‰æ›åŸºç¤æ•™å­¸ #\rå‰è¨€ #\råœ¨ ROS2 æ©Ÿå™¨äººç³»çµ±ä¸­ï¼ŒTF2 (Transform Framework 2) æ˜¯ä¸€å€‹éå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œå®ƒç”¨æ–¼ç®¡ç†å’Œè¿½è¹¤æ©Ÿå™¨äººç³»çµ±ä¸­ä¸åŒåº§æ¨™ç³»çµ±ä¹‹é–“çš„é—œä¿‚ã€‚æœ¬æ–‡å°‡è©³ç´°ä»‹ç´¹ TF2 çš„åŸºæœ¬æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å¦‚ä½•ç™¼å¸ƒåº§æ¨™è½‰æ›ã€æŸ¥è©¢åº§æ¨™é—œä¿‚ç­‰ã€‚\nTF2 åº§æ¨™è½‰æ›åŸºç¤ #\r1. åº§æ¨™ç³»çµ±æ¨¹ç‹€çµæ§‹ #\råœ¨ ROS2 ä¸­ï¼Œæ‰€æœ‰çš„åº§æ¨™ç³»çµ±éƒ½çµ„ç¹”æˆä¸€å€‹æ¨¹ç‹€çµæ§‹ã€‚ä¾‹å¦‚ï¼š\nworld â””â”€â”€ map â””â”€â”€ odom â””â”€â”€ base_link â”œâ”€â”€ base_laser â””â”€â”€ camera_link æ¯å€‹åº§æ¨™ç³»çµ±éƒ½æœ‰ä¸€å€‹çˆ¶åº§æ¨™ç³»çµ±ï¼ˆé™¤äº†æ ¹ç¯€é»ï¼‰ï¼Œä¸¦ä¸”å¯ä»¥æœ‰å¤šå€‹å­åº§æ¨™ç³»çµ±ã€‚\n2. åº§æ¨™è½‰æ›ç¯„ä¾‹ #\r2.1 éœæ…‹è½‰æ›ç¯„ä¾‹ #\rå‡è¨­æˆ‘å€‘æœ‰ä¸€å€‹é›·å°„æ„Ÿæ¸¬å™¨å®‰è£åœ¨æ©Ÿå™¨äººä¸Šï¼Œå…¶ç›¸å°æ–¼æ©Ÿå™¨äººåŸºåº§çš„ä½ç½®å¦‚ä¸‹ï¼š\nx æ–¹å‘åç§»ï¼š0.1 å…¬å°º y æ–¹å‘åç§»ï¼š0.0 å…¬å°º z æ–¹å‘åç§»ï¼š0.2 å…¬å°º ç¹ z è»¸æ—‹è½‰ï¼š45 åº¦ æˆ‘å€‘å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ç™¼å¸ƒé€™å€‹éœæ…‹è½‰æ›ï¼š\nros2 run tf2_ros static_transform_publisher --x 0.1 --y 0.0 --z 0.2 --yaw 0.785 --pitch 0.0 --roll 0.0 --frame-id base_link --child-frame-id base_laser 2.2 å‹•æ…‹è½‰æ›ç¯„ä¾‹ #\rä»¥ä¸‹æ˜¯ä¸€å€‹å‹•æ…‹ç™¼å¸ƒæ©Ÿå™¨äººä½ç½®çš„ç¯„ä¾‹ï¼š\n#include \u0026lt;rclcpp/rclcpp.hpp\u0026gt; #include \u0026lt;tf2_ros/transform_broadcaster.h\u0026gt; #include \u0026lt;geometry_msgs/msg/transform_stamped.hpp\u0026gt; #include \u0026lt;tf2/LinearMath/Quaternion.h\u0026gt; class DynamicTFPublisher : public rclcpp::Node { private: std::unique_ptr\u0026lt;tf2_ros::TransformBroadcaster\u0026gt; tf_broadcaster_; rclcpp::TimerBase::SharedPtr timer_; double robot_x_ = 0.0; double robot_y_ = 0.0; double robot_theta_ = 0.0; public: DynamicTFPublisher() : Node(\u0026#34;dynamic_tf_publisher\u0026#34;) { tf_broadcaster_ = std::make_unique\u0026lt;tf2_ros::TransformBroadcaster\u0026gt;(this); timer_ = this-\u0026gt;create_wall_timer( std::chrono::milliseconds(100), std::bind(\u0026amp;DynamicTFPublisher::broadcast_transform, this)); } void broadcast_transform() { // æ›´æ–°æ©Ÿå™¨äººä½ç½®ï¼ˆé€™è£¡ç”¨ç°¡å–®çš„åœ“å‘¨é‹å‹•ä½œç‚ºç¤ºä¾‹ï¼‰ robot_x_ = 2.0 * cos(robot_theta_); robot_y_ = 2.0 * sin(robot_theta_); robot_theta_ += 0.1; geometry_msgs::msg::TransformStamped transform; transform.header.stamp = this-\u0026gt;get_clock()-\u0026gt;now(); transform.header.frame_id = \u0026#34;odom\u0026#34;; transform.child_frame_id = \u0026#34;base_link\u0026#34;; // è¨­ç½®å¹³ç§» transform.transform.translation.x = robot_x_; transform.transform.translation.y = robot_y_; transform.transform.translation.z = 0.0; // è¨­ç½®æ—‹è½‰ tf2::Quaternion q; q.setRPY(0, 0, robot_theta_); transform.transform.rotation.x = q.x(); transform.transform.rotation.y = q.y(); transform.transform.rotation.z = q.z(); transform.transform.rotation.w = q.w(); // ç™¼å¸ƒè½‰æ› tf_broadcaster_-\u0026gt;sendTransform(transform); } }; int main(int argc, char** argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;DynamicTFPublisher\u0026gt;(); rclcpp::spin(node); rclcpp::shutdown(); return 0; } 3. åº§æ¨™è½‰æ›æŸ¥è©¢ç¯„ä¾‹ #\rä»¥ä¸‹æ˜¯ä¸€å€‹æŸ¥è©¢å…©å€‹åº§æ¨™ç³»çµ±ä¹‹é–“è½‰æ›çš„å®Œæ•´ç¯„ä¾‹ï¼š\n#include \u0026lt;rclcpp/rclcpp.hpp\u0026gt; #include \u0026lt;tf2_ros/transform_listener.h\u0026gt; #include \u0026lt;tf2_ros/buffer.h\u0026gt; #include \u0026lt;tf2_geometry_msgs/tf2_geometry_msgs.hpp\u0026gt; #include \u0026lt;geometry_msgs/msg/point_stamped.hpp\u0026gt; class TFQueryExample : public rclcpp::Node { private: std::unique_ptr\u0026lt;tf2_ros::Buffer\u0026gt; tf_buffer_; std::shared_ptr\u0026lt;tf2_ros::TransformListener\u0026gt; tf_listener_; rclcpp::TimerBase::SharedPtr timer_; public: TFQueryExample() : Node(\u0026#34;tf_query_example\u0026#34;) { tf_buffer_ = std::make_unique\u0026lt;tf2_ros::Buffer\u0026gt;(this-\u0026gt;get_clock()); tf_listener_ = std::make_shared\u0026lt;tf2_ros::TransformListener\u0026gt;(*tf_buffer_); timer_ = this-\u0026gt;create_wall_timer( std::chrono::seconds(1), std::bind(\u0026amp;TFQueryExample::query_point_transform, this)); } void query_point_transform() { // å‰µå»ºä¸€å€‹åœ¨é›·å°„åº§æ¨™ç³»ä¸­çš„é» geometry_msgs::msg::PointStamped point_in_laser; point_in_laser.header.frame_id = \u0026#34;base_laser\u0026#34;; point_in_laser.header.stamp = this-\u0026gt;get_clock()-\u0026gt;now(); point_in_laser.point.x = 1.0; // 1ç±³å‰æ–¹ point_in_laser.point.y = 0.0; point_in_laser.point.z = 0.0; try { // å°‡é»å¾é›·å°„åº§æ¨™ç³»è½‰æ›åˆ°æ©Ÿå™¨äººåŸºåº§åº§æ¨™ç³» geometry_msgs::msg::PointStamped point_in_base; point_in_base = tf_buffer_-\u0026gt;transform(point_in_laser, \u0026#34;base_link\u0026#34;); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Point in base_link frame: [%f, %f, %f]\u0026#34;, point_in_base.point.x, point_in_base.point.y, point_in_base.point.z); } catch (const tf2::TransformException \u0026amp; ex) { RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Transform failed: %s\u0026#34;, ex.what()); } } }; int main(int argc, char** argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;TFQueryExample\u0026gt;(); rclcpp::spin(node); rclcpp::shutdown(); return 0; } 4. å¯¦éš›æ‡‰ç”¨å ´æ™¯ #\r4.1 æ©Ÿå™¨äººå°èˆª #\råœ¨æ©Ÿå™¨äººå°èˆªä¸­ï¼Œæˆ‘å€‘éœ€è¦ç¶­è­·å¤šå€‹åº§æ¨™ç³»çµ±ï¼š\nmap: å…¨å±€åœ°åœ–åº§æ¨™ç³» odom: é‡Œç¨‹è¨ˆåº§æ¨™ç³» base_link: æ©Ÿå™¨äººåŸºåº§åº§æ¨™ç³» base_laser: é›·å°„æ„Ÿæ¸¬å™¨åº§æ¨™ç³» é€™äº›åº§æ¨™ç³»çµ±çš„é—œä¿‚å¦‚ä¸‹ï¼š\nmap â””â”€â”€ odom â””â”€â”€ base_link â””â”€â”€ base_laser ä½¿ç”¨ TF2 å¯ä»¥ï¼š\nå°‡é›·å°„æƒææ•¸æ“šå¾ base_laser è½‰æ›åˆ° map åº§æ¨™ç³» è¿½è¹¤æ©Ÿå™¨äººåœ¨åœ°åœ–ä¸­çš„ä½ç½® é€²è¡Œè·¯å¾‘è¦åŠƒå’Œé¿éšœ 4.2 æ©Ÿå™¨æ‰‹è‡‚æ§åˆ¶ #\rå°æ–¼æ©Ÿå™¨æ‰‹è‡‚ï¼Œåº§æ¨™ç³»çµ±å¯èƒ½å¦‚ä¸‹ï¼š\nworld â””â”€â”€ base_link â””â”€â”€ shoulder â””â”€â”€ elbow â””â”€â”€ wrist â””â”€â”€ gripper ä½¿ç”¨ TF2 å¯ä»¥ï¼š\nè¨ˆç®—æœ«ç«¯åŸ·è¡Œå™¨çš„ä½ç½®å’Œå§¿æ…‹ é€²è¡Œé‹å‹•å­¸å’Œé€†é‹å‹•å­¸è¨ˆç®— å¯¦ç¾ç²¾ç¢ºçš„æŠ“å–å’Œæ”¾ç½®ä»»å‹™ å°ˆæ¡ˆæ¶æ§‹ #\r1. æª”æ¡ˆçµæ§‹ #\rtf2_tutorial/ â”œâ”€â”€ CMakeLists.txt # æ§‹å»ºé…ç½®æ–‡ä»¶ â”œâ”€â”€ package.xml # åŒ…é…ç½®æ–‡ä»¶ â””â”€â”€ src/ â”œâ”€â”€ tf_publisher.cpp # TF2 ç™¼å¸ƒè€…ç¯€é»å¯¦ç¾ â””â”€â”€ tf_listener.cpp # TF2 ç›£è½è€…ç¯€é»å¯¦ç¾ 2. å®Œæ•´ç¨‹å¼ç¢¼å¯¦ç¾ #\r2.1 TF2 ç™¼å¸ƒè€…ç¨‹å¼ç¢¼ (tf_publisher.cpp) #\r#include \u0026lt;rclcpp/rclcpp.hpp\u0026gt; #include \u0026lt;tf2_ros/static_transform_broadcaster.h\u0026gt; #include \u0026lt;geometry_msgs/msg/transform_stamped.hpp\u0026gt; #include \u0026lt;tf2/LinearMath/Quaternion.h\u0026gt; class TFPublisher : public rclcpp::Node { private: std::shared_ptr\u0026lt;tf2_ros::StaticTransformBroadcaster\u0026gt; tf_broadcaster_; public: TFPublisher() : Node(\u0026#34;tf_publisher\u0026#34;) { // å‰µå»º TF2 å»£æ’­å™¨ tf_broadcaster_ = std::make_shared\u0026lt;tf2_ros::StaticTransformBroadcaster\u0026gt;(this); // å‰µå»ºè½‰æ›è¨Šæ¯ geometry_msgs::msg::TransformStamped transform; transform.header.stamp = this-\u0026gt;get_clock()-\u0026gt;now(); transform.header.frame_id = \u0026#34;base_link\u0026#34;; transform.child_frame_id = \u0026#34;base_laser\u0026#34;; // è¨­ç½®å¹³ç§» transform.transform.translation.x = 0.1; transform.transform.translation.y = 0.0; transform.transform.translation.z = 0.2; // è¨­ç½®æ—‹è½‰ï¼ˆä½¿ç”¨å››å…ƒæ•¸ï¼‰ tf2::Quaternion q; q.setRPY(0.0, 0.0, 0.0); // Roll, Pitch, Yaw transform.transform.rotation.x = q.x(); transform.transform.rotation.y = q.y(); transform.transform.rotation.z = q.z(); transform.transform.rotation.w = q.w(); // ç™¼å¸ƒè½‰æ› tf_broadcaster_-\u0026gt;sendTransform(transform); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Publishing static transform from %s to %s\u0026#34;, transform.header.frame_id.c_str(), transform.child_frame_id.c_str()); } }; int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;TFPublisher\u0026gt;(); rclcpp::spin(node); rclcpp::shutdown(); return 0; } 2.2 TF2 ç›£è½è€…ç¨‹å¼ç¢¼ (tf_listener.cpp) #\r#include \u0026lt;rclcpp/rclcpp.hpp\u0026gt; #include \u0026lt;tf2_ros/transform_listener.h\u0026gt; #include \u0026lt;tf2_ros/buffer.h\u0026gt; #include \u0026lt;geometry_msgs/msg/transform_stamped.hpp\u0026gt; #include \u0026lt;tf2/exceptions.h\u0026gt; class TFListener : public rclcpp::Node { private: std::unique_ptr\u0026lt;tf2_ros::Buffer\u0026gt; tf_buffer_; std::shared_ptr\u0026lt;tf2_ros::TransformListener\u0026gt; tf_listener_; rclcpp::TimerBase::SharedPtr timer_; void timer_callback() { try { geometry_msgs::msg::TransformStamped transform = tf_buffer_-\u0026gt;lookupTransform(\u0026#34;base_link\u0026#34;, \u0026#34;base_laser\u0026#34;, tf2::TimePointZero); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Transform from %s to %s: Translation [%f, %f, %f], Rotation [%f, %f, %f, %f]\u0026#34;, transform.header.frame_id.c_str(), transform.child_frame_id.c_str(), transform.transform.translation.x, transform.transform.translation.y, transform.transform.translation.z, transform.transform.rotation.x, transform.transform.rotation.y, transform.transform.rotation.z, transform.transform.rotation.w); } catch (const tf2::TransformException \u0026amp; ex) { RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Could not transform: %s\u0026#34;, ex.what()); } } public: TFListener() : Node(\u0026#34;tf_listener\u0026#34;) { // å‰µå»º TF2 ç·©è¡å€å’Œç›£è½å™¨ tf_buffer_ = std::make_unique\u0026lt;tf2_ros::Buffer\u0026gt;(this-\u0026gt;get_clock()); tf_listener_ = std::make_shared\u0026lt;tf2_ros::TransformListener\u0026gt;(*tf_buffer_); // å‰µå»ºå®šæ™‚å™¨ï¼Œæ¯ç§’æŸ¥è©¢ä¸€æ¬¡è½‰æ› timer_ = this-\u0026gt;create_wall_timer( std::chrono::seconds(1), std::bind(\u0026amp;TFListener::timer_callback, this)); } }; int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;TFListener\u0026gt;(); rclcpp::spin(node); rclcpp::shutdown(); return 0; } 3. é…ç½®æ–‡ä»¶èªªæ˜ #\r3.1 CMakeLists.txt #\rcmake_minimum_required(VERSION 3.8) project(tf2_tutorial) if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES \u0026#34;Clang\u0026#34;) add_compile_options(-Wall -Wextra -Wpedantic) endif() find_package(ament_cmake REQUIRED) find_package(rclcpp REQUIRED) find_package(tf2 REQUIRED) find_package(tf2_ros REQUIRED) find_package(geometry_msgs REQUIRED) # æ·»åŠ ç™¼å¸ƒè€…ç¯€é» add_executable(tf_publisher src/tf_publisher.cpp) ament_target_dependencies(tf_publisher rclcpp tf2 tf2_ros geometry_msgs ) # æ·»åŠ ç›£è½è€…ç¯€é» add_executable(tf_listener src/tf_listener.cpp) ament_target_dependencies(tf_listener rclcpp tf2 tf2_ros geometry_msgs ) install(TARGETS tf_publisher tf_listener DESTINATION lib/${PROJECT_NAME} ) ament_package() 3.2 package.xml #\r\u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;?xml-model href=\u0026#34;http://download.ros.org/schema/package_format3.xsd\u0026#34; schematypens=\u0026#34;http://www.w3.org/2001/XMLSchema\u0026#34;?\u0026gt; \u0026lt;package format=\u0026#34;3\u0026#34;\u0026gt; \u0026lt;name\u0026gt;tf2_tutorial\u0026lt;/name\u0026gt; \u0026lt;version\u0026gt;0.0.1\u0026lt;/version\u0026gt; \u0026lt;description\u0026gt;ROS2 TF2 æ•™å­¸ç¯„ä¾‹\u0026lt;/description\u0026gt; \u0026lt;maintainer email=\u0026#34;your@email.com\u0026#34;\u0026gt;Your Name\u0026lt;/maintainer\u0026gt; \u0026lt;license\u0026gt;Apache License 2.0\u0026lt;/license\u0026gt; \u0026lt;buildtool_depend\u0026gt;ament_cmake\u0026lt;/buildtool_depend\u0026gt; \u0026lt;depend\u0026gt;rclcpp\u0026lt;/depend\u0026gt; \u0026lt;depend\u0026gt;tf2\u0026lt;/depend\u0026gt; \u0026lt;depend\u0026gt;tf2_ros\u0026lt;/depend\u0026gt; \u0026lt;depend\u0026gt;geometry_msgs\u0026lt;/depend\u0026gt; \u0026lt;test_depend\u0026gt;ament_lint_auto\u0026lt;/test_depend\u0026gt; \u0026lt;test_depend\u0026gt;ament_lint_common\u0026lt;/test_depend\u0026gt; \u0026lt;export\u0026gt; \u0026lt;build_type\u0026gt;ament_cmake\u0026lt;/build_type\u0026gt; \u0026lt;/export\u0026gt; \u0026lt;/package\u0026gt; åŸ·è¡Œæ–¹å¼ #\rç·¨è­¯å°ˆæ¡ˆ cd ros2_ws colcon build --packages-select tf2_tutorial åŸ·è¡Œç¯€é» # çµ‚ç«¯æ©Ÿ 1ï¼šåŸ·è¡Œç™¼å¸ƒè€…ç¯€é» ros2 run tf2_tutorial tf_publisher # çµ‚ç«¯æ©Ÿ 2ï¼šåŸ·è¡Œç›£è½è€…ç¯€é» ros2 run tf2_tutorial tf_listener TF2 å¸¸ç”¨æŒ‡ä»¤ #\ræŸ¥çœ‹ç•¶å‰çš„è½‰æ›é—œä¿‚ ros2 run tf2_ros tf2_echo [source_frame] [target_frame] ç™¼å¸ƒéœæ…‹è½‰æ› ros2 run tf2_ros static_transform_publisher x y z yaw pitch roll frame_id child_frame_id æŸ¥çœ‹åº§æ¨™ç³»çµ±æ¨¹ ros2 run tf2_tools view_frames æŠ€è¡“è¦é»èªªæ˜ #\r1. TF2 åŸºæœ¬æ¦‚å¿µ #\råº§æ¨™ç³»çµ± (Frames)ï¼šæ¯å€‹åº§æ¨™ç³»çµ±éƒ½æœ‰å”¯ä¸€çš„åç¨± è½‰æ› (Transforms)ï¼šå®šç¾©åº§æ¨™ç³»çµ±ä¹‹é–“çš„ç›¸å°é—œä¿‚ å»£æ’­å™¨ (Broadcaster)ï¼šç™¼å¸ƒåº§æ¨™è½‰æ›ä¿¡æ¯ ç›£è½å™¨ (Listener)ï¼šæ¥æ”¶å’ŒæŸ¥è©¢åº§æ¨™è½‰æ› 2. åº§æ¨™è½‰æ›è¡¨ç¤º #\rå¹³ç§» (Translation)ï¼šx, y, z ä¸‰ç¶­ä½ç½® æ—‹è½‰ (Rotation)ï¼š å››å…ƒæ•¸ (Quaternion)ï¼šx, y, z, w æ­æ‹‰è§’ (Euler Angles)ï¼šroll, pitch, yaw 3. é‡è¦åŠŸèƒ½ #\réœæ…‹è½‰æ›ï¼šå›ºå®šä¸è®Šçš„åº§æ¨™é—œä¿‚ å‹•æ…‹è½‰æ›ï¼šéš¨æ™‚é–“è®ŠåŒ–çš„åº§æ¨™é—œä¿‚ è½‰æ›æŸ¥è©¢ï¼šç²å–ä»»æ„å…©å€‹åº§æ¨™ç³»çµ±é–“çš„é—œä¿‚ æ™‚é–“æˆ³è¨˜ï¼šç¢ºä¿è½‰æ›çš„æ™‚æ•ˆæ€§ å¸¸è¦‹å•é¡Œè§£æ±º #\ræ‰¾ä¸åˆ°è½‰æ›é—œä¿‚ æª¢æŸ¥åº§æ¨™ç³»çµ±åç¨±æ˜¯å¦æ­£ç¢º ç¢ºèªè½‰æ›æ˜¯å¦å·²è¢«ç™¼å¸ƒ æª¢æŸ¥æ™‚é–“æˆ³è¨˜æ˜¯å¦æœ‰æ•ˆ è½‰æ›å»¶é²å•é¡Œ èª¿æ•´ç·©è¡å€å¤§å° æª¢æŸ¥ç³»çµ±æ™‚é–“åŒæ­¥ ä½¿ç”¨æœ€æ–°çš„è½‰æ›æ•¸æ“š åº§æ¨™ç³»çµ±å‘½åè¡çª ä½¿ç”¨æ˜ç¢ºçš„å‘½åè¦ç¯„ é¿å…é‡è¤‡çš„åº§æ¨™ç³»çµ±åç¨± æª¢æŸ¥å‘½åç©ºé–“è¨­ç½® åƒè€ƒè³‡æº #\rROS2 TF2 å®˜æ–¹æ–‡æª” TF2 API æ–‡æª” ROS2 åº§æ¨™è½‰æ›æœ€ä½³å¯¦è¸ çµèª #\rTF2 æ˜¯ ROS2 ä¸­éå¸¸é‡è¦çš„ä¸€å€‹åŠŸèƒ½ï¼Œå®ƒæä¾›äº†éˆæ´»ä¸”å¼·å¤§çš„åº§æ¨™è½‰æ›ç®¡ç†ç³»çµ±ã€‚é€šéæœ¬æ•™å­¸ï¼Œæˆ‘å€‘å­¸ç¿’äº†å¦‚ä½•ç™¼å¸ƒå’Œç›£è½åº§æ¨™è½‰æ›ï¼Œä»¥åŠå¦‚ä½•åœ¨ç¨‹å¼ä¸­ä½¿ç”¨ TF2 çš„å„ç¨®åŠŸèƒ½ã€‚é€™äº›çŸ¥è­˜å°æ–¼é–‹ç™¼æ©Ÿå™¨äººæ‡‰ç”¨æ˜¯éå¸¸é‡è¦çš„åŸºç¤ã€‚å¸Œæœ›é€™ç¯‡æ•™å­¸èƒ½å¹«åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ ROS2 çš„ TF2 ç³»çµ±ã€‚\n","date":"23 February 2025","externalUrl":null,"permalink":"/posts/tf_basics/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ¢ ROS2 TF2 åº§æ¨™è½‰æ›åŸºç¤æ•™å­¸ \r\n    \u003cdiv id=\"-ros2-tf2-%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E5%9F%BA%E7%A4%8E%E6%95%99%E5%AD%B8\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-tf2-%E5%BA%A7%E6%A8%99%E8%BD%89%E6%8F%9B%E5%9F%BA%E7%A4%8E%E6%95%99%E5%AD%B8\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \r\n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨ ROS2 æ©Ÿå™¨äººç³»çµ±ä¸­ï¼ŒTF2 (Transform Framework 2) æ˜¯ä¸€å€‹éå¸¸é‡è¦çš„åŠŸèƒ½ï¼Œå®ƒç”¨æ–¼ç®¡ç†å’Œè¿½è¹¤æ©Ÿå™¨äººç³»çµ±ä¸­ä¸åŒåº§æ¨™ç³»çµ±ä¹‹é–“çš„é—œä¿‚ã€‚æœ¬æ–‡å°‡è©³ç´°ä»‹ç´¹ TF2 çš„åŸºæœ¬æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬å¦‚ä½•ç™¼å¸ƒåº§æ¨™è½‰æ›ã€æŸ¥è©¢åº§æ¨™é—œä¿‚ç­‰ã€‚\u003c/p\u003e","title":"ğŸ¢ ROS2 TF2 åº§æ¨™è½‰æ›åŸºç¤æ•™å­¸","type":"posts"},{"content":"","date":"23 February 2025","externalUrl":null,"permalink":"/tags/ros2/","section":"Tags","summary":"","title":"ROS2","type":"tags"},{"content":"","date":"23 February 2025","externalUrl":null,"permalink":"/categories/ros2/","section":"Categories","summary":"","title":"ROS2","type":"categories"},{"content":"","date":"23 February 2025","externalUrl":null,"permalink":"/tags/tf2/","section":"Tags","summary":"","title":"TF2","type":"tags"},{"content":"ğŸš§ æœ‰ä¸€äº›æƒ³æ³•ï¼Œä½†é‚„æ²’æœ‰å¯¦ä½œï¼Œç´°ç¯€ä¹Ÿæœªå®Œå–„ã€‚\nè¨ˆç•« #\rå¯¦ä½œ #\r","date":"18 February 2025","externalUrl":null,"permalink":"/projects/","section":"TienYao@Tech","summary":"\u003cp\u003eğŸš§ æœ‰ä¸€äº›æƒ³æ³•ï¼Œä½†é‚„æ²’æœ‰å¯¦ä½œï¼Œç´°ç¯€ä¹Ÿæœªå®Œå–„ã€‚\u003c/p\u003e\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eè¨ˆç•« \r\n    \u003cdiv id=\"%E8%A8%88%E7%95%AB\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E8%A8%88%E7%95%AB\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cul\u003e\n\u003cli\u003e\u003cinput disabled=\"\" type=\"checkbox\"\u003e \u003c/li\u003e\n\u003c/ul\u003e\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå¯¦ä½œ \r\n    \u003cdiv id=\"%E5%AF%A6%E4%BD%9C\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%AF%A6%E4%BD%9C\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cul\u003e\n\u003cli\u003e\u003cinput disabled=\"\" type=\"checkbox\"\u003e \u003c/li\u003e\n\u003c/ul\u003e","title":"Projects","type":"page"},{"content":"","date":"18 February 2025","externalUrl":null,"permalink":"/tags/freertos/","section":"Tags","summary":"","title":"FreeRTOS","type":"tags"},{"content":"","date":"18 February 2025","externalUrl":null,"permalink":"/tags/rtos/","section":"Tags","summary":"","title":"RTOS","type":"tags"},{"content":"","date":"18 February 2025","externalUrl":null,"permalink":"/tags/zynq/","section":"Tags","summary":"","title":"ZYNQ","type":"tags"},{"content":"","date":"18 February 2025","externalUrl":null,"permalink":"/categories/zynq/","section":"Categories","summary":"","title":"ZYNQ","type":"categories"},{"content":"\rğŸ¤ FreeRTOS Task é€šè¨Šæ–¹æ³• #\r1. Queue é€šè¨Šæ©Ÿåˆ¶ #\r1.1 åŸºæœ¬æ¦‚å¿µ #\rQueue æ˜¯ FreeRTOS ä¸­æœ€å¸¸ç”¨çš„é€šè¨Šæ©Ÿåˆ¶ï¼Œé©åˆç”¨æ–¼å‚³é€è³‡æ–™ã€‚\n1.2 ç¨‹å¼ç¯„ä¾‹ #\r#include \u0026#34;FreeRTOS.h\u0026#34; #include \u0026#34;task.h\u0026#34; #include \u0026#34;queue.h\u0026#34; #include \u0026#34;xil_printf.h\u0026#34; // For xil_printf QueueHandle_t dataQueue; void vSenderTask(void *pvParameters) { int32_t valueToSend = 0; while(1) { xQueueSend(dataQueue, \u0026amp;valueToSend, portMAX_DELAY); valueToSend++; vTaskDelay(pdMS_TO_TICKS(1000)); } } void vReceiverTask(void *pvParameters) { int32_t receivedValue; while(1) { if(xQueueReceive(dataQueue, \u0026amp;receivedValue, portMAX_DELAY) == pdPASS) { xil_printf(\u0026#34;æ¥æ”¶åˆ°çš„å€¼: %d\\r\\n\u0026#34;, receivedValue); } } } int main(void) { dataQueue = xQueueCreate(10, sizeof(int32_t)); if(dataQueue != NULL) { xTaskCreate(vSenderTask, \u0026#34;Sender\u0026#34;, configMINIMAL_STACK_SIZE, NULL, 1, NULL); xTaskCreate(vReceiverTask, \u0026#34;Receiver\u0026#34;, configMINIMAL_STACK_SIZE, NULL, 1, NULL); vTaskStartScheduler(); } while(1); } 2. Semaphore é€šè¨Šæ©Ÿåˆ¶ #\r2.1 Binary Semaphore #\ré©ç”¨æ–¼ç°¡å–®çš„åŒæ­¥å’Œäº‹ä»¶é€šçŸ¥ã€‚\n#include \u0026#34;FreeRTOS.h\u0026#34; #include \u0026#34;task.h\u0026#34; #include \u0026#34;semphr.h\u0026#34; #include \u0026#34;xil_printf.h\u0026#34; // For xil_printf SemaphoreHandle_t binarySemaphore; void vTask1(void *pvParameters) { while(1) { xil_printf(\u0026#34;Task1 å®Œæˆæ“ä½œ\\r\\n\u0026#34;); xSemaphoreGive(binarySemaphore); vTaskDelay(pdMS_TO_TICKS(1000)); } } void vTask2(void *pvParameters) { while(1) { if(xSemaphoreTake(binarySemaphore, portMAX_DELAY) == pdTRUE) { xil_printf(\u0026#34;Task2 æ”¶åˆ°é€šçŸ¥ä¸¦åŸ·è¡Œ\\r\\n\u0026#34;); } } } int main(void) { binarySemaphore = xSemaphoreCreateBinary(); if(binarySemaphore != NULL) { xTaskCreate(vTask1, \u0026#34;Task1\u0026#34;, configMINIMAL_STACK_SIZE, NULL, 1, NULL); xTaskCreate(vTask2, \u0026#34;Task2\u0026#34;, configMINIMAL_STACK_SIZE, NULL, 1, NULL); vTaskStartScheduler(); } while(1); } 3. Mutex äº’æ–¥æ©Ÿåˆ¶ #\r3.1 ä¿è­·å…±äº«è³‡æº #\rMutex ä¸»è¦ç”¨æ–¼ä¿è­·å…±äº«è³‡æºï¼Œé¿å…å¤šå€‹ task åŒæ™‚å­˜å–ã€‚\n#include \u0026#34;FreeRTOS.h\u0026#34; #include \u0026#34;task.h\u0026#34; #include \u0026#34;semphr.h\u0026#34; #include \u0026#34;xil_printf.h\u0026#34; // For xil_printf SemaphoreHandle_t mutexHandle; int shared_resource = 0; void vTask1(void *pvParameters) { while(1) { if(xSemaphoreTake(mutexHandle, portMAX_DELAY) == pdTRUE) { shared_resource++; xil_printf(\u0026#34;Task1: shared_resource = %d\\r\\n\u0026#34;, shared_resource); xSemaphoreGive(mutexHandle); } vTaskDelay(pdMS_TO_TICKS(1000)); } } int main(void) { mutexHandle = xSemaphoreCreateMutex(); if(mutexHandle != NULL) { xTaskCreate(vTask1, \u0026#34;Task1\u0026#34;, configMINIMAL_STACK_SIZE, NULL, 1, NULL); vTaskStartScheduler(); } while(1); } 4. Event Groups äº‹ä»¶çµ„ #\r4.1 å¤šäº‹ä»¶åŒæ­¥ #\ré©åˆéœ€è¦ç­‰å¾…å¤šå€‹æ¢ä»¶åŒæ™‚æˆç«‹çš„å ´æ™¯ã€‚\n#include \u0026#34;FreeRTOS.h\u0026#34; #include \u0026#34;task.h\u0026#34; #include \u0026#34;event_groups.h\u0026#34; #include \u0026#34;xil_printf.h\u0026#34; // For xil_printf #define EVENT_BIT_0 (1 \u0026lt;\u0026lt; 0) #define EVENT_BIT_1 (1 \u0026lt;\u0026lt; 1) #define ALL_EVENTS (EVENT_BIT_0 | EVENT_BIT_1) EventGroupHandle_t eventGroup; void vTask3(void *pvParameters) { EventBits_t bits; while(1) { bits = xEventGroupWaitBits(eventGroup, ALL_EVENTS, pdTRUE, pdTRUE, portMAX_DELAY); if((bits \u0026amp; ALL_EVENTS) == ALL_EVENTS) { xil_printf(\u0026#34;Task3 æ”¶åˆ°æ‰€æœ‰äº‹ä»¶\\r\\n\u0026#34;); } } } int main(void) { eventGroup = xEventGroupCreate(); if(eventGroup != NULL) { xTaskCreate(vTask3, \u0026#34;Task3\u0026#34;, configMINIMAL_STACK_SIZE, NULL, 1, NULL); vTaskStartScheduler(); } while(1); } 5. Task Notification #\r5.1 è¼•é‡ç´šé€šè¨Š #\ræœ€æ–°ä¸”æ•ˆèƒ½æœ€ä½³çš„é€šè¨Šæ–¹å¼ã€‚\n#include \u0026#34;FreeRTOS.h\u0026#34; #include \u0026#34;task.h\u0026#34; #include \u0026#34;xil_printf.h\u0026#34; // For xil_printf TaskHandle_t xTask2Handle = NULL; void vTask1(void *pvParameters) { while(1) { xTaskNotify(xTask2Handle, 0x01, eSetBits); xil_printf(\u0026#34;Task1 ç™¼é€é€šçŸ¥\\r\\n\u0026#34;); vTaskDelay(pdMS_TO_TICKS(1000)); } } void vTask2(void *pvParameters) { uint32_t ulNotificationValue; while(1) { if(xTaskNotifyWait(0x00, 0xFFFFFFFF, \u0026amp;ulNotificationValue, portMAX_DELAY) == pdTRUE) { xil_printf(\u0026#34;Task2 æ”¶åˆ°é€šçŸ¥\\r\\n\u0026#34;); } } } int main(void) { xTaskCreate(vTask1, \u0026#34;Task1\u0026#34;, configMINIMAL_STACK_SIZE, NULL, 1, NULL); xTaskCreate(vTask2, \u0026#34;Task2\u0026#34;, configMINIMAL_STACK_SIZE, NULL, 1, \u0026amp;xTask2Handle); vTaskStartScheduler(); while(1); } 6. ä½¿ç”¨å»ºè­° #\r6.1 é¸æ“‡åˆé©çš„é€šè¨Šæ–¹å¼ #\rç°¡å–®é€šè¨Šï¼šå„ªå…ˆä½¿ç”¨ Task Notification è³‡æ–™å‚³è¼¸ï¼šä½¿ç”¨ Queue è³‡æºä¿è­·ï¼šä½¿ç”¨ Mutex å¤šäº‹ä»¶åŒæ­¥ï¼šä½¿ç”¨ Event Groups 6.2 æ•ˆèƒ½è€ƒé‡ #\rTask Notification æ•ˆèƒ½æœ€å¥½ Queue é©åˆè³‡æ–™å‚³è¼¸ä½†é–‹éŠ·è¼ƒå¤§ Semaphore å’Œ Mutex é©åˆåŒæ­¥å ´æ™¯ ğŸ’¡ æç¤ºï¼š\nåœ¨ä½¿ç”¨é€™äº›æ©Ÿåˆ¶æ™‚ï¼Œè¦æ³¨æ„é¿å…æ­»é– æ­£ç¢ºè¨­å®šä»»å‹™å„ªå…ˆç´š è¬¹æ…ä½¿ç”¨é˜»å¡æ™‚é–“ å»ºè­°åœ¨é–‹ç™¼åˆæœŸå°±è¦åŠƒå¥½é€šè¨Šæ¶æ§‹ ","date":"18 February 2025","externalUrl":null,"permalink":"/posts/freertos_task_communication/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ¤ FreeRTOS Task é€šè¨Šæ–¹æ³• \r\n    \u003cdiv id=\"-freertos-task-%E9%80%9A%E8%A8%8A%E6%96%B9%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-freertos-task-%E9%80%9A%E8%A8%8A%E6%96%B9%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003e1. Queue é€šè¨Šæ©Ÿåˆ¶ \r\n    \u003cdiv id=\"1-queue-%E9%80%9A%E8%A8%8A%E6%A9%9F%E5%88%B6\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#1-queue-%E9%80%9A%E8%A8%8A%E6%A9%9F%E5%88%B6\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003e1.1 åŸºæœ¬æ¦‚å¿µ \r\n    \u003cdiv id=\"11-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#11-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cp\u003eQueue æ˜¯ FreeRTOS ä¸­æœ€å¸¸ç”¨çš„é€šè¨Šæ©Ÿåˆ¶ï¼Œé©åˆç”¨æ–¼å‚³é€è³‡æ–™ã€‚\u003c/p\u003e","title":"ğŸ¤ FreeRTOS Task é€šè¨Šæ–¹æ³•","type":"posts"},{"content":"\rğŸ› ï¸ åœ¨ Xilinx SDK 2018.3 ä¸­ä½¿ç”¨ FreeRTOS é–‹ç™¼å¤šå·¥ç³»çµ± ğŸ’» #\rå°ˆæ¡ˆç°¡ä»‹ #\ré€™ç¯‡æ–‡ç« è¦è·Ÿå¤§å®¶åˆ†äº«å¦‚ä½•åœ¨ Xilinx Software Development Kit (SDK) 2018.3 ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨ FreeRTOS ä¾†é–‹ç™¼ä¸€å€‹å¤šå·¥ç³»çµ±ã€‚æˆ‘å€‘æœƒå¯¦ä½œä»»å‹™ç®¡ç†ã€UART ä¸­æ–·è™•ç†ä»¥åŠä»»å‹™é–“çš„é€šè¨Šæ©Ÿåˆ¶ã€‚\né–‹ç™¼ç’°å¢ƒ #\rXilinx SDK 2018.3 FreeRTOS å³æ™‚ä½œæ¥­ç³»çµ± é–‹ç™¼æ¿ï¼šXilinx Zynq-7000 ç³»åˆ— ç³»çµ±æ¶æ§‹ #\rç¨‹å¼è™•ç†æµç¨‹ #\rgraph TD\rA[ç³»çµ±é–‹æ©Ÿ] --\u0026gt; B[åˆå§‹åŒ–éšæ®µ]\rB --\u0026gt; C1[å»ºç«‹UARTä½‡åˆ—]\rB --\u0026gt; C2[å»ºç«‹UARTè™ŸèªŒ]\rB --\u0026gt; C3[åˆå§‹åŒ–UARTè£ç½®]\rC1 --\u0026gt; D[å»ºç«‹èµ·å§‹ä»»å‹™]\rC2 --\u0026gt; D\rC3 --\u0026gt; D\rD --\u0026gt; E[å•Ÿå‹•FreeRTOSæ’ç¨‹å™¨]\rE --\u0026gt; F[èµ·å§‹ä»»å‹™åŸ·è¡Œ]\rF --\u0026gt; G1[è¨­å®šUARTä¸­æ–·]\rF --\u0026gt; G2[å»ºç«‹UARTä¸­æ–·è™•ç†ä»»å‹™]\rF --\u0026gt; G3[å»ºç«‹Hiåˆ—å°ä»»å‹™]\rF --\u0026gt; G4[å»ºç«‹Helloåˆ—å°ä»»å‹™]\rG1 --\u0026gt; H[åˆªé™¤èµ·å§‹ä»»å‹™]\rG2 --\u0026gt; H\rG3 --\u0026gt; H\rG4 --\u0026gt; H\rH --\u0026gt; I[å¤šå·¥ä»»å‹™ä¸¦è¡ŒåŸ·è¡Œ]\rI --\u0026gt; J1[UARTä¸­æ–·è™•ç†]\rI --\u0026gt; J2[Hiä»»å‹™åŸ·è¡Œ]\rI --\u0026gt; J3[Helloä»»å‹™åŸ·è¡Œ]\rJ1 --\u0026gt; K[æ¥æ”¶æŒ‡ä»¤è™•ç†]\rK --\u0026gt; L1[ä»»å‹™æ§åˆ¶æŒ‡ä»¤]\rK --\u0026gt; L2[è¨ˆæ•¸å™¨é‡ç½®æŒ‡ä»¤]\rL1 --\u0026gt; I\rL2 --\u0026gt; I ä»»å‹™æ¶æ§‹ #\rç³»çµ±åŒ…å«ä»¥ä¸‹å¹¾å€‹ä¸»è¦ä»»å‹™ï¼š\nèµ·å§‹ä»»å‹™ï¼ˆå„ªå…ˆæ¬Šï¼š1ï¼‰ UARTä¸­æ–·è™•ç†ä»»å‹™ï¼ˆå„ªå…ˆæ¬Šï¼š2ï¼‰ Hiåˆ—å°ä»»å‹™ï¼ˆå„ªå…ˆæ¬Šï¼š2ï¼‰ Helloåˆ—å°ä»»å‹™ï¼ˆå„ªå…ˆæ¬Šï¼š2ï¼‰ é€šè¨Šæ©Ÿåˆ¶ #\rä½¿ç”¨ä½‡åˆ—ï¼ˆQueueï¼‰è™•ç† UART æ¥æ”¶çš„è³‡æ–™ ä½¿ç”¨è™ŸèªŒï¼ˆSemaphoreï¼‰è™•ç† UART å‚³é€åŒæ­¥ ä»»å‹™å„ªå…ˆæ¬Šç®¡ç† è™•ç†æµç¨‹èªªæ˜ #\råˆå§‹åŒ–éšæ®µ\nå»ºç«‹ UART é€šè¨Šç”¨çš„ä½‡åˆ—ï¼ˆ32 ä½å…ƒçµ„ï¼‰å’Œè™ŸèªŒ åˆå§‹åŒ– UART è£ç½®ï¼ˆé®‘ç‡ 115200ï¼‰ å»ºç«‹èµ·å§‹ä»»å‹™ï¼ˆå„ªå…ˆæ¬Š 1ï¼‰ ä»»å‹™å»ºç«‹éšæ®µ\nèµ·å§‹ä»»å‹™è² è²¬å»ºç«‹å…¶ä»–ä»»å‹™ è¨­å®š UART ä¸­æ–·è™•ç†æ©Ÿåˆ¶ å»ºç«‹ä¸‰å€‹å·¥ä½œä»»å‹™ï¼ˆå„ªå…ˆæ¬Š 2ï¼‰ å®Œæˆå¾Œè‡ªè¡Œåˆªé™¤ åŸ·è¡Œéšæ®µ\nUART ä¸­æ–·è™•ç†ä»»å‹™ç­‰å¾…æ¥æ”¶æŒ‡ä»¤ Hi ä»»å‹™æ¯ 500ms åŸ·è¡Œä¸€æ¬¡ Hello ä»»å‹™æ¯ 1200ms åŸ·è¡Œä¸€æ¬¡ é€é UART æŒ‡ä»¤å¯å‹•æ…‹æ§åˆ¶ä»»å‹™ æŒ‡ä»¤è™•ç†æµç¨‹\næ¥æ”¶å­—å…ƒå­˜å…¥æŒ‡ä»¤ç·©è¡å€ é‡åˆ°æ›è¡Œå­—å…ƒå°±è§£æåŸ·è¡ŒæŒ‡ä»¤ æ”¯æ´ä»»å‹™æš«åœ/ç¹¼çºŒ/è¨ˆæ•¸å™¨é‡ç½®ç­‰æ“ä½œ å®Œæ•´ç¨‹å¼ç¢¼å¯¦ç¾ #\r1. ä¸»ç¨‹å¼ (main_cpu0.c) #\r/******************************************************************************* * æª”æ¡ˆåç¨±: main_cpu0.c * èªªæ˜: ä¸»ç¨‹å¼é€²å…¥é»ï¼Œè² è²¬åˆå§‹åŒ–UARTåŠå»ºç«‹FreeRTOSå·¥ä½œä»»å‹™ * ä½œè€…: TienYao *******************************************************************************/ #include \u0026lt;stdio.h\u0026gt; /* FreeRTOSç›¸é—œæ¨™é ­æª” */ #include \u0026#34;FreeRTOS.h\u0026#34; #include \u0026#34;task.h\u0026#34; #include \u0026#34;queue.h\u0026#34; #include \u0026#34;semphr.h\u0026#34; /* Xilinxç›¸é—œæ¨™é ­æª” */ #include \u0026#34;xparameters.h\u0026#34; #include \u0026#34;xuartps.h\u0026#34; #include \u0026#34;xscugic.h\u0026#34; /* ä½¿ç”¨è€…è‡ªè¨‚æ¨™é ­æª” */ #include \u0026#34;user_task.h\u0026#34; #include \u0026#34;uart_intr.h\u0026#34; int main() { /* è®Šæ•¸å®£å‘Š */ int status; XUartPs_Config *uartPsConfig; /* å»ºç«‹UARTé€šè¨Šç”¨çš„ä½‡åˆ—å’Œè™ŸèªŒ */ xUartRxQueue = xQueueCreate(32, sizeof(uint8_t)); xUartTxSemaphore = xSemaphoreCreateBinary(); /* æª¢æŸ¥ä½‡åˆ—å’Œè™ŸèªŒæ˜¯å¦å»ºç«‹æˆåŠŸ */ if (xUartRxQueue == NULL || xUartTxSemaphore == NULL) { return XST_FAILURE; } /* åˆå§‹åŒ–UART */ status = uart_init(uartPsConfig); if(status != XST_SUCCESS) { printf(\u0026#34;UARTåˆå§‹åŒ–å¤±æ•—\\n\u0026#34;); return XST_FAILURE; } /* å»ºç«‹èµ·å§‹ä»»å‹™ */ xTaskCreate( (TaskFunction_t)start_task, (const char*)\u0026#34;start_task\u0026#34;, (uint16_t)START_STK_SIZE, (void*)NULL, (UBaseType_t)START_TASK_PRIO, (TaskHandle_t*)\u0026amp;StartTask_Handler ); /* å•Ÿå‹•FreeRTOSæ’ç¨‹å™¨ */ vTaskStartScheduler(); /* æ°¸ä¹…è¿´åœˆ */ while(1); return 0; } 2. UARTä¸­æ–·è™•ç† (uart_intr.h) #\r/******************************************************************************* * æª”æ¡ˆåç¨±: uart_intr.h * èªªæ˜: UARTä¸­æ–·ç›¸é—œå®šç¾©èˆ‡å‡½å¼å®£å‘Š * ä½œè€…: TienYao *******************************************************************************/ #ifndef SRC_UART_INTR_H_ #define SRC_UART_INTR_H_ #include \u0026#34;xparameters.h\u0026#34; #include \u0026#34;xuartps.h\u0026#34; #include \u0026#34;xscugic.h\u0026#34; /* UARTèˆ‡ä¸­æ–·æ§åˆ¶å™¨è£ç½®IDå®šç¾© */ #define UART_0_DEVICE_ID XPAR_PS7_UART_0_DEVICE_ID #define SCUGIC_0_DEVICE_ID XPAR_PS7_SCUGIC_0_DEVICE_ID #define XUARTPS_0_INTR XPAR_XUARTPS_0_INTR /* UARTè£ç½®å¯¦é«” */ XUartPs uartPs; /* å‡½å¼åŸå‹å®£å‘Š */ int uart_init(XUartPs_Config *); #endif /* SRC_UART_INTR_H_ */ 3. UARTä¸­æ–·è™•ç†å¯¦ä½œ (uart_intr.c) #\r/******************************************************************************* * æª”æ¡ˆåç¨±: uart_intr.c * èªªæ˜: UARTä¸­æ–·åˆå§‹åŒ–èˆ‡è¨­å®š * ä½œè€…: TienYao *******************************************************************************/ #include \u0026#34;uart_intr.h\u0026#34; int uart_init(XUartPs_Config *uartPsConfig) { int status; /* æŸ¥æ‰¾ä¸¦å–å¾—UARTè£ç½®è¨­å®š */ uartPsConfig = XUartPs_LookupConfig(UART_0_DEVICE_ID); if(uartPsConfig == NULL) { return XST_FAILURE; } /* åˆå§‹åŒ–UARTè£ç½® */ status = XUartPs_CfgInitialize(\u0026amp;uartPs, uartPsConfig, uartPsConfig-\u0026gt;BaseAddress); if(status != XST_SUCCESS) { return XST_FAILURE; } /* è¨­å®šUARTé‹ä½œæ¨¡å¼ã€é®‘ç‡åŠFIFOè‡¨ç•Œå€¼ */ XUartPs_SetOptions(\u0026amp;uartPs, XUARTPS_OPER_MODE_NORMAL); XUartPs_SetBaudRate(\u0026amp;uartPs, 115200); XUartPs_SetFifoThreshold(\u0026amp;uartPs, 1); return XST_SUCCESS; } 4. ä½¿ç”¨è€…ä»»å‹™å®šç¾© (user_task.h) #\r/******************************************************************************* * æª”æ¡ˆåç¨±: user_task.h * èªªæ˜: FreeRTOSä»»å‹™ç›¸é—œå®šç¾©èˆ‡å‡½å¼å®£å‘Š * ä½œè€…: TienYao *******************************************************************************/ #ifndef SRC_USER_TASK_H_ #define SRC_USER_TASK_H_ #include \u0026#34;FreeRTOS.h\u0026#34; #include \u0026#34;task.h\u0026#34; #include \u0026#34;queue.h\u0026#34; #include \u0026#34;semphr.h\u0026#34; #include \u0026#34;xscugic.h\u0026#34; /* ä¸­æ–·æ§åˆ¶å™¨å¯¦é«” * æ­¤è®Šæ•¸ç‚ºXilinxé€šç”¨ä¸­æ–·æ§åˆ¶å™¨(GIC)çš„å¯¦é«” * externé—œéµå­—è¡¨ç¤ºæ­¤è®Šæ•¸åœ¨å…¶ä»–æª”æ¡ˆä¸­å®šç¾© * ç”¨æ–¼è™•ç†æ‰€æœ‰ç³»çµ±ä¸­æ–·ï¼ŒåŒ…å«UARTä¸­æ–· */ extern XScuGic xInterruptController; /* UARTé€šè¨Šç”¨ä½‡åˆ—å’Œè™ŸèªŒ */ QueueHandle_t xUartRxQueue; SemaphoreHandle_t xUartTxSemaphore; /* èµ·å§‹ä»»å‹™ç›¸é—œå®šç¾© */ #define START_TASK_PRIO 1 #define START_STK_SIZE 128 TaskHandle_t StartTask_Handler; void start_task(); /* UARTä¸­æ–·è™•ç†ä»»å‹™ç›¸é—œå®šç¾© */ #define UART_INT_TASK_PRIO 2 #define UART_INT_STK_SIZE 250 TaskHandle_t uart_int_task_handler; void uart_int_task(); /* Hiåˆ—å°ä»»å‹™ç›¸é—œå®šç¾© */ #define PRINT_HI_TASK_PRIO 2 #define PRINT_HI_STK_SIZE 250 TaskHandle_t print_hi_Task_handler; void print_hi_task(); /* Helloåˆ—å°ä»»å‹™ç›¸é—œå®šç¾© */ #define PRINT_HELLO_TASK_PRIO 2 #define PRINT_HELLO_STK_SIZE 250 TaskHandle_t print_hello_Task_handler; void print_hello_task(); /* UARTä¸­æ–·è™•ç†å‡½å¼ */ void uart_intr_handler(void *); #endif /* SRC_USER_TASK_H_ */ 5. ä½¿ç”¨è€…ä»»å‹™å¯¦ä½œ (user_task.c) #\r/******************************************************************************* * æª”æ¡ˆåç¨±: user_task.c * èªªæ˜: FreeRTOSä»»å‹™å¯¦ä½œï¼ŒåŒ…å«UARTä¸­æ–·è™•ç†ã€Hi/Helloåˆ—å°ä»»å‹™ç­‰ * ä½œè€…: TienYao *******************************************************************************/ #include \u0026#34;user_task.h\u0026#34; #include \u0026#34;uart_intr.h\u0026#34; #include \u0026lt;stdio.h\u0026gt; /* Hiå’ŒHelloä»»å‹™çš„è¨ˆæ•¸å™¨ */ unsigned hiLoop = 0; /* Hiä»»å‹™çš„åˆ—å°æ¬¡æ•¸è¨ˆæ•¸å™¨ */ unsigned helloLoop = 0; /* Helloä»»å‹™çš„åˆ—å°æ¬¡æ•¸è¨ˆæ•¸å™¨ */ /** * @brief UARTä¸­æ–·è™•ç†å‡½å¼ * @param call_back_ref: UARTè£ç½®æŒ‡æ¨™ * @note è™•ç†UARTæ¥æ”¶å’Œå‚³é€ä¸­æ–· */ void uart_intr_handler(void *call_back_ref) { XUartPs *UartPs = (XUartPs *)call_back_ref; uint32_t IsrStatus = XUartPs_ReadReg(UartPs-\u0026gt;Config.BaseAddress, XUARTPS_ISR_OFFSET); BaseType_t xHigherPriorityTaskWoken = pdFALSE; /* è™•ç†æ¥æ”¶ä¸­æ–· */ if (IsrStatus \u0026amp; XUARTPS_IXR_RXOVR) { uint8_t ReceivedChar = XUartPs_ReadReg(UartPs-\u0026gt;Config.BaseAddress, XUARTPS_FIFO_OFFSET); xQueueSendFromISR(xUartRxQueue, \u0026amp;ReceivedChar, \u0026amp;xHigherPriorityTaskWoken); } /* è™•ç†å‚³é€ä¸­æ–· */ if (IsrStatus \u0026amp; XUARTPS_IXR_TXEMPTY) { xSemaphoreGiveFromISR(xUartTxSemaphore, \u0026amp;xHigherPriorityTaskWoken); } /* æ¸…é™¤ä¸­æ–·ç‹€æ…‹ä¸¦æª¢æŸ¥æ˜¯å¦éœ€è¦åˆ‡æ›ä»»å‹™ */ XUartPs_WriteReg(UartPs-\u0026gt;Config.BaseAddress, XUARTPS_ISR_OFFSET, IsrStatus); portYIELD_FROM_ISR(xHigherPriorityTaskWoken); } /** * @brief UARTä¸­æ–·è™•ç†ä»»å‹™ * @param pvParameters: ä»»å‹™åƒæ•¸ï¼ˆæœªä½¿ç”¨ï¼‰ * @note è™•ç†UARTæ¥æ”¶åˆ°çš„æŒ‡ä»¤ */ void uart_int_task(void *pvParameters) { uint8_t ReceivedChar; char cmd[16]; u8 cnt = 0; while (1) { /* ç­‰å¾…æ¥æ”¶å­—å…ƒ */ if (xQueueReceive(xUartRxQueue, \u0026amp;ReceivedChar, portMAX_DELAY) == pdTRUE) { if(ReceivedChar == \u0026#39;\\r\u0026#39;) { /* æ”¶åˆ°æ›è¡Œå­—å…ƒï¼Œè¡¨ç¤ºæŒ‡ä»¤çµæŸ */ xil_printf(\u0026#34;%s\\n\u0026#34;, cmd); /* è§£æä¸¦åŸ·è¡ŒæŒ‡ä»¤ */ if(!strcmp(\u0026#34;stop_hi\u0026#34;, cmd)) { vTaskSuspend(print_hi_Task_handler); /* æš«åœHiä»»å‹™ */ } else if(!strcmp(\u0026#34;go_hi\u0026#34;, cmd)) { vTaskResume(print_hi_Task_handler); /* ç¹¼çºŒHiä»»å‹™ */ } else if(!strcmp(\u0026#34;clear_go_loop\u0026#34;, cmd)) { hiLoop = 0; /* é‡ç½®Hiè¨ˆæ•¸å™¨ */ } else if (!strcmp(\u0026#34;stop_hello\u0026#34;, cmd)) { vTaskSuspend(print_hi_Task_handler); /* æš«åœHelloä»»å‹™ */ } else if(!strcmp(\u0026#34;go_hello\u0026#34;, cmd)) { vTaskResume(print_hi_Task_handler); /* ç¹¼çºŒHelloä»»å‹™ */ } else if(!strcmp(\u0026#34;clear_hello_loop\u0026#34;, cmd)) { helloLoop = 0; /* é‡ç½®Helloè¨ˆæ•¸å™¨ */ } else { printf(\u0026#34;æœªçŸ¥æŒ‡ä»¤\\n\u0026#34;); /* æœªçŸ¥æŒ‡ä»¤ */ } cnt = 0; } else { cmd[cnt] = ReceivedChar; /* å„²å­˜æŒ‡ä»¤å­—å…ƒ */ cnt++; cmd[cnt] = \u0026#39;\\0\u0026#39;; /* å­—ä¸²çµå°¾ */ } } } } /** * @brief Hiåˆ—å°ä»»å‹™ * @note æ¯500æ¯«ç§’åˆ—å°ä¸€æ¬¡Hi */ void print_hi_task() { while(1) { vTaskDelay(500); /* å»¶é²500æ¯«ç§’ */ printf(\u0026#34;Hi æ¬¡æ•¸ %d\\n\u0026#34;, hiLoop++); /* åˆ—å°Hiå’Œè¨ˆæ•¸ */ } } /** * @brief Helloåˆ—å°ä»»å‹™ * @note æ¯1200æ¯«ç§’åˆ—å°ä¸€æ¬¡Hello */ void print_hello_task() { while(1) { vTaskDelay(1200); /* å»¶é²1200æ¯«ç§’ */ printf(\u0026#34;Hello æ¬¡æ•¸ %d\\n\u0026#34;, helloLoop++); /* åˆ—å°Helloå’Œè¨ˆæ•¸ */ } } /** * @brief èµ·å§‹ä»»å‹™ * @note åˆå§‹åŒ–ç³»çµ±ä¸¦å»ºç«‹å…¶ä»–ä»»å‹™ */ void start_task() { taskENTER_CRITICAL(); /* é€²å…¥è‡¨ç•Œå€ */ /* è¨­å®šUARTä¸­æ–· */ XScuGic_Connect(\u0026amp;xInterruptController, XUARTPS_0_INTR, (Xil_InterruptHandler) uart_intr_handler, (void *)\u0026amp;uartPs); XUartPs_SetInterruptMask(\u0026amp;uartPs, XUARTPS_IXR_RXOVR); Xil_ExceptionInit(); XScuGic_Enable(\u0026amp;xInterruptController, XUARTPS_0_INTR); /* å»ºç«‹UARTä¸­æ–·è™•ç†ä»»å‹™ */ xTaskCreate( (TaskFunction_t)uart_int_task, (const char*)\u0026#34;uart_int_task\u0026#34;, (uint16_t)UART_INT_STK_SIZE, (void*)NULL, (UBaseType_t)UART_INT_TASK_PRIO, (TaskHandle_t*)\u0026amp;uart_int_task_handler ); /* å»ºç«‹Hiåˆ—å°ä»»å‹™ */ xTaskCreate( (TaskFunction_t)print_hi_task, (const char*)\u0026#34;print_hi_task\u0026#34;, (uint16_t)PRINT_HI_STK_SIZE, (void*)NULL, (UBaseType_t)PRINT_HI_TASK_PRIO, (TaskHandle_t*)\u0026amp;print_hi_Task_handler ); /* å»ºç«‹Helloåˆ—å°ä»»å‹™ */ xTaskCreate( (TaskFunction_t)print_hello_task, (const char*)\u0026#34;print_hello_task\u0026#34;, (uint16_t)PRINT_HELLO_STK_SIZE, (void*)NULL, (UBaseType_t)PRINT_HELLO_TASK_PRIO, (TaskHandle_t*)\u0026amp;print_hello_Task_handler ); vTaskDelete(StartTask_Handler); /* åˆªé™¤èµ·å§‹ä»»å‹™ */ taskEXIT_CRITICAL(); /* é€€å‡ºè‡¨ç•Œå€ */ } ç‰¹è‰²åŠŸèƒ½ #\r1. å‹•æ…‹ä»»å‹™æ§åˆ¶ #\rå¯ä»¥é€é UART æŒ‡ä»¤å‹•æ…‹æ§åˆ¶ä»»å‹™çš„æš«åœå’Œç¹¼çºŒ æ”¯æ´è¨ˆæ•¸å™¨é‡ç½®åŠŸèƒ½ ä»»å‹™å„ªå…ˆæ¬Šå¯èª¿æ•´ 2. ä¸­æ–·è™•ç†æ©Ÿåˆ¶ #\rä½¿ç”¨ä½‡åˆ—è™•ç† UART æ¥æ”¶ä¸­æ–· ä½¿ç”¨è™ŸèªŒè™•ç† UART å‚³é€åŒæ­¥ æ”¯æ´é«˜å„ªå…ˆæ¬Šä»»å‹™æ¶ä½” ä½¿ç”¨èªªæ˜ #\rUART æŒ‡ä»¤åˆ—è¡¨ #\rstop_hiï¼šæš«åœ Hi ä»»å‹™ go_hiï¼šç¹¼çºŒ Hi ä»»å‹™ clear_go_loopï¼šé‡ç½® Hi è¨ˆæ•¸å™¨ stop_helloï¼šæš«åœ Hello ä»»å‹™ go_helloï¼šç¹¼çºŒ Hello ä»»å‹™ clear_hello_loopï¼šé‡ç½® Hello è¨ˆæ•¸å™¨ æŠ€è¡“é‡é» #\rFreeRTOS ä»»å‹™ç®¡ç† ä¸­æ–·è™•ç† ä»»å‹™é–“é€šè¨Šï¼ˆä½‡åˆ—ã€è™ŸèªŒï¼‰ è‡¨ç•Œå€ä¿è­· UART é€šè¨Šå”å®š æ³¨æ„äº‹é … #\råœ¨ Zynq-7000 ä¸Šä½¿ç”¨ FreeRTOS åŠ å…¥ UART ä¸­æ–·åŠŸèƒ½æ™‚ï¼Œè¦ç‰¹åˆ¥æ³¨æ„ä»¥ä¸‹å¹¾é»ï¼š\nä¸­æ–·æ§åˆ¶å™¨åˆå§‹åŒ–\nFreeRTOS BSP è£¡çš„ portZynq7000.c å·²ç¶“å®šç¾©å¥½å…¨åŸŸä¸­æ–·æ§åˆ¶å™¨ XScuGic xInterruptController PS åªæœ‰ä¸€å€‹ä¸­æ–·æ§åˆ¶å™¨è³‡æºï¼Œå¦‚æœè‡ªå·±é‡æ–°åˆå§‹åŒ–ä¸­æ–·æ§åˆ¶å™¨ï¼ˆç›´æ¥ä½¿ç”¨ FreeRTOS BSP è£¡çš„ portZynq7000.c å®šç¾©çš„ä¸­æ–·æ§åˆ¶å™¨å°±å¥½ï¼‰ï¼Œå¯èƒ½æœƒå°è‡´ä»»å‹™ç„¡æ³•æ­£å¸¸åŸ·è¡Œ ä¸€å®šè¦ä½¿ç”¨ extern XScuGic xInterruptController å®£å‘Šé€™å€‹å…¨åŸŸè®Šæ•¸ å…¶å®ƒå°±ç”¨ Xilinx çš„æ–¹æ³•é€²è¡Œ config èˆ‡ connect è¨­å®šå°±å¯ä»¥äº† åˆå§‹åŒ–æ™‚åº\nä¸­æ–·åˆå§‹åŒ–ä¸€å®šè¦åœ¨åŸ·è¡Œç·’å•Ÿå‹•å‰å®Œæˆ ä¸èƒ½åœ¨ main å‡½å¼ä¸­åˆå§‹åŒ–ä¸­æ–· è¦åœ¨ vTaskStartScheduler() ä¹‹å‰å®Œæˆæ‰€æœ‰ä¸­æ–·è¨­å®š æœªä¾†å±•æœ› #\råŠ å…¥æ›´å¤šä»»å‹™ç®¡ç†åŠŸèƒ½ å„ªåŒ–ä¸­æ–·è™•ç†æ©Ÿåˆ¶ å¢åŠ æ›´å¤šé€šè¨Šä»‹é¢æ”¯æ´ åŠ å…¥ä»»å‹™ç›£æ§åŠŸèƒ½ ","date":"11 February 2025","externalUrl":null,"permalink":"/posts/zynq_freertos_multitask/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ› ï¸ åœ¨ Xilinx SDK 2018.3 ä¸­ä½¿ç”¨ FreeRTOS é–‹ç™¼å¤šå·¥ç³»çµ± ğŸ’» \r\n    \u003cdiv id=\"-%E5%9C%A8-xilinx-sdk-20183-%E4%B8%AD%E4%BD%BF%E7%94%A8-freertos-%E9%96%8B%E7%99%BC%E5%A4%9A%E5%B7%A5%E7%B3%BB%E7%B5%B1-\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-%E5%9C%A8-xilinx-sdk-20183-%E4%B8%AD%E4%BD%BF%E7%94%A8-freertos-%E9%96%8B%E7%99%BC%E5%A4%9A%E5%B7%A5%E7%B3%BB%E7%B5%B1-\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå°ˆæ¡ˆç°¡ä»‹ \r\n    \u003cdiv id=\"%E5%B0%88%E6%A1%88%E7%B0%A1%E4%BB%8B\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%B0%88%E6%A1%88%E7%B0%A1%E4%BB%8B\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eé€™ç¯‡æ–‡ç« è¦è·Ÿå¤§å®¶åˆ†äº«å¦‚ä½•åœ¨ Xilinx Software Development Kit (SDK) 2018.3 ç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨ FreeRTOS ä¾†é–‹ç™¼ä¸€å€‹å¤šå·¥ç³»çµ±ã€‚æˆ‘å€‘æœƒå¯¦ä½œä»»å‹™ç®¡ç†ã€UART ä¸­æ–·è™•ç†ä»¥åŠä»»å‹™é–“çš„é€šè¨Šæ©Ÿåˆ¶ã€‚\u003c/p\u003e","title":"ğŸ› ï¸ åœ¨ Xilinx SDK 2018.3 ä¸­ä½¿ç”¨ FreeRTOS é–‹ç™¼å¤šå·¥ç³»çµ± ğŸ’»","type":"posts"},{"content":"\rğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Parameters) #\rå‰è¨€ #\råœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡åŸºæ–¼ä¹‹å‰çš„å·¡é‚æœå‹™ç¯€é»ï¼ŒåŠ å…¥ ROS2 çš„åƒæ•¸åŠŸèƒ½ã€‚é€éåƒæ•¸æœå‹™ï¼Œæˆ‘å€‘å¯ä»¥å‹•æ…‹åœ°ä¿®æ”¹å’Œç›£æ§ç¯€é»çš„è¡Œç‚ºï¼Œä½¿ç³»çµ±æ›´åŠ éˆæ´»ã€‚é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†å¦‚ä½•åœ¨ ROS2 ä¸­å¯¦ç¾åƒæ•¸çš„è¨­å®šå’Œä½¿ç”¨ï¼Œä»¥åŠå¦‚ä½•çµåˆæœå‹™ç«¯ï¼ˆServerï¼‰å’Œå®¢æˆ¶ç«¯ï¼ˆClientï¼‰çš„é€šä¿¡ã€‚\nå°ˆæ¡ˆæ¶æ§‹ #\r1. æª”æ¡ˆçµæ§‹ #\rpatrol_parameters/\râ”œâ”€â”€ CMakeLists.txt # æ§‹å»ºé…ç½®æ–‡ä»¶\râ”œâ”€â”€ package.xml # åŒ…é…ç½®æ–‡ä»¶\râ”œâ”€â”€ srv/\râ”‚ â””â”€â”€ Patrol.srv # å·¡é‚æœå‹™ä»‹é¢å®šç¾©\râ”œâ”€â”€ src/\râ”œâ”€â”€ service_parameters.cpp # åƒæ•¸æœå‹™ç«¯ç¯€é»å¯¦ç¾\râ””â”€â”€ client_parameters.cpp # åƒæ•¸å®¢æˆ¶ç«¯ç¯€é»å¯¦ç¾ 2. å®Œæ•´ç¨‹å¼ç¢¼å¯¦ç¾ #\r2.1 åƒæ•¸å®¢æˆ¶ç«¯ç¨‹å¼ç¢¼ (client_parameters.cpp) #\r// ===== åŒ…å«å¿…è¦çš„æ¨™é ­æª” ===== #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; // ROS2 C++ å®¢æˆ¶ç«¯åº«,æä¾›ROS2åŸºæœ¬åŠŸèƒ½ #include \u0026#34;patrol/srv/patrol.hpp\u0026#34; // è‡ªå®šç¾©çš„å·¡é‚æœå‹™ä»‹é¢ #include \u0026#34;rclcpp/time.hpp\u0026#34; // ROS2 æ™‚é–“ç›¸é—œåŠŸèƒ½,ç”¨æ–¼è™•ç†æ™‚é–“ #include \u0026lt;random\u0026gt; // C++ éš¨æ©Ÿæ•¸ç”Ÿæˆåº«,ç”¨æ–¼ç”Ÿæˆéš¨æ©Ÿç›®æ¨™ä½ç½® #include \u0026#34;rcl_interfaces/msg/parameter.hpp\u0026#34; // ROS2 åƒæ•¸è¨Šæ¯,ç”¨æ–¼åƒæ•¸å®šç¾© #include \u0026#34;rcl_interfaces/msg/parameter_value.hpp\u0026#34; // ROS2 åƒæ•¸å€¼è¨Šæ¯,ç”¨æ–¼è¨­ç½®åƒæ•¸å€¼ #include \u0026#34;rcl_interfaces/msg/parameter_type.hpp\u0026#34; // ROS2 åƒæ•¸é¡å‹è¨Šæ¯,å®šç¾©åƒæ•¸é¡å‹ #include \u0026#34;rcl_interfaces/srv/set_parameters.hpp\u0026#34; // ROS2 è¨­ç½®åƒæ•¸æœå‹™,ç”¨æ–¼å‹•æ…‹ä¿®æ”¹åƒæ•¸ /** * @brief å®¢æˆ¶ç«¯ç¯€é»é¡åˆ¥ * * æ­¤é¡åˆ¥ç¹¼æ‰¿è‡ª rclcpp::Node,å¯¦ç¾äº†ä¸€å€‹ROS2å®¢æˆ¶ç«¯ç¯€é» * ä¸»è¦åŠŸèƒ½æ˜¯ç™¼é€å·¡é‚è«‹æ±‚å’Œæ›´æ–°ç›®æ¨™åƒæ•¸ */ class Client: public rclcpp::Node { private: rclcpp::Client\u0026lt;patrol::srv::Patrol\u0026gt;::SharedPtr client_; // å·¡é‚æœå‹™å®¢æˆ¶ç«¯,ç”¨æ–¼ç™¼é€å·¡é‚è«‹æ±‚ std::shared_ptr\u0026lt;patrol::srv::Patrol::Request\u0026gt; request_; // æœå‹™è«‹æ±‚ç‰©ä»¶,å„²å­˜è«‹æ±‚å…§å®¹ rclcpp::TimerBase::SharedPtr timer_; // å®šæ™‚å™¨,ç”¨æ–¼å®šæœŸç™¼é€è«‹æ±‚ public: Client(std::string nodeName); // å»ºæ§‹å‡½æ•¸,åˆå§‹åŒ–ç¯€é» ~Client() = default; // é è¨­è§£æ§‹å‡½æ•¸ void cb(); // å®šæ™‚å›èª¿å‡½æ•¸,è™•ç†å®šæ™‚ä»»å‹™ std::shared_ptr\u0026lt;rcl_interfaces::srv::SetParameters::Response\u0026gt; call_set_parameters(rcl_interfaces::msg::Parameter \u0026amp;parameter); // è¨­ç½®åƒæ•¸å‡½æ•¸ void update_target_parameters(double x, double y); // æ›´æ–°ç›®æ¨™ä½ç½®åƒæ•¸çš„å‡½æ•¸ }; /** * @brief å®¢æˆ¶ç«¯ç¯€é»å»ºæ§‹å‡½æ•¸ * @param nodeName ç¯€é»åç¨± * * åˆå§‹åŒ–ç¯€é»,å‰µå»ºæœå‹™å®¢æˆ¶ç«¯å’Œå®šæ™‚å™¨ */ Client::Client(std::string nodeName): Node(nodeName) { // å‰µå»ºå·¡é‚æœå‹™å®¢æˆ¶ç«¯,æœå‹™åç‚º\u0026#34;patrol\u0026#34; this-\u0026gt;client_ = this-\u0026gt;create_client\u0026lt;patrol::srv::Patrol\u0026gt;(\u0026#34;patrol\u0026#34;); RCLCPP_INFO(this-\u0026gt;get_logger(),\u0026#34;Client has been created\u0026#34;); // è¼¸å‡ºå‰µå»ºæˆåŠŸæ—¥èªŒ // å‰µå»ºå®šæ™‚å™¨,æ¯20ç§’è§¸ç™¼ä¸€æ¬¡å›èª¿å‡½æ•¸ this-\u0026gt;timer_ = this-\u0026gt;create_wall_timer(std::chrono::seconds(20), std::bind(\u0026amp;Client::cb, this)); } /** * @brief æ›´æ–°ç›®æ¨™åƒæ•¸å‡½æ•¸ * @param x Xè»¸ç›®æ¨™åº§æ¨™ * @param y Yè»¸ç›®æ¨™åº§æ¨™ * * æ›´æ–°æœå‹™ç¯€é»çš„ç›®æ¨™ä½ç½®åƒæ•¸ */ void Client::update_target_parameters(double x, double y) { // === è¨­ç½® X åº§æ¨™åƒæ•¸ === auto param = rcl_interfaces::msg::Parameter(); param.name = \u0026#34;Target_X\u0026#34;; auto param_value = rcl_interfaces::msg::ParameterValue(); param_value.type = rcl_interfaces::msg::ParameterType::PARAMETER_DOUBLE; param_value.double_value = x; param.value = param_value; auto response = call_set_parameters(param); // æª¢æŸ¥Xåº§æ¨™åƒæ•¸è¨­ç½®çµæœ if(response == nullptr) { RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Failed to update target parameters\u0026#34;); } else { for(auto result: response-\u0026gt;results) { if(result.successful) { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Target parameters updated successfully\u0026#34;); } else { RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Failed to update target parameters\u0026#34;); } } } // === è¨­ç½® Y åº§æ¨™åƒæ•¸ === param.name = \u0026#34;Target_Y\u0026#34;; param_value.double_value = y; param.value = param_value; response = call_set_parameters(param); // æª¢æŸ¥Yåº§æ¨™åƒæ•¸è¨­ç½®çµæœ if(response == nullptr) { RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Failed to update target parameters\u0026#34;); } else { for(auto result: response-\u0026gt;results) { if(result.successful) { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Target parameters updated successfully\u0026#34;); } } } } /** * @brief è¨­ç½®åƒæ•¸æœå‹™èª¿ç”¨å‡½æ•¸ * @param parameter è¦è¨­ç½®çš„åƒæ•¸ * @return åƒæ•¸è¨­ç½®éŸ¿æ‡‰ * * èª¿ç”¨æœå‹™ç¯€é»çš„åƒæ•¸è¨­ç½®æœå‹™ */ std::shared_ptr\u0026lt;rcl_interfaces::srv::SetParameters::Response\u0026gt; Client::call_set_parameters(rcl_interfaces::msg::Parameter \u0026amp;parameter) { // å‰µå»ºåƒæ•¸å®¢æˆ¶ç«¯,é€£æ¥åˆ°æœå‹™ç¯€é»çš„åƒæ•¸æœå‹™ auto param_client = this-\u0026gt;create_client\u0026lt;rcl_interfaces::srv::SetParameters\u0026gt;(\u0026#34;/service_parameters_node/set_parameters\u0026#34;); // ç­‰å¾…æœå‹™å¯ç”¨,æ¯ç§’æª¢æŸ¥ä¸€æ¬¡ while(!param_client-\u0026gt;wait_for_service(std::chrono::seconds(1))){ if(!rclcpp::ok()){ RCLCPP_ERROR(this-\u0026gt;get_logger(),\u0026#34;Interrupted while waiting for the service. Exiting.\u0026#34;); return nullptr; } RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Service not available, waiting again...\u0026#34;); } // ç™¼é€åƒæ•¸è¨­ç½®è«‹æ±‚ auto request = std::make_shared\u0026lt;rcl_interfaces::srv::SetParameters::Request\u0026gt;(); request-\u0026gt;parameters.push_back(parameter); auto future = param_client-\u0026gt;async_send_request(request); rclcpp::spin_until_future_complete(this-\u0026gt;get_node_base_interface(), future); auto response = future.get(); return response; } /** * @brief å®šæ™‚å›èª¿å‡½æ•¸ * * å®šæœŸç”Ÿæˆéš¨æ©Ÿç›®æ¨™ä½ç½®ä¸¦ç™¼é€å·¡é‚è«‹æ±‚ */ void Client::cb() { // ç­‰å¾…å·¡é‚æœå‹™å¯ç”¨ while(!this-\u0026gt;client_-\u0026gt;wait_for_service(std::chrono::seconds(1))) { if(!rclcpp::ok()){ RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Interrupted while waiting for the service. Exiting.\u0026#34;); return; } RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Service not available, waiting again...\u0026#34;); } this-\u0026gt;request_ = std::make_shared\u0026lt;patrol::srv::Patrol::Request\u0026gt;(); // === ç”Ÿæˆéš¨æ©Ÿç›®æ¨™ä½ç½® === std::random_device rd; // å‰µå»ºéš¨æ©Ÿæ•¸ç”Ÿæˆå™¨ std::mt19937 gen(rd()); // ä½¿ç”¨ Mersenne Twister æ¼”ç®—æ³• std::uniform_real_distribution\u0026lt;double\u0026gt; dis_float(1.0, 10.0); // å®šç¾©å‡å‹»åˆ†ä½ˆç¯„åœ 1.0-10.0 double random_float = dis_float(gen); // è¨­ç½®è«‹æ±‚çš„ç›®æ¨™ä½ç½® this-\u0026gt;request_-\u0026gt;target_x = random_float = dis_float(gen); this-\u0026gt;request_-\u0026gt;target_y = random_float = dis_float(gen); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Requesting patrol to (%f, %f)\u0026#34;, this-\u0026gt;request_-\u0026gt;target_x, this-\u0026gt;request_-\u0026gt;target_y); // ç™¼é€ç•°æ­¥è«‹æ±‚ä¸¦è¨­ç½®å›èª¿è™•ç†çµæœ auto result = this-\u0026gt;client_-\u0026gt;async_send_request(this-\u0026gt;request_, [this](rclcpp::Client\u0026lt;patrol::srv::Patrol\u0026gt;::SharedFuture future) -\u0026gt; void { auto response = future.get(); if(response-\u0026gt;result == patrol::srv::Patrol::Response::SUCCESS) { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Patrol to (%f, %f) successful\u0026#34;, this-\u0026gt;request_-\u0026gt;target_x, this-\u0026gt;request_-\u0026gt;target_y); } else { RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Patrol to (%f, %f) failed\u0026#34;, this-\u0026gt;request_-\u0026gt;target_x, this-\u0026gt;request_-\u0026gt;target_y); } }); } /** * @brief ä¸»å‡½æ•¸ * * åˆå§‹åŒ–ROS2ç³»çµ±,å‰µå»ºä¸¦é‹è¡Œå®¢æˆ¶ç«¯ç¯€é» */ int main(int argc, char **argv) { rclcpp::init(argc, argv); // åˆå§‹åŒ– ROS2 ç³»çµ± auto client = std::make_shared\u0026lt;Client\u0026gt;(\u0026#34;client_parameters_node\u0026#34;); // å‰µå»ºå®¢æˆ¶ç«¯ç¯€é» client-\u0026gt;update_target_parameters(10.0, 10.0); // è¨­ç½®åˆå§‹ç›®æ¨™åƒæ•¸ rclcpp::spin(client); // é‹è¡Œç¯€é»,è™•ç†å›èª¿ rclcpp::shutdown(); // é—œé–‰ ROS2 ç³»çµ± return 0; } 2.2 åƒæ•¸æœå‹™ç«¯ç¨‹å¼ç¢¼ (service_parameters.cpp) #\r// ===== åŒ…å«å¿…è¦çš„æ¨™é ­æª” ===== #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; // ROS2 C++ å®¢æˆ¶ç«¯åº« #include \u0026#34;patrol/srv/patrol.hpp\u0026#34; // å·¡é‚æœå‹™ä»‹é¢ #include \u0026#34;geometry_msgs/msg/pose.hpp\u0026#34; // ä½ç½®è¨Šæ¯ #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; // turtlesim ä½ç½®è¨Šæ¯ #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; // é€Ÿåº¦è¨Šæ¯ #include \u0026#34;rcl_interfaces/msg/parameter_descriptor.hpp\u0026#34; // åƒæ•¸æè¿°ç¬¦ #include \u0026#34;rcl_interfaces/msg/parameter_type.hpp\u0026#34; // åƒæ•¸é¡å‹ /** * @brief åƒæ•¸æœå‹™ç¯€é»é¡åˆ¥ * * æ­¤é¡åˆ¥ç¹¼æ‰¿è‡ª rclcpp::Node,å¯¦ç¾äº†ä¸€å€‹å¸¶åƒæ•¸çš„ROS2æœå‹™ç¯€é» */ class ServiceParameters : public rclcpp::Node { private: // æˆå“¡è®Šé‡ double targetX_ {1.0}; // ç›®æ¨™ X åº§æ¨™ double targetY_ {1.0}; // ç›®æ¨™ Y åº§æ¨™ // ROS2 é€šä¿¡çµ„ä»¶ rclcpp::Service\u0026lt;patrol::srv::Patrol\u0026gt;::SharedPtr service_; // å·¡é‚æœå‹™ turtlesim::msg::Pose::SharedPtr turtlePose_; // ç•¶å‰ä½ç½® rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr turtlePoseSub_; // ä½ç½®è¨‚é–±è€… rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; // é€Ÿåº¦ç™¼å¸ƒè€… // åƒæ•¸å›èª¿å‡½æ•¸ OnSetParametersCallbackHandle::SharedPtr parameter_callback_handle_; public: // å»ºæ§‹å‡½æ•¸ ServiceParameters(std::string nodeName) : Node(nodeName) { // å®£å‘Šä¸¦è¨»å†Šåƒæ•¸ rcl_interfaces::msg::ParameterDescriptor descriptor; descriptor.description = \u0026#34;Target position parameter\u0026#34;; descriptor.read_only = false; this-\u0026gt;declare_parameter(\u0026#34;Target_X\u0026#34;, 1.0, descriptor); this-\u0026gt;declare_parameter(\u0026#34;Target_Y\u0026#34;, 1.0, descriptor); // è¨­ç½®åƒæ•¸å›èª¿ parameter_callback_handle_ = this-\u0026gt;add_on_set_parameters_callback( std::bind(\u0026amp;ServiceParameters::parametersCallback, this, std::placeholders::_1)); // å‰µå»ºä½ç½®è¨‚é–±è€… turtlePoseSub_ = this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;( \u0026#34;/turtle1/pose\u0026#34;, 10, [this](const turtlesim::msg::Pose::SharedPtr msg) { turtlePose_ = msg; move_to_target(turtlePose_-\u0026gt;x, turtlePose_-\u0026gt;y); } ); // å‰µå»ºé€Ÿåº¦ç™¼å¸ƒè€… publisher_ = this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;, 10); // å‰µå»ºæœå‹™ service_ = this-\u0026gt;create_service\u0026lt;patrol::srv::Patrol\u0026gt;( \u0026#34;patrol\u0026#34;, std::bind(\u0026amp;ServiceParameters::handle_patrol, this, std::placeholders::_1, std::placeholders::_2) ); } // åƒæ•¸å›èª¿å‡½æ•¸ rcl_interfaces::msg::SetParametersResult parametersCallback( const std::vector\u0026lt;rclcpp::Parameter\u0026gt; \u0026amp;parameters) { rcl_interfaces::msg::SetParametersResult result; result.successful = true; for(const auto \u0026amp;param : parameters) { if(param.get_name() == \u0026#34;Target_X\u0026#34;) { targetX_ = param.as_double(); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Target_X updated to: %f\u0026#34;, targetX_); } else if(param.get_name() == \u0026#34;Target_Y\u0026#34;) { targetY_ = param.as_double(); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Target_Y updated to: %f\u0026#34;, targetY_); } } return result; } // æœå‹™å›èª¿å‡½æ•¸ void handle_patrol( const std::shared_ptr\u0026lt;patrol::srv::Patrol::Request\u0026gt; request, const std::shared_ptr\u0026lt;patrol::srv::Patrol::Response\u0026gt; response) { if((request-\u0026gt;target_x \u0026gt; 0.0f \u0026amp;\u0026amp; request-\u0026gt;target_x \u0026lt; 12.0f) \u0026amp;\u0026amp; (request-\u0026gt;target_y \u0026gt; 0.0f \u0026amp;\u0026amp; request-\u0026gt;target_y \u0026lt; 12.0f)) { targetX_ = request-\u0026gt;target_x; targetY_ = request-\u0026gt;target_y; response-\u0026gt;result = patrol::srv::Patrol::Response::SUCCESS; } else { response-\u0026gt;result = patrol::srv::Patrol::Response::FAIL; } } // ç§»å‹•æ§åˆ¶å‡½æ•¸ void move_to_target(double currentX, double currentY) { auto twist = geometry_msgs::msg::Twist(); double dx = targetX_ - currentX; double dy = targetY_ - currentY; double distance = std::sqrt(dx * dx + dy * dy); double target_angle = std::atan2(dy, dx); double angle_diff = target_angle - turtlePose_-\u0026gt;theta; if (distance \u0026gt; 0.1) { if(fabs(angle_diff) \u0026gt; 0.2) { twist.angular.z = 1.0 * angle_diff; } else { twist.linear.x = 0.5 * distance; } RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Moving to target: (%f, %f), current: (%f, %f)\u0026#34;, targetX_, targetY_, currentX, currentY); publisher_-\u0026gt;publish(twist); } } }; // ä¸»å‡½æ•¸ int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;ServiceParameters\u0026gt;(\u0026#34;service_parameters_node\u0026#34;); rclcpp::spin(node); rclcpp::shutdown(); return 0; } 3. åƒæ•¸èªªæ˜ #\r3.1 å‹•æ…‹åƒæ•¸ #\råœ¨æœ¬å°ˆæ¡ˆä¸­ï¼Œæˆ‘å€‘å¯¦ç¾äº†ä»¥ä¸‹å‹•æ…‹åƒæ•¸ï¼š\nç›®æ¨™ä½ç½®åƒæ•¸ Target_Xï¼šç›®æ¨™ X åº§æ¨™ Target_Yï¼šç›®æ¨™ Y åº§æ¨™ é€™äº›åƒæ•¸å¯ä»¥åœ¨é‹è¡Œæ™‚å‹•æ…‹ä¿®æ”¹ï¼Œä½¿ç³»çµ±æ›´å…·å½ˆæ€§ã€‚\n3.2 åƒæ•¸æ›´æ–°æ©Ÿåˆ¶ #\rvoid Client::update_target_parameters(double x, double y) { // å‰µå»ºä¸¦è¨­å®š X åº§æ¨™åƒæ•¸ auto param = rcl_interfaces::msg::Parameter(); param.name = \u0026#34;Target_X\u0026#34;; auto param_value = rcl_interfaces::msg::ParameterValue(); param_value.type = rcl_interfaces::msg::ParameterType::PARAMETER_DOUBLE; param_value.double_value = x; param.value = param_value; // ... [æ›´å¤šå¯¦ç¾ç´°ç¯€] } 4. é…ç½®æ–‡ä»¶èªªæ˜ #\r4.1 CMakeLists.txt #\r# æŒ‡å®š CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚ cmake_minimum_required(VERSION 3.8) # å®šç¾©å°ˆæ¡ˆåç¨± project(patrol_parameters) # å¦‚æœä½¿ç”¨ GCC æˆ– Clang ç·¨è­¯å™¨ï¼Œæ·»åŠ ç·¨è­¯è­¦å‘Šé¸é … if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES \u0026#34;Clang\u0026#34;) add_compile_options(-Wall -Wextra -Wpedantic) endif() # å°‹æ‰¾ä¸¦è¼‰å…¥æ‰€éœ€çš„ä¾è³´å¥—ä»¶ find_package(ament_cmake REQUIRED) # ROS 2 CMake å·¥å…· find_package(rclcpp REQUIRED) # ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« find_package(std_msgs REQUIRED) # æ¨™æº–è¨Šæ¯é¡å‹ find_package(rosidl_default_generators REQUIRED)# æœå‹™ä»‹é¢ç”Ÿæˆå™¨ find_package(turtlesim REQUIRED) # çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ find_package(geometry_msgs REQUIRED) # å¹¾ä½•è¨Šæ¯é¡å‹ find_package(patrol REQUIRED) # å·¡é‚æœå‹™ä»‹é¢ find_package(rcl_interfaces REQUIRED) # ROS2 åƒæ•¸ä»‹é¢ # å‰µå»ºå¯åŸ·è¡Œæª” add_executable(service_parameters_node src/service_parameters.cpp) add_executable(client_parameters_node src/client_parameters.cpp) # ç‚ºå¯åŸ·è¡Œæª”æ·»åŠ ä¾è³´ ament_target_dependencies(service_parameters_node rclcpp # ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« std_msgs # æ¨™æº–è¨Šæ¯é¡å‹ geometry_msgs # å¹¾ä½•è¨Šæ¯é¡å‹ turtlesim # çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ patrol # å·¡é‚æœå‹™ä»‹é¢ rcl_interfaces # ROS2 åƒæ•¸ä»‹é¢ ) ament_target_dependencies(client_parameters_node rclcpp # ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« std_msgs # æ¨™æº–è¨Šæ¯é¡å‹ geometry_msgs # å¹¾ä½•è¨Šæ¯é¡å‹ turtlesim # çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ patrol # å·¡é‚æœå‹™ä»‹é¢ rcl_interfaces # ROS2 åƒæ•¸ä»‹é¢ ) # å®‰è£å¯åŸ·è¡Œæª”åˆ°æŒ‡å®šç›®éŒ„ install(TARGETS service_parameters_node client_parameters_node DESTINATION lib/${PROJECT_NAME} ) # å®Œæˆ ament å¥—ä»¶çš„é…ç½® ament_package() 4.2 package.xml #\r\u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;!-- æŒ‡å®š XML æ¨¡å¼å®šç¾©ï¼ˆXSDï¼‰æª”æ¡ˆçš„ä½ç½®ï¼Œç”¨æ–¼é©—è­‰æ­¤æª”æ¡ˆçš„æ ¼å¼ --\u0026gt; \u0026lt;?xml-model href=\u0026#34;http://download.ros.org/schema/package_format3.xsd\u0026#34; schematypens=\u0026#34;http://www.w3.org/2001/XMLSchema\u0026#34;?\u0026gt; \u0026lt;!-- ROS 2 å¥—ä»¶é…ç½®æª”æ¡ˆï¼Œä½¿ç”¨æ ¼å¼ç‰ˆæœ¬ 3 --\u0026gt; \u0026lt;package format=\u0026#34;3\u0026#34;\u0026gt; \u0026lt;!-- å¥—ä»¶åŸºæœ¬è³‡è¨Š --\u0026gt; \u0026lt;name\u0026gt;patrol_parameters\u0026lt;/name\u0026gt; \u0026lt;!-- å¥—ä»¶åç¨± --\u0026gt; \u0026lt;version\u0026gt;0.0.0\u0026lt;/version\u0026gt; \u0026lt;!-- å¥—ä»¶ç‰ˆæœ¬ --\u0026gt; \u0026lt;description\u0026gt;ROS2 å·¡é‚æœå‹™ç¯€é»ï¼ˆå¸¶åƒæ•¸ï¼‰\u0026lt;/description\u0026gt; \u0026lt;!-- å¥—ä»¶æè¿° --\u0026gt; \u0026lt;maintainer email=\u0026#34;tienyao@todo.todo\u0026#34;\u0026gt;tienyao\u0026lt;/maintainer\u0026gt; \u0026lt;!-- ç¶­è­·è€…è³‡è¨Š --\u0026gt; \u0026lt;license\u0026gt;TODO: License declaration\u0026lt;/license\u0026gt; \u0026lt;!-- æˆæ¬Šè²æ˜ --\u0026gt; \u0026lt;!-- å»ºæ§‹å·¥å…·ä¾è³´ --\u0026gt; \u0026lt;buildtool_depend\u0026gt;ament_cmake\u0026lt;/buildtool_depend\u0026gt; \u0026lt;!-- ä½¿ç”¨ ament_cmake ä½œç‚ºå»ºæ§‹å·¥å…· --\u0026gt; \u0026lt;!-- å»ºæ§‹æ™‚ä¾è³´ --\u0026gt; \u0026lt;build_depend\u0026gt;rosidl_default_generators\u0026lt;/build_depend\u0026gt;\u0026lt;!-- ç”¨æ–¼ç”Ÿæˆä»‹é¢æª”æ¡ˆ --\u0026gt; \u0026lt;!-- åŸ·è¡Œæ™‚ä¾è³´ --\u0026gt; \u0026lt;exec_depend\u0026gt;rosidl_default_runtime\u0026lt;/exec_depend\u0026gt; \u0026lt;!-- åŸ·è¡Œæ™‚éœ€è¦çš„ä»‹é¢é‹è¡Œåº« --\u0026gt; \u0026lt;!-- å»ºæ§‹å’ŒåŸ·è¡Œéƒ½éœ€è¦çš„ä¾è³´ --\u0026gt; \u0026lt;depend\u0026gt;rclcpp\u0026lt;/depend\u0026gt; \u0026lt;!-- ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« --\u0026gt; \u0026lt;depend\u0026gt;std_msgs\u0026lt;/depend\u0026gt; \u0026lt;!-- æ¨™æº–è¨Šæ¯é¡å‹ --\u0026gt; \u0026lt;depend\u0026gt;turtlesim\u0026lt;/depend\u0026gt; \u0026lt;!-- çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ --\u0026gt; \u0026lt;depend\u0026gt;geometry_msgs\u0026lt;/depend\u0026gt; \u0026lt;!-- å¹¾ä½•è¨Šæ¯é¡å‹ --\u0026gt; \u0026lt;depend\u0026gt;patrol\u0026lt;/depend\u0026gt; \u0026lt;!-- å·¡é‚æœå‹™ä»‹é¢ --\u0026gt; \u0026lt;depend\u0026gt;rcl_interfaces\u0026lt;/depend\u0026gt; \u0026lt;!-- ROS2 åƒæ•¸ä»‹é¢ --\u0026gt; \u0026lt;!-- æ¸¬è©¦ç›¸é—œä¾è³´ --\u0026gt; \u0026lt;test_depend\u0026gt;ament_lint_auto\u0026lt;/test_depend\u0026gt; \u0026lt;!-- è‡ªå‹•åŒ–ç¨‹å¼ç¢¼æª¢æŸ¥å·¥å…· --\u0026gt; \u0026lt;test_depend\u0026gt;ament_lint_common\u0026lt;/test_depend\u0026gt; \u0026lt;!-- å¸¸ç”¨ç¨‹å¼ç¢¼æª¢æŸ¥è¦å‰‡ --\u0026gt; \u0026lt;!-- ROS 2 å¥—ä»¶ç‰¹å®šè³‡è¨Š --\u0026gt; \u0026lt;export\u0026gt; \u0026lt;build_type\u0026gt;ament_cmake\u0026lt;/build_type\u0026gt; \u0026lt;!-- æŒ‡å®šä½¿ç”¨ ament_cmake å»ºæ§‹ç³»çµ± --\u0026gt; \u0026lt;/export\u0026gt; \u0026lt;/package\u0026gt; åŸ·è¡Œæ–¹å¼ #\rç·¨è­¯å°ˆæ¡ˆ cd ros2_ws colcon build --packages-select patrol_parameters åŸ·è¡Œç¯€é» # çµ‚ç«¯æ©Ÿ 1ï¼šå•Ÿå‹• turtlesim ros2 run turtlesim turtlesim_node # çµ‚ç«¯æ©Ÿ 2ï¼šå•Ÿå‹•åƒæ•¸æœå‹™ç«¯ ros2 run patrol_parameters service_parameters_node # çµ‚ç«¯æ©Ÿ 3ï¼šå•Ÿå‹•åƒæ•¸å®¢æˆ¶ç«¯ ros2 run patrol_parameters client_parameters_node ä½¿ç”¨ ROS2 æŒ‡ä»¤æŸ¥çœ‹å’Œè¨­å®šåƒæ•¸ #\råˆ—å‡ºæ‰€æœ‰åƒæ•¸ ros2 param list æŸ¥çœ‹ç‰¹å®šåƒæ•¸å€¼ ros2 param get /service_parameters_node Target_X ros2 param get /service_parameters_node Target_Y æ‰‹å‹•è¨­å®šåƒæ•¸ ros2 param set /service_parameters_node Target_X 5.0 ros2 param set /service_parameters_node Target_Y 5.0 æŠ€è¡“è¦é»èªªæ˜ #\råƒæ•¸æœå‹™æ©Ÿåˆ¶\nä½¿ç”¨ ROS2 åƒæ•¸æœå‹™é€²è¡Œå‹•æ…‹é…ç½® æ”¯æ´åƒæ•¸çš„å³æ™‚æ›´æ–°å’Œç›£æ§ æä¾›åƒæ•¸è®Šæ›´çš„å›èª¿æ©Ÿåˆ¶ éåŒæ­¥é€šä¿¡\nä½¿ç”¨éåŒæ­¥æ–¹å¼ç™¼é€åƒæ•¸æ›´æ–°è«‹æ±‚ è™•ç†åƒæ•¸æ›´æ–°çš„å›æ‡‰å’ŒéŒ¯èª¤æƒ…æ³ ç¢ºä¿ç³»çµ±çš„ç©©å®šæ€§å’Œå¯é æ€§ éŒ¯èª¤è™•ç†\næª¢æŸ¥åƒæ•¸æ›´æ–°çš„çµæœ æä¾›è©³ç´°çš„éŒ¯èª¤æ—¥èªŒ ç¢ºä¿ç³»çµ±çš„å¥å£¯æ€§ åƒè€ƒè³‡æº #\rROS2 Parameters æ•™ç¨‹ ROS2 Services æ•™ç¨‹ çµèª #\ré€éé€™å€‹å°ˆæ¡ˆï¼Œæˆ‘å€‘å­¸ç¿’äº†å¦‚ä½•åœ¨ ROS2 ä¸­ä½¿ç”¨åƒæ•¸æœå‹™ä¾†å¯¦ç¾å‹•æ…‹é…ç½®ã€‚çµåˆåƒæ•¸å’Œæœå‹™çš„æ©Ÿåˆ¶ï¼Œä½¿å¾—ç³»çµ±æ›´åŠ éˆæ´»ä¸”æ˜“æ–¼ç®¡ç†ã€‚å®Œæ•´çš„ç¨‹å¼ç¢¼å¯¦ç¾å’Œè©³ç´°çš„æ³¨è§£ï¼Œæœ‰åŠ©æ–¼ç†è§£ ROS2 çš„åƒæ•¸æ©Ÿåˆ¶å’Œå¯¦ä½œæ–¹æ³•ã€‚\n","date":"11 February 2025","externalUrl":null,"permalink":"/posts/ros2_patrol_parameter/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Parameters) \r\n    \u003cdiv id=\"-ros2-%E5%B7%A1%E9%82%8F%E6%9C%8D%E5%8B%99%E7%AF%80%E9%BB%9E%E9%96%8B%E7%99%BC%E6%95%99%E5%AD%B8%E4%BD%BF%E7%94%A8-parameters\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-%E5%B7%A1%E9%82%8F%E6%9C%8D%E5%8B%99%E7%AF%80%E9%BB%9E%E9%96%8B%E7%99%BC%E6%95%99%E5%AD%B8%E4%BD%BF%E7%94%A8-parameters\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \r\n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡åŸºæ–¼ä¹‹å‰çš„å·¡é‚æœå‹™ç¯€é»ï¼ŒåŠ å…¥ ROS2 çš„åƒæ•¸åŠŸèƒ½ã€‚é€éåƒæ•¸æœå‹™ï¼Œæˆ‘å€‘å¯ä»¥å‹•æ…‹åœ°ä¿®æ”¹å’Œç›£æ§ç¯€é»çš„è¡Œç‚ºï¼Œä½¿ç³»çµ±æ›´åŠ éˆæ´»ã€‚é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†å¦‚ä½•åœ¨ ROS2 ä¸­å¯¦ç¾åƒæ•¸çš„è¨­å®šå’Œä½¿ç”¨ï¼Œä»¥åŠå¦‚ä½•çµåˆæœå‹™ç«¯ï¼ˆServerï¼‰å’Œå®¢æˆ¶ç«¯ï¼ˆClientï¼‰çš„é€šä¿¡ã€‚\u003c/p\u003e","title":"ğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Parameters)","type":"posts"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/parameters/","section":"Tags","summary":"","title":"Parameters","type":"tags"},{"content":"\rğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Service å’Œ Client) #\rå‰è¨€ #\råœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡å¯¦ä½œä¸€å€‹ ROS2 çš„å·¡é‚æœå‹™ç¯€é»ï¼Œé€é Service å’Œ Topic çš„çµåˆä¾†æ§åˆ¶ turtlesim ä¸­çš„çƒé¾œç§»å‹•åˆ°æŒ‡å®šä½ç½®ã€‚é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†å¦‚ä½•åœ¨ ROS2 ä¸­å¯¦ç¾æœå‹™ç«¯ï¼ˆServerï¼‰å’Œå®¢æˆ¶ç«¯ï¼ˆClientï¼‰çš„é€šä¿¡ï¼Œä»¥åŠåŸºæœ¬çš„é‹å‹•æ§åˆ¶ã€‚\nå°ˆæ¡ˆæ¶æ§‹ #\r1. æª”æ¡ˆçµæ§‹ #\rpatrol/\râ”œâ”€â”€ CMakeLists.txt # æ§‹å»ºé…ç½®æ–‡ä»¶\râ”œâ”€â”€ package.xml # åŒ…é…ç½®æ–‡ä»¶\râ”œâ”€â”€ src/\râ”‚ â”œâ”€â”€ service.cpp # æœå‹™ç«¯ç¯€é»å¯¦ç¾\râ”‚ â””â”€â”€ client.cpp # å®¢æˆ¶ç«¯ç¯€é»å¯¦ç¾\râ””â”€â”€ srv/\râ””â”€â”€ Patrol.srv # æœå‹™ä»‹é¢å®šç¾© 2. æœå‹™ä»‹é¢å®šç¾© #\r# Patrol.srv\rfloat64 target_x # ç›®æ¨™ X åº§æ¨™\rfloat64 target_y # ç›®æ¨™ Y åº§æ¨™\r---\rint8 SUCCESS = 1 # æˆåŠŸç‹€æ…‹ç¢¼\rint8 FAIL = 0 # å¤±æ•—ç‹€æ…‹ç¢¼\rint8 result # åŸ·è¡Œçµæœ 3. å®Œæ•´ç¨‹å¼ç¢¼å¯¦ç¾ #\r3.1 æœå‹™ç«¯ç¨‹å¼ç¢¼ (service.cpp) #\r// åŒ…å«å¿…è¦çš„æ¨™é ­æ–‡ä»¶ #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; // ROS2 C++ å®¢æˆ¶ç«¯åº« #include \u0026#34;patrol/srv/patrol.hpp\u0026#34; // ç”Ÿæˆçš„æœå‹™ä»‹é¢ #include \u0026#34;geometry_msgs/msg/pose.hpp\u0026#34; // ä½ç½®è¨Šæ¯ #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; // turtlesim ä½ç½®è¨Šæ¯ #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; // é€Ÿåº¦è¨Šæ¯ // å·¡é‚æœå‹™ç¯€é»é¡åˆ¥ï¼Œç¹¼æ‰¿è‡ª rclcpp::Node class PatrolService: public rclcpp::Node { private: // æˆå“¡è®Šé‡ double targetX_ {1.0}; // ç›®æ¨™ X åº§æ¨™ï¼Œé è¨­å€¼ç‚º 1.0 double targetY_ {1.0}; // ç›®æ¨™ Y åº§æ¨™ï¼Œé è¨­å€¼ç‚º 1.0 // ROS2 é€šä¿¡çµ„ä»¶ rclcpp::Service\u0026lt;patrol::srv::Patrol\u0026gt;::SharedPtr service_; // å·¡é‚æœå‹™ turtlesim::msg::Pose::SharedPtr turtlePose_; // å„²å­˜çƒé¾œç•¶å‰ä½ç½® rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr turtlePoseSub_; // è¨‚é–±çƒé¾œä½ç½® rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; // ç™¼å¸ƒé€Ÿåº¦å‘½ä»¤ public: // å»ºæ§‹å‡½æ•¸ï¼Œåˆå§‹åŒ–ç¯€é» PatrolService(std::string nodeName); // è§£æ§‹å‡½æ•¸ï¼Œä½¿ç”¨é è¨­å¯¦ä½œ ~PatrolService() = default; // è™•ç†å·¡é‚æœå‹™è«‹æ±‚çš„å›èª¿å‡½æ•¸ void handle_patrol(const std::shared_ptr\u0026lt;patrol::srv::Patrol::Request\u0026gt; request, const std::shared_ptr\u0026lt;patrol::srv::Patrol::Response\u0026gt; response); // æ§åˆ¶çƒé¾œç§»å‹•åˆ°ç›®æ¨™ä½ç½®çš„å‡½æ•¸ void move_to_target(double targetX, double targetY); }; // å»ºæ§‹å‡½æ•¸å¯¦ç¾ PatrolService::PatrolService(std::string nodeName): Node(nodeName) { // å‰µå»ºä½ç½®è¨‚é–±è€…ï¼Œè¨‚é–±çƒé¾œçš„ä½ç½®è³‡è¨Š turtlePoseSub_ = this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;( \u0026#34;/turtle1/pose\u0026#34;, // è©±é¡Œåç¨± 10, // QoS è¨­å®š [this](const turtlesim::msg::Pose::SharedPtr msg) { // å›èª¿å‡½æ•¸ turtlePose_ = msg; // æ›´æ–°çƒé¾œä½ç½® move_to_target(turtlePose_-\u0026gt;x, turtlePose_-\u0026gt;y); // åŸ·è¡Œç§»å‹•æ§åˆ¶ } ); // å‰µå»ºé€Ÿåº¦ç™¼å¸ƒè€…ï¼Œç”¨æ–¼ç™¼é€ç§»å‹•å‘½ä»¤ publisher_ = this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;, 10); // å‰µå»ºå·¡é‚æœå‹™ service_ = this-\u0026gt;create_service\u0026lt;patrol::srv::Patrol\u0026gt;( \u0026#34;patrol\u0026#34;, // æœå‹™åç¨± std::bind(\u0026amp;PatrolService::handle_patrol, this, std::placeholders::_1, std::placeholders::_2) // æœå‹™å›èª¿å‡½æ•¸ ); } // æœå‹™å›èª¿å‡½æ•¸å¯¦ç¾ void PatrolService::handle_patrol( const std::shared_ptr\u0026lt;patrol::srv::Patrol::Request\u0026gt; request, const std::shared_ptr\u0026lt;patrol::srv::Patrol::Response\u0026gt; response) { // æª¢æŸ¥ç›®æ¨™åº§æ¨™æ˜¯å¦åœ¨æœ‰æ•ˆç¯„åœå…§ï¼ˆ0-12ä¹‹é–“ï¼‰ if((request-\u0026gt;target_x \u0026gt; 0.0f \u0026amp;\u0026amp; request-\u0026gt;target_x \u0026lt; 12.0f) \u0026amp;\u0026amp; (request-\u0026gt;target_y \u0026gt; 0.0f \u0026amp;\u0026amp; request-\u0026gt;target_y \u0026lt; 12.0f)) { // æ›´æ–°ç›®æ¨™ä½ç½® targetX_ = request-\u0026gt;target_x; targetY_ = request-\u0026gt;target_y; response-\u0026gt;result = patrol::srv::Patrol::Response::SUCCESS; // è¨­ç½®æˆåŠŸç‹€æ…‹ } else { // åº§æ¨™ç„¡æ•ˆï¼Œè¨­ç½®å¤±æ•—ç‹€æ…‹ response-\u0026gt;result = patrol::srv::Patrol::Response::FAIL; } } // ç§»å‹•æ§åˆ¶å‡½æ•¸å¯¦ç¾ void PatrolService::move_to_target(double currentX, double currentY) { // å‰µå»ºé€Ÿåº¦è¨Šæ¯ç‰©ä»¶ auto twist = geometry_msgs::msg::Twist(); // è¨ˆç®—ç•¶å‰ä½ç½®åˆ°ç›®æ¨™ä½ç½®çš„å·®å€¼ double dx = targetX_ - currentX; double dy = targetY_ - currentY; // è¨ˆç®—è·é›¢ double distance = std::sqrt(dx * dx + dy * dy); // è¨ˆç®—ç›®æ¨™è§’åº¦ï¼ˆä½¿ç”¨ atan2 ç¢ºä¿è§’åº¦åœ¨æ­£ç¢ºçš„è±¡é™ï¼‰ double target_angle = std::atan2(dy, dx); // è¨ˆç®—è§’åº¦å·® double angle_diff = target_angle - turtlePose_-\u0026gt;theta; // å¦‚æœè·é›¢å¤§æ–¼é–¾å€¼ï¼ˆ0.1ï¼‰ï¼Œå‰‡ç¹¼çºŒç§»å‹• if (distance \u0026gt; 0.1) { // å¦‚æœè§’åº¦å·®å¤§æ–¼é–¾å€¼ï¼Œå„ªå…ˆèª¿æ•´æ–¹å‘ if(fabs(angle_diff) \u0026gt; 0.2) { twist.angular.z = 1.0 * angle_diff; // è§’é€Ÿåº¦èˆ‡è§’åº¦å·®æˆæ­£æ¯” } else { twist.linear.x = 0.5 * distance; // ç·šé€Ÿåº¦èˆ‡è·é›¢æˆæ­£æ¯” } // è¼¸å‡ºç•¶å‰ä½ç½®è³‡è¨Šï¼Œç”¨æ–¼é™¤éŒ¯ RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;currentX: %f, currentY: %f\u0026#34;, currentX, currentY); // ç™¼å¸ƒé€Ÿåº¦å‘½ä»¤ publisher_-\u0026gt;publish(twist); } } // ä¸»å‡½æ•¸ int main(int argc, char **argv) { rclcpp::init(argc, argv); // åˆå§‹åŒ– ROS2 auto node = std::make_shared\u0026lt;PatrolService\u0026gt;(\u0026#34;patrol_service_node\u0026#34;); // å‰µå»ºæœå‹™ç¯€é» rclcpp::spin(node); // é‹è¡Œç¯€é» rclcpp::shutdown(); // é—œé–‰ ROS2 return 0; } 3.2 å®¢æˆ¶ç«¯ç¨‹å¼ç¢¼ (client.cpp) #\r#include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; // ROS2 C++ å®¢æˆ¶ç«¯åº« #include \u0026#34;patrol/srv/patrol.hpp\u0026#34; // ç”Ÿæˆçš„æœå‹™ä»‹é¢ #include \u0026#34;rclcpp/time.hpp\u0026#34; // æ™‚é–“ç›¸é—œåŠŸèƒ½ #include \u0026lt;random\u0026gt; // éš¨æ©Ÿæ•¸ç”Ÿæˆ // å·¡é‚å®¢æˆ¶ç«¯é¡åˆ¥ï¼Œç¹¼æ‰¿è‡ª rclcpp::Node class Client: public rclcpp::Node { private: // ROS2 é€šä¿¡çµ„ä»¶ rclcpp::Client\u0026lt;patrol::srv::Patrol\u0026gt;::SharedPtr client_; // æœå‹™å®¢æˆ¶ç«¯ std::shared_ptr\u0026lt;patrol::srv::Patrol::Request\u0026gt; request_; // è«‹æ±‚ç‰©ä»¶ rclcpp::TimerBase::SharedPtr timer_; // å®šæ™‚å™¨ public: // å»ºæ§‹å‡½æ•¸ï¼Œåˆå§‹åŒ–ç¯€é» Client(std::string nodeName): Node(nodeName) { // å‰µå»ºæœå‹™å®¢æˆ¶ç«¯ this-\u0026gt;client_ = this-\u0026gt;create_client\u0026lt;patrol::srv::Patrol\u0026gt;(\u0026#34;patrol\u0026#34;); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Client has been created\u0026#34;); // å‰µå»ºå®šæ™‚å™¨ï¼Œæ¯5ç§’ç™¼é€ä¸€æ¬¡è«‹æ±‚ this-\u0026gt;timer_ = this-\u0026gt;create_wall_timer( std::chrono::seconds(5), std::bind(\u0026amp;Client::cb, this) ); } // è§£æ§‹å‡½æ•¸ï¼Œä½¿ç”¨é è¨­å¯¦ä½œ ~Client() = default; // å®šæ™‚å™¨å›èª¿å‡½æ•¸ void cb() { // ç­‰å¾…æœå‹™å¯ç”¨ while(!this-\u0026gt;client_-\u0026gt;wait_for_service(std::chrono::seconds(1))) { if(!rclcpp::ok()){ RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Interrupted while waiting for the service. Exiting.\u0026#34;); return; } RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Service not available, waiting again...\u0026#34;); } // å‰µå»ºè«‹æ±‚ç‰©ä»¶ this-\u0026gt;request_ = std::make_shared\u0026lt;patrol::srv::Patrol::Request\u0026gt;(); // ç”Ÿæˆéš¨æ©Ÿç›®æ¨™ä½ç½® std::random_device rd; std::mt19937 gen(rd()); std::uniform_real_distribution\u0026lt;double\u0026gt; dis_float(1.0, 10.0); // è¨­ç½®éš¨æ©Ÿç›®æ¨™ä½ç½® this-\u0026gt;request_-\u0026gt;target_x = dis_float(gen); this-\u0026gt;request_-\u0026gt;target_y = dis_float(gen); // è¼¸å‡ºè«‹æ±‚è³‡è¨Š RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Requesting patrol to (%f, %f)\u0026#34;, this-\u0026gt;request_-\u0026gt;target_x, this-\u0026gt;request_-\u0026gt;target_y); // ç™¼é€éåŒæ­¥è«‹æ±‚ auto result = this-\u0026gt;client_-\u0026gt;async_send_request( this-\u0026gt;request_, [this](rclcpp::Client\u0026lt;patrol::srv::Patrol\u0026gt;::SharedFuture future) { auto response = future.get(); if(response-\u0026gt;result == patrol::srv::Patrol::Response::SUCCESS) { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;Patrol to (%f, %f) successful\u0026#34;, this-\u0026gt;request_-\u0026gt;target_x, this-\u0026gt;request_-\u0026gt;target_y); } else { RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;Patrol to (%f, %f) failed\u0026#34;, this-\u0026gt;request_-\u0026gt;target_x, this-\u0026gt;request_-\u0026gt;target_y); } } ); } }; // ä¸»å‡½æ•¸ int main(int argc, char **argv) { rclcpp::init(argc, argv); // åˆå§‹åŒ– ROS2 auto client = std::make_shared\u0026lt;Client\u0026gt;(\u0026#34;patrol_client_node\u0026#34;); // å‰µå»ºå®¢æˆ¶ç«¯ç¯€é» rclcpp::spin(client); // é‹è¡Œç¯€é» rclcpp::shutdown(); // é—œé–‰ ROS2 return 0; } 4. é…ç½®æ–‡ä»¶èªªæ˜ #\r4.1 CMakeLists.txt #\r# æŒ‡å®š CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚ cmake_minimum_required(VERSION 3.8) # å®šç¾©å°ˆæ¡ˆåç¨± project(patrol) # å¦‚æœä½¿ç”¨ GCC æˆ– Clang ç·¨è­¯å™¨ï¼Œæ·»åŠ ç·¨è­¯è­¦å‘Šé¸é … if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES \u0026#34;Clang\u0026#34;) add_compile_options(-Wall -Wextra -Wpedantic) endif() # å°‹æ‰¾ä¸¦è¼‰å…¥æ‰€éœ€çš„ä¾è³´å¥—ä»¶ find_package(ament_cmake REQUIRED) # ROS 2 CMake å·¥å…· find_package(rclcpp REQUIRED) # ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« find_package(std_msgs REQUIRED) # æ¨™æº–è¨Šæ¯é¡å‹ find_package(rosidl_default_generators REQUIRED)# æœå‹™ä»‹é¢ç”Ÿæˆå™¨ find_package(turtlesim REQUIRED) # çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ find_package(geometry_msgs REQUIRED) # å¹¾ä½•è¨Šæ¯é¡å‹ # ç”Ÿæˆæœå‹™ä»‹é¢ rosidl_generate_interfaces(${PROJECT_NAME} \u0026#34;srv/Patrol.srv\u0026#34; ) # å‰µå»ºå¯åŸ·è¡Œæª” add_executable(service_node src/service.cpp) # ç‚ºå¯åŸ·è¡Œæª”æ·»åŠ ä¾è³´ ament_target_dependencies(service_node rclcpp # ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« std_msgs # æ¨™æº–è¨Šæ¯é¡å‹ geometry_msgs # å¹¾ä½•è¨Šæ¯é¡å‹ turtlesim # çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ ) # å®‰è£å¯åŸ·è¡Œæª”åˆ°æŒ‡å®šç›®éŒ„ install(TARGETS service_node DESTINATION lib/${PROJECT_NAME} ) # å®Œæˆ ament å¥—ä»¶çš„é…ç½® ament_package() 4.2 package.xml #\r\u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;!-- æŒ‡å®š XML æ¨¡å¼å®šç¾©ï¼ˆXSDï¼‰æª”æ¡ˆçš„ä½ç½®ï¼Œç”¨æ–¼é©—è­‰æ­¤æª”æ¡ˆçš„æ ¼å¼ --\u0026gt; \u0026lt;?xml-model href=\u0026#34;http://download.ros.org/schema/package_format3.xsd\u0026#34; schematypens=\u0026#34;http://www.w3.org/2001/XMLSchema\u0026#34;?\u0026gt; \u0026lt;!-- ROS 2 å¥—ä»¶é…ç½®æª”æ¡ˆï¼Œä½¿ç”¨æ ¼å¼ç‰ˆæœ¬ 3 --\u0026gt; \u0026lt;package format=\u0026#34;3\u0026#34;\u0026gt; \u0026lt;!-- å¥—ä»¶åŸºæœ¬è³‡è¨Š --\u0026gt; \u0026lt;name\u0026gt;patrol\u0026lt;/name\u0026gt; \u0026lt;!-- å¥—ä»¶åç¨± --\u0026gt; \u0026lt;version\u0026gt;0.0.0\u0026lt;/version\u0026gt; \u0026lt;!-- å¥—ä»¶ç‰ˆæœ¬ --\u0026gt; \u0026lt;description\u0026gt;TODO: Package description\u0026lt;/description\u0026gt; \u0026lt;!-- å¥—ä»¶æè¿° --\u0026gt; \u0026lt;maintainer email=\u0026#34;tienyao@todo.todo\u0026#34;\u0026gt;tienyao\u0026lt;/maintainer\u0026gt; \u0026lt;!-- ç¶­è­·è€…è³‡è¨Š --\u0026gt; \u0026lt;license\u0026gt;TODO: License declaration\u0026lt;/license\u0026gt; \u0026lt;!-- æˆæ¬Šè²æ˜ --\u0026gt; \u0026lt;!-- å»ºæ§‹å·¥å…·ä¾è³´ --\u0026gt; \u0026lt;buildtool_depend\u0026gt;ament_cmake\u0026lt;/buildtool_depend\u0026gt; \u0026lt;!-- ä½¿ç”¨ ament_cmake ä½œç‚ºå»ºæ§‹å·¥å…· --\u0026gt; \u0026lt;!-- å»ºæ§‹æ™‚ä¾è³´ --\u0026gt; \u0026lt;build_depend\u0026gt;rosidl_default_generators\u0026lt;/build_depend\u0026gt;\u0026lt;!-- ç”¨æ–¼ç”Ÿæˆä»‹é¢æª”æ¡ˆ --\u0026gt; \u0026lt;!-- åŸ·è¡Œæ™‚ä¾è³´ --\u0026gt; \u0026lt;exec_depend\u0026gt;rosidl_default_runtime\u0026lt;/exec_depend\u0026gt; \u0026lt;!-- åŸ·è¡Œæ™‚éœ€è¦çš„ä»‹é¢é‹è¡Œåº« --\u0026gt; \u0026lt;!-- å»ºæ§‹å’ŒåŸ·è¡Œéƒ½éœ€è¦çš„ä¾è³´ --\u0026gt; \u0026lt;depend\u0026gt;rclcpp\u0026lt;/depend\u0026gt; \u0026lt;!-- ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« --\u0026gt; \u0026lt;depend\u0026gt;std_msgs\u0026lt;/depend\u0026gt; \u0026lt;!-- æ¨™æº–è¨Šæ¯é¡å‹ --\u0026gt; \u0026lt;depend\u0026gt;turtlesim\u0026lt;/depend\u0026gt; \u0026lt;!-- çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ --\u0026gt; \u0026lt;depend\u0026gt;geometry_msgs\u0026lt;/depend\u0026gt; \u0026lt;!-- å¹¾ä½•è¨Šæ¯é¡å‹ --\u0026gt; \u0026lt;!-- è²æ˜æ­¤å¥—ä»¶æ˜¯ä¸€å€‹ä»‹é¢å¥—ä»¶ --\u0026gt; \u0026lt;member_of_group\u0026gt;rosidl_interface_packages\u0026lt;/member_of_group\u0026gt; \u0026lt;!-- æ¸¬è©¦ç›¸é—œä¾è³´ --\u0026gt; \u0026lt;test_depend\u0026gt;ament_lint_auto\u0026lt;/test_depend\u0026gt; \u0026lt;!-- è‡ªå‹•åŒ–ç¨‹å¼ç¢¼æª¢æŸ¥å·¥å…· --\u0026gt; \u0026lt;test_depend\u0026gt;ament_lint_common\u0026lt;/test_depend\u0026gt; \u0026lt;!-- å¸¸ç”¨ç¨‹å¼ç¢¼æª¢æŸ¥è¦å‰‡ --\u0026gt; \u0026lt;!-- ROS 2 å¥—ä»¶ç‰¹å®šè³‡è¨Š --\u0026gt; \u0026lt;export\u0026gt; \u0026lt;build_type\u0026gt;ament_cmake\u0026lt;/build_type\u0026gt; \u0026lt;!-- æŒ‡å®šä½¿ç”¨ ament_cmake å»ºæ§‹ç³»çµ± --\u0026gt; \u0026lt;/export\u0026gt; \u0026lt;/package\u0026gt; åŸ·è¡Œæ–¹å¼ #\rç·¨è­¯å°ˆæ¡ˆ cd ros2_ws colcon build --packages-select patrol åŸ·è¡Œç¯€é» # çµ‚ç«¯æ©Ÿ 1ï¼šå•Ÿå‹• turtlesim ros2 run turtlesim turtlesim_node # çµ‚ç«¯æ©Ÿ 2ï¼šå•Ÿå‹•å·¡é‚æœå‹™ç«¯ ros2 run patrol service_node # çµ‚ç«¯æ©Ÿ 3ï¼šå•Ÿå‹•å·¡é‚å®¢æˆ¶ç«¯ ros2 run patrol client_node çµèª #\ré€éé€™å€‹å°ˆæ¡ˆï¼Œæˆ‘å€‘å­¸ç¿’äº†å¦‚ä½•åœ¨ ROS2 ä¸­çµåˆ Service å’Œ Client ä¾†å¯¦ç¾æ©Ÿå™¨äººçš„éš¨æ©Ÿé‹å‹•æ§åˆ¶ã€‚é€™ç¨®çµåˆä¸åŒé€šä¿¡æ©Ÿåˆ¶çš„æ–¹å¼ï¼Œèƒ½å¤ æ›´éˆæ´»åœ°è™•ç†å„ç¨®æ§åˆ¶éœ€æ±‚ã€‚å®Œæ•´çš„ç¨‹å¼ç¢¼å¯¦ç¾å’Œè©³ç´°çš„æ³¨è§£ï¼Œæœ‰åŠ©æ–¼ç†è§£ ROS2 çš„æ ¸å¿ƒæ¦‚å¿µå’Œå¯¦ä½œæ–¹æ³•ã€‚\n","date":"11 February 2025","externalUrl":null,"permalink":"/posts/ros2_node_srvice_client/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Service å’Œ Client) \r\n    \u003cdiv id=\"-ros2-%E5%B7%A1%E9%82%8F%E6%9C%8D%E5%8B%99%E7%AF%80%E9%BB%9E%E9%96%8B%E7%99%BC%E6%95%99%E5%AD%B8%E4%BD%BF%E7%94%A8-service-%E5%92%8C-client\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-%E5%B7%A1%E9%82%8F%E6%9C%8D%E5%8B%99%E7%AF%80%E9%BB%9E%E9%96%8B%E7%99%BC%E6%95%99%E5%AD%B8%E4%BD%BF%E7%94%A8-service-%E5%92%8C-client\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \r\n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡å¯¦ä½œä¸€å€‹ ROS2 çš„å·¡é‚æœå‹™ç¯€é»ï¼Œé€é Service å’Œ Topic çš„çµåˆä¾†æ§åˆ¶ turtlesim ä¸­çš„çƒé¾œç§»å‹•åˆ°æŒ‡å®šä½ç½®ã€‚é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†å¦‚ä½•åœ¨ ROS2 ä¸­å¯¦ç¾æœå‹™ç«¯ï¼ˆServerï¼‰å’Œå®¢æˆ¶ç«¯ï¼ˆClientï¼‰çš„é€šä¿¡ï¼Œä»¥åŠåŸºæœ¬çš„é‹å‹•æ§åˆ¶ã€‚\u003c/p\u003e","title":"ğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Service å’Œ Client)","type":"posts"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/client/","section":"Tags","summary":"","title":"Client","type":"tags"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/service/","section":"Tags","summary":"","title":"Service","type":"tags"},{"content":"\rğŸ”¢ æ•¸ä½é™¤æ³•å™¨è¨­è¨ˆèˆ‡å¯¦ç¾ - åŸºæ–¼FPGAçš„ç§»ä½é™¤æ³•ç®—æ³• #\rå‰è¨€ #\råœ¨æ•¸ä½é›»è·¯è¨­è¨ˆä¸­ï¼Œé™¤æ³•é‹ç®—æ˜¯ä¸€å€‹é‡è¦ä½†ç›¸å°è¤‡é›œçš„ç®—è¡“æ“ä½œã€‚æœ¬æ–‡å°‡ä»‹ç´¹ä¸€å€‹åŸºæ–¼FPGAçš„32ä½å…ƒé™¤æ³•å™¨è¨­è¨ˆï¼Œæ¡ç”¨ç§»ä½é™¤æ³•ç®—æ³•å¯¦ç¾ã€‚é€™å€‹è¨­è¨ˆä¸åƒ…å…·æœ‰è‰¯å¥½çš„å¯æ“´å±•æ€§ï¼Œé‚„æä¾›äº†å®Œæ•´çš„æ¸¬è©¦é©—è­‰å¹³å°ã€‚\nä¸€ã€è¨­è¨ˆç›®æ¨™ #\rå¯¦ç¾32ä½å…ƒç„¡è™Ÿæ•¸é™¤æ³•é‹ç®— æ”¯æ´å¯åƒæ•¸åŒ–çš„è³‡æ–™ä½å¯¬ æä¾›å®Œæ•´çš„æ§åˆ¶æ©Ÿåˆ¶ ç¢ºä¿é‹ç®—çµæœçš„æº–ç¢ºæ€§ äºŒã€è¨­è¨ˆæ¶æ§‹ #\r2.1 æ¨¡çµ„èªªæ˜ #\rdiv_go_tick: å•Ÿå‹•ä¿¡è™Ÿè™•ç†æ¨¡çµ„\nåŠŸèƒ½ï¼šç”¢ç”Ÿå–®ä¸€æ™‚é˜é€±æœŸçš„è§¸ç™¼è„ˆè¡ é¿å…å¤šé€±æœŸè§¸ç™¼å•é¡Œ division: é™¤æ³•å™¨æ ¸å¿ƒæ¨¡çµ„\nåŠŸèƒ½ï¼šåŸ·è¡Œç§»ä½é™¤æ³•é‹ç®— æä¾›å•†æ•¸å’Œç§»ä½è¨ˆæ•¸è¼¸å‡º ä¸‰ã€å®Œæ•´ç¨‹å¼ç¢¼ #\r3.1 è¨Šè™Ÿé‚Šç·£æª¢æ¸¬æ¨¡çµ„ #\r// ********************************************************************************* // è¨Šè™Ÿé‚Šç·£æª¢æ¸¬æ¨¡çµ„ // åŠŸèƒ½ï¼šæª¢æ¸¬è¼¸å…¥è¨Šè™Ÿçš„ä¸Šå‡é‚Šç·£ï¼Œç”¢ç”Ÿä¸€å€‹æ™‚é˜é€±æœŸçš„è„ˆè¡ // æ‡‰ç”¨ï¼šç”¨æ–¼é™¤æ³•å™¨çš„å•Ÿå‹•æ§åˆ¶ // ********************************************************************************* module div_go_tick ( input clk, // æ™‚é˜è¼¸å…¥ input nRst, // ä½é›»ä½æœ‰æ•ˆçš„é‡ç½®ä¿¡è™Ÿ input iSignal, // è¼¸å…¥è¨Šè™Ÿ output oSignal // è¼¸å‡ºè„ˆè¡ä¿¡è™Ÿ ); reg [1:0] rvSignal_d, rvSignal_q; always @(posedge clk or negedge nRst) begin if(!nRst) rvSignal_q \u0026lt;= 2\u0026#39;b00; else rvSignal_q \u0026lt;= rvSignal_d; end always @(*) begin rvSignal_d = {rvSignal_q[0], iSignal}; end assign oSignal = (rvSignal_q == 2\u0026#39;b01) ? 1\u0026#39;b1 : 1\u0026#39;b0; endmodule 3.2 å¯åƒæ•¸åŒ–çš„é™¤æ³•å™¨æ¨¡çµ„ #\rmodule division#( parameter DATA_WIDTH = 32 // è³‡æ–™ä½å¯¬åƒæ•¸ï¼Œé è¨­32ä½å…ƒ ) ( input clk, // æ™‚è„ˆè¼¸å…¥ input nRst, // ä½é›»ä½æœ‰æ•ˆçš„é‡ç½®ä¿¡è™Ÿ input [DATA_WIDTH-1:0] ivDivisor, // é™¤æ•¸è¼¸å…¥ input [DATA_WIDTH-1:0] ivDividend, // è¢«é™¤æ•¸è¼¸å…¥ output [DATA_WIDTH-1:0] ovQuotient, // å•†æ•¸è¼¸å‡º output [7:0] ovShift, // ç§»ä½è¨ˆæ•¸è¼¸å‡º input iGoTick, // é–‹å§‹é‹ç®—è§¸ç™¼ä¿¡è™Ÿ output oDone // é‹ç®—å®Œæˆä¿¡è™Ÿ ); // å¸¸æ•¸å®šç¾© localparam DATA_WIDTH_ = DATA_WIDTH - 1; // å…§éƒ¨æš«å­˜å™¨å®£å‘Š reg [DATA_WIDTH-1:0] rvDivisor_d, rvDivisor_q; reg [DATA_WIDTH-1:0] rvQuotientShift_d, rvQuotientShift_q; reg [DATA_WIDTH-1:0] rvRemainder_d, rvRemainder_q; wire [DATA_WIDTH-1:0] wvRemainder; reg [DATA_WIDTH-1:0] rvQuotient_d, rvQuotient_q; reg [7:0] rvShift_d, rvShift_q; // æ§åˆ¶ä¿¡è™Ÿæš«å­˜å™¨ reg rFlag_d, rFlag_q; reg [7:0] rvProcessCnt_d, rvProcessCnt_q; wire addProcessCnt, endProcessCnt; reg [7:0] rvShiftCnt_d, rvShiftCnt_q; reg [DATA_WIDTH-1:0] rvDivisorShift_d, rvDivisorShift_q; reg rProcessEn_d, rProcessEn_q; wire [DATA_WIDTH-1:0] wvCompare; reg rDone_d, rDone_q; //============================================================================= // ç¬¬ä¸€éšæ®µï¼šåˆå§‹å°é½Š // é€šéç§»ä½æ“ä½œæ‰¾åˆ°æ­£ç¢ºçš„èµ·å§‹ä½ç½® //============================================================================= // æ¯”è¼ƒé‚è¼¯ï¼šè¢«é™¤æ•¸æ¸›å»ç§»ä½å¾Œçš„é™¤æ•¸ assign wvCompare = ivDividend - rvDivisorShift_q; // é™¤æ•¸ç§»ä½æš«å­˜å™¨ always @(posedge clk or negedge nRst) begin if(!nRst) rvDivisorShift_q \u0026lt;= 8\u0026#39;h0; else rvDivisorShift_q \u0026lt;= rvDivisorShift_d; end // é™¤æ•¸ç§»ä½æ§åˆ¶é‚è¼¯ always @(*) begin if(endProcessCnt) rvDivisorShift_d = 8\u0026#39;h0; else if(iGoTick) rvDivisorShift_d = ivDivisor; else if(wvCompare[DATA_WIDTH-1] == 1\u0026#39;b0) // å¦‚æœæ¯”è¼ƒçµæœç‚ºæ­£ rvDivisorShift_d = rvDivisorShift_q \u0026lt;\u0026lt; 1; // ç¹¼çºŒå·¦ç§» else rvDivisorShift_d = rvDivisorShift_q; end // ç§»ä½è¨ˆæ•¸å™¨é‚è¼¯ always @(posedge clk or negedge nRst) begin if(!nRst) rvShiftCnt_q \u0026lt;= 8\u0026#39;h0; else rvShiftCnt_q \u0026lt;= rvShiftCnt_d; end // ç§»ä½è¨ˆæ•¸æ§åˆ¶ always @(*) begin if(iGoTick || !rFlag_q) rvShiftCnt_d = 8\u0026#39;h0; else if(wvCompare[DATA_WIDTH-1] == 1\u0026#39;b0) rvShiftCnt_d = rvShiftCnt_q + 1\u0026#39;b1; else rvShiftCnt_d = rvShiftCnt_q; end //============================================================================= // è™•ç†æ§åˆ¶é‚è¼¯ //============================================================================= // è™•ç†å•Ÿç”¨æ§åˆ¶ always @(posedge clk or negedge nRst) begin if(!nRst) rProcessEn_q \u0026lt;= 1\u0026#39;b0; else rProcessEn_q \u0026lt;= rProcessEn_d; end always @(*) begin if(iGoTick || endProcessCnt) rProcessEn_d = 1\u0026#39;b0; else if(wvCompare[DATA_WIDTH-1] == 1\u0026#39;b1) // ç•¶æ¯”è¼ƒçµæœç‚ºè² æ™‚é–‹å§‹è™•ç† rProcessEn_d = 1\u0026#39;b1; else rProcessEn_d = rProcessEn_q; end // é‹ç®—ç‹€æ…‹æ¨™èªŒæ§åˆ¶ always @(posedge clk or negedge nRst) begin if(!nRst) rFlag_q \u0026lt;= 1\u0026#39;b0; else rFlag_q \u0026lt;= rFlag_d; end always @(*) begin if(endProcessCnt) rFlag_d = 1\u0026#39;b0; else if(iGoTick) rFlag_d = 1\u0026#39;b1; else rFlag_d = rFlag_q; end //============================================================================= // ç¬¬äºŒéšæ®µï¼šåŸ·è¡Œé™¤æ³•é‹ç®— //============================================================================= // é¤˜æ•¸è¨ˆç®— assign wvRemainder = rvRemainder_q - rvDivisor_q; // è™•ç†è¨ˆæ•¸å™¨æ§åˆ¶ assign addProcessCnt = rProcessEn_q; assign endProcessCnt = addProcessCnt \u0026amp;\u0026amp; (rvProcessCnt_q == DATA_WIDTH); // è™•ç†è¨ˆæ•¸å™¨é‚è¼¯ always @(posedge clk or negedge nRst) begin if(!nRst) rvProcessCnt_q \u0026lt;= 8\u0026#39;h0; else rvProcessCnt_q \u0026lt;= rvProcessCnt_d; end always @(*) begin if(endProcessCnt) rvProcessCnt_d = 8\u0026#39;h0; else if(addProcessCnt) rvProcessCnt_d = rvProcessCnt_q + 1\u0026#39;b1; else rvProcessCnt_d = rvProcessCnt_q; end // æœ€çµ‚è¼¸å‡ºè³¦å€¼ assign ovQuotient = rvQuotient_q; assign ovShift = rvShift_q; assign oDone = rDone_q; endmodule 3.3 æ¸¬è©¦å¹³å° #\r// ********************************************************************************* // æ¸¬è©¦å¹³å° // ********************************************************************************* `timescale 1ns/1ps module division_tb; localparam DATA_WIDTH = 32; // è¨­å®šè³‡æ–™ä½å¯¬ç‚º32ä½å…ƒ // æ™‚é˜å’Œæ§åˆ¶ä¿¡è™Ÿ reg clk; // ç³»çµ±æ™‚é˜ reg nRst; // ä½é›»ä½æœ‰æ•ˆçš„é‡ç½®ä¿¡è™Ÿ reg [DATA_WIDTH-1:0] divisor1; // é™¤æ•¸è¼¸å…¥ reg [DATA_WIDTH-1:0] dividend1; // è¢«é™¤æ•¸è¼¸å…¥ wire [DATA_WIDTH-1:0] quotient1; // å•†æ•¸è¼¸å‡º wire [7:0] shift1; // ç§»ä½è¨ˆæ•¸è¼¸å‡º reg go; // å•Ÿå‹•ä¿¡è™Ÿ wire goTick; // é‚Šç·£æª¢æ¸¬å¾Œçš„å•Ÿå‹•è„ˆè¡ // é‚Šç·£æª¢æ¸¬æ¨¡çµ„å¯¦ä¾‹åŒ– div_go_tick div_go_tick_inst ( .clk (clk), .nRst (nRst), .iSignal (go), // è¼¸å…¥å•Ÿå‹•ä¿¡è™Ÿ .oSignal (goTick) // è¼¸å‡ºè„ˆè¡ä¿¡è™Ÿ ); // é™¤æ³•å™¨æ¨¡çµ„å¯¦ä¾‹åŒ– division #( .DATA_WIDTH(DATA_WIDTH) ) DUT ( .clk (clk), .nRst (nRst), .ivDivisor (divisor1), .ivDividend (dividend1), .ovQuotient (quotient1), .ovShift (shift1), .iGoTick (goTick) ); // æ™‚é˜ç”¢ç”Ÿå™¨ï¼šé€±æœŸç‚º20ns (50MHz) initial clk = 1\u0026#39;b0; always #10 clk = ~clk; // ç³»çµ±é‡ç½®ä»»å‹™ task SYSTEM_RESET; begin nRst = 1\u0026#39;b0; // å•Ÿå‹•é‡ç½® repeat(100) @(posedge clk); // ç­‰å¾…100å€‹æ™‚é˜é€±æœŸ nRst = 1\u0026#39;b1; // é‡‹æ”¾é‡ç½® end endtask // æ¸¬è©¦ç¨‹åº initial begin // åˆå§‹åŒ–å’Œç³»çµ±é‡ç½® SYSTEM_RESET; go = 0; #1000; // æ¸¬è©¦æ¡ˆä¾‹1: 300 Ã· 300 = 1 divisor1 = 300; dividend1 = 300; #100; go = 1; #100; go = 0; // æ¸¬è©¦æ¡ˆä¾‹2: 13 Ã· 3 = 4.333... #1000; divisor1 = 3; dividend1 = 13; #100; go = 1; #100; go = 0; // æ¸¬è©¦æ¡ˆä¾‹3: 280 Ã· 256 = 1.09375 #1000; divisor1 = 256; dividend1 = 280; #100; go = 1; #100; go = 0; // æ¸¬è©¦æ¡ˆä¾‹4: 83 Ã· 19 = 4.368421... #1000; divisor1 = 19; dividend1 = 83; #100; go = 1; #100; go = 0; // ç­‰å¾…é‹ç®—å®Œæˆ #300000; // çµæŸæ¨¡æ“¬ $stop; end endmodule å››ã€æ³¢å½¢åˆ†æ #\r4.1 å¯¦éš›æ³¢å½¢çµæœ #\ræ³¢å½¢èªªæ˜ï¼š\nå•Ÿå‹•æ§åˆ¶ä¿¡è™Ÿ\niSignal è§¸ç™¼å¾Œç”¢ç”Ÿ goTick è„ˆè¡ å–®ä¸€æ™‚é˜é€±æœŸçš„æ§åˆ¶ä¿¡è™Ÿ é™¤æ³•é‹ç®—éç¨‹\nåˆå§‹å°é½Šéšæ®µ ç§»ä½é™¤æ³•é‹ç®—éšæ®µ çµæœè¼¸å‡ºéšæ®µ é—œéµæ™‚åºé»\né‹ç®—é–‹å§‹æ™‚é–“é» å•†æ•¸ç”¢ç”Ÿæ™‚é–“é» å®Œæˆä¿¡è™Ÿç”¢ç”Ÿæ™‚é–“é» äº”ã€çµè«– #\ræœ¬è¨­è¨ˆå¯¦ç¾äº†ä¸€å€‹ç©©å®šå¯é çš„é™¤æ³•å™¨ï¼Œå…·æœ‰ï¼š\nè‰¯å¥½çš„å¯æ“´å±•æ€§ æº–ç¢ºçš„é‹ç®—çµæœ å®Œæ•´çš„æ§åˆ¶æ©Ÿåˆ¶ æ¸…æ™°çš„æ™‚åºé—œä¿‚ å…­ã€æœªä¾†å„ªåŒ–æ–¹å‘ #\rå¢åŠ ç®¡ç·šç´šæ•¸æé«˜é‹ç®—æ•ˆç‡ æ·»åŠ é™¤æ•¸ç‚ºé›¶æª¢æŸ¥ æ”¯æ´æœ‰è™Ÿæ•¸é‹ç®— å„ªåŒ–é—œéµè·¯å¾‘é™ä½å»¶é² ","date":"11 February 2025","externalUrl":null,"permalink":"/posts/fpga_divider/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ”¢ æ•¸ä½é™¤æ³•å™¨è¨­è¨ˆèˆ‡å¯¦ç¾ - åŸºæ–¼FPGAçš„ç§»ä½é™¤æ³•ç®—æ³• \r\n    \u003cdiv id=\"-%E6%95%B8%E4%BD%8D%E9%99%A4%E6%B3%95%E5%99%A8%E8%A8%AD%E8%A8%88%E8%88%87%E5%AF%A6%E7%8F%BE---%E5%9F%BA%E6%96%BCfpga%E7%9A%84%E7%A7%BB%E4%BD%8D%E9%99%A4%E6%B3%95%E7%AE%97%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-%E6%95%B8%E4%BD%8D%E9%99%A4%E6%B3%95%E5%99%A8%E8%A8%AD%E8%A8%88%E8%88%87%E5%AF%A6%E7%8F%BE---%E5%9F%BA%E6%96%BCfpga%E7%9A%84%E7%A7%BB%E4%BD%8D%E9%99%A4%E6%B3%95%E7%AE%97%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \r\n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨æ•¸ä½é›»è·¯è¨­è¨ˆä¸­ï¼Œé™¤æ³•é‹ç®—æ˜¯ä¸€å€‹é‡è¦ä½†ç›¸å°è¤‡é›œçš„ç®—è¡“æ“ä½œã€‚æœ¬æ–‡å°‡ä»‹ç´¹ä¸€å€‹åŸºæ–¼FPGAçš„32ä½å…ƒé™¤æ³•å™¨è¨­è¨ˆï¼Œæ¡ç”¨ç§»ä½é™¤æ³•ç®—æ³•å¯¦ç¾ã€‚é€™å€‹è¨­è¨ˆä¸åƒ…å…·æœ‰è‰¯å¥½çš„å¯æ“´å±•æ€§ï¼Œé‚„æä¾›äº†å®Œæ•´çš„æ¸¬è©¦é©—è­‰å¹³å°ã€‚\u003c/p\u003e","title":"ğŸ”¢ æ•¸ä½é™¤æ³•å™¨è¨­è¨ˆèˆ‡å¯¦ç¾ - åŸºæ–¼FPGAçš„ç§»ä½é™¤æ³•ç®—æ³•","type":"posts"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/fpga/","section":"Tags","summary":"","title":"FPGA","type":"tags"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/verilog/","section":"Tags","summary":"","title":"Verilog","type":"tags"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/categories/verilog/","section":"Categories","summary":"","title":"Verilog","type":"categories"},{"content":"\rğŸ”§ Verilog HDL è¨Šè™Ÿå‘½ååŸå‰‡ #\rå‰è¨€ #\råœ¨æ•¸ä½é›»è·¯è¨­è¨ˆä¸­ï¼Œè‰¯å¥½çš„è¨Šè™Ÿå‘½ååŸå‰‡èˆ‡ coding style åŒç­‰é‡è¦ã€‚ç‰¹åˆ¥æ˜¯åœ¨å¤§å‹è¨­è¨ˆå°ˆæ¡ˆä¸­ï¼Œæ¸…æ™°çš„å‘½åæ–¹å¼ä¸åƒ…èƒ½è®“ä»£ç¢¼æ›´å®¹æ˜“ç¶­è­·ï¼Œä¹Ÿèƒ½å¹«åŠ©åœ˜éšŠæˆå“¡å¿«é€Ÿç†è§£è¨Šè™Ÿç‰¹æ€§ä¸¦é€²è¡Œé™¤éŒ¯ã€‚æœ¬æ–‡å°‡ä»‹ç´¹å¸¸ç”¨çš„ Verilog HDL è¨Šè™Ÿå‘½åè¦å‰‡ã€‚\nå°ˆæ¡ˆæ¶æ§‹ #\r1. FPGA å¤–éƒ¨è¼¸å…¥è¼¸å‡ºå‘½å #\rFPGA çš„å¤–éƒ¨æ¥å£ï¼ˆtop moduleï¼‰ä½¿ç”¨å…¨å¤§å¯«å­—æ¯ï¼Œä¸¦ç”¨åº•ç·šå€åˆ†å–®å­—ï¼š\ninput CLOCK_50 // 50MHz ç³»çµ±æ™‚è„ˆ output LED_STATUS // LED ç‹€æ…‹è¼¸å‡º input KEY_N // æŒ‰éµè¼¸å…¥ï¼ˆä½æ…‹å‹•ä½œï¼‰ 2. æ¨¡çµ„å…§éƒ¨è¨Šè™Ÿå‘½å #\r2.1 å­æ¨¡çµ„è¼¸å…¥è¼¸å‡ºå‘½å #\rè¼¸å…¥è¨Šè™Ÿï¼šå‰ç¶´ iï¼ˆé™¤ç³»çµ±æ™‚è„ˆåŠé‡ç½®è¼¸å…¥å¤–ï¼‰\ninput clk // ç³»çµ±æ™‚è„ˆè¼¸å…¥ input nRst // é‡ç½®è¼¸å…¥(ä½æ…‹å‹•ä½œ) input [7:0] iData // è³‡æ–™è¼¸å…¥ è¼¸å‡ºè¨Šè™Ÿï¼šå‰ç¶´ o\noutput oValid // æœ‰æ•ˆè¨Šè™Ÿè¼¸å‡º output [15:0] oResult // çµæœè¼¸å‡º 2.2 è¨Šè™Ÿé¡å‹æ¨™ç¤º #\ræš«å­˜å™¨é¡å‹ï¼šå‰ç¶´ r\nreg rState // ç‹€æ…‹æš«å­˜å™¨ reg [7:0] rCounter // è¨ˆæ•¸å™¨æš«å­˜å™¨ ç·šç¶²é¡å‹ï¼šå‰ç¶´ w\nwire wReady // å°±ç·’è¨Šè™Ÿ wire [15:0] wSum // ç¸½å’Œè¨Šè™Ÿ 2.3 å‘é‡é¡å‹è¨Šè™Ÿ #\rè¼¸å…¥å‘é‡ï¼šå‰ç¶´ iv\ninput [7:0] ivData // 8ä½å…ƒè³‡æ–™è¼¸å…¥ è¼¸å‡ºå‘é‡ï¼šå‰ç¶´ ov\noutput [15:0] ovResult // 16ä½å…ƒçµæœè¼¸å‡º æš«å­˜å™¨å‘é‡ï¼šå‰ç¶´ rv\nreg [31:0] rvBuffer // 32ä½å…ƒç·©è¡æš«å­˜å™¨ ç·šç¶²å‘é‡ï¼šå‰ç¶´ wv\nwire [7:0] wvSum // 8ä½å…ƒç¸½å’Œç·šç¶² 2.4 ç‰¹æ®Šè¨Šè™Ÿæ¨™ç¤º #\rD è§¸ç™¼å™¨ç›¸é—œï¼š reg rData_d // D è§¸ç™¼å™¨è¼¸å…¥ç«¯ reg rData_q // D è§¸ç™¼å™¨è¼¸å‡ºç«¯ å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹ #\rè¨Šè™Ÿé‚Šç·£æª¢æ¸¬å™¨ #\rmodule tick_gen ( input clk, // ç³»çµ±æ™‚è„ˆ input nRst, // é‡ç½®è¨Šè™Ÿï¼ˆä½æ…‹å‹•ä½œï¼‰ input iSignal, // è¼¸å…¥è¨Šè™Ÿ output oSignalTick // è¨Šè™Ÿä¸Šå‡é‚Šç·£è„ˆè¡ ); reg [1:0] rvSignal_d, rvSignal_q; // è¨Šè™Ÿå»¶é²éˆ // åŒæ­¥æ™‚åºé‚è¼¯ always @(posedge clk or negedge nRst) begin if(!nRst) rvSignal_q \u0026lt;= 2\u0026#39;h0; else rvSignal_q \u0026lt;= rvSignal_d; end // çµ„åˆé‚è¼¯ always @(*) begin rvSignal_d = {rvSignal_q[0], iSignal}; end // æª¢æ¸¬ä¸Šå‡é‚Šç·£ï¼ˆ01åºåˆ—ï¼‰ assign oSignalTick = (rvSignal_q == 2\u0026#39;b01) ? 1\u0026#39;b1 : 1\u0026#39;b0; endmodule é€™å€‹ç¯„ä¾‹å±•ç¤ºäº†ï¼š\nç³»çµ±è¨Šè™Ÿï¼ˆclk, nRstï¼‰ä¸åŠ å‰ç¶´ ä¸€èˆ¬è¼¸å…¥åŠ  i å‰ç¶´ ä¸€èˆ¬è¼¸å‡ºåŠ  o å‰ç¶´ å‘é‡å‹æš«å­˜å™¨åŠ  rv å‰ç¶´ D è§¸ç™¼å™¨ç›¸é—œè¨Šè™ŸåŠ  _d å’Œ _q å¾Œç¶´ å‘½åè¦ç¯„å»ºè­° #\r1. ä¸€è‡´æ€§åŸå‰‡ #\råœ¨åŒä¸€å°ˆæ¡ˆä¸­ä¿æŒå‘½åé¢¨æ ¼ä¸€è‡´ éµå¾ªåœ˜éšŠæ—¢å®šçš„å‘½åè¦ç¯„ 2. æ¸…æ™°æ€§åŸå‰‡ #\ré¸æ“‡å…·æè¿°æ€§çš„åç¨± é¿å…éæ–¼ç°¡ç•¥æˆ–é›£ä»¥ç†è§£çš„ç¸®å¯« çµèª #\rè‰¯å¥½çš„è¨Šè™Ÿå‘½åè¦ç¯„ä¸åƒ…èƒ½æé«˜ä»£ç¢¼çš„å¯è®€æ€§ï¼Œä¹Ÿèƒ½æ¸›å°‘é–‹ç™¼éç¨‹ä¸­çš„éŒ¯èª¤ã€‚åœ¨å¯¦éš›å°ˆæ¡ˆä¸­ï¼Œå»ºè­°åœ˜éšŠæˆå“¡å…±åŒåˆ¶å®šä¸¦éµå¾ªçµ±ä¸€çš„å‘½åè¦ç¯„ï¼Œä»¥æé«˜é–‹ç™¼æ•ˆç‡å’Œä»£ç¢¼å“è³ªã€‚\n","date":"11 February 2025","externalUrl":null,"permalink":"/posts/verilog_signal_name/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ”§ Verilog HDL è¨Šè™Ÿå‘½ååŸå‰‡ \r\n    \u003cdiv id=\"-verilog-hdl-%E8%A8%8A%E8%99%9F%E5%91%BD%E5%90%8D%E5%8E%9F%E5%89%87\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-verilog-hdl-%E8%A8%8A%E8%99%9F%E5%91%BD%E5%90%8D%E5%8E%9F%E5%89%87\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \r\n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨æ•¸ä½é›»è·¯è¨­è¨ˆä¸­ï¼Œè‰¯å¥½çš„è¨Šè™Ÿå‘½ååŸå‰‡èˆ‡ coding style åŒç­‰é‡è¦ã€‚ç‰¹åˆ¥æ˜¯åœ¨å¤§å‹è¨­è¨ˆå°ˆæ¡ˆä¸­ï¼Œæ¸…æ™°çš„å‘½åæ–¹å¼ä¸åƒ…èƒ½è®“ä»£ç¢¼æ›´å®¹æ˜“ç¶­è­·ï¼Œä¹Ÿèƒ½å¹«åŠ©åœ˜éšŠæˆå“¡å¿«é€Ÿç†è§£è¨Šè™Ÿç‰¹æ€§ä¸¦é€²è¡Œé™¤éŒ¯ã€‚æœ¬æ–‡å°‡ä»‹ç´¹å¸¸ç”¨çš„ Verilog HDL è¨Šè™Ÿå‘½åè¦å‰‡ã€‚\u003c/p\u003e","title":"ğŸ”§ Verilog HDL è¨Šè™Ÿå‘½ååŸå‰‡","type":"posts"},{"content":"\rğŸ”§ æ•¸å­—é›»è·¯æ¯›åˆºæ¿¾æ³¢å™¨è¨­è¨ˆèˆ‡å¯¦ç¾ #\rå‰è¨€ #\råœ¨æ•¸ä½é›»è·¯è¨­è¨ˆä¸­ï¼Œä¿¡è™Ÿæ¯›åˆºï¼ˆGlitchï¼‰æ˜¯ä¸€å€‹å¸¸è¦‹çš„å•é¡Œï¼Œå¸¸è¦‹æ–¼æŒ‰éµå»å½ˆè·³ã€å¤–éƒ¨ä¿¡è™Ÿè¼¸å…¥è™•ç†ã€éœ€è¦ç©©å®šä¿¡è™Ÿçš„æ§åˆ¶ç³»çµ±ã€æ•¸ä½é›»è·¯ä¸­çš„é›œè¨Šè™•ç†ç­‰ã€‚æœ¬æ–‡å°‡ä»‹ç´¹ä¸€å€‹ä½¿ç”¨Verilogå¯¦ç¾çš„æ¯›åˆºæ¿¾æ³¢å™¨è¨­è¨ˆï¼Œè©²æ¿¾æ³¢å™¨å¯ä»¥æœ‰æ•ˆéæ¿¾æ‰è¼¸å…¥ä¿¡è™Ÿä¸­çš„çŸ­æš«æ¯›åˆºï¼Œæé«˜ç³»çµ±çš„ç©©å®šæ€§ã€‚\nå°ˆæ¡ˆæ¶æ§‹ #\rRTLä»£ç¢¼å¯¦ç¾ #\rä»¥ä¸‹æ˜¯å®Œæ•´çš„Verilog RTLä»£ç¢¼ï¼š\nmodule glitch_filter ( input clk, // ç³»çµ±æ™‚è„ˆè¼¸å…¥ input nRst, // ä½é›»ä½æœ‰æ•ˆçš„é‡ç½®ä¿¡è™Ÿ input iSignal, // éœ€è¦é€²è¡Œæ¿¾æ³¢çš„è¼¸å…¥ä¿¡è™Ÿ output oSignal // ç¶“éæ¿¾æ³¢è™•ç†å¾Œçš„è¼¸å‡ºä¿¡è™Ÿ ); // å…§éƒ¨ä¿¡è™Ÿå®šç¾© reg [31:0] rvShiftSignal_d, rvShiftSignal_q; // 32ä½ç§»ä½æš«å­˜å™¨ï¼Œç”¨æ–¼å„²å­˜ä¿¡è™Ÿæ­·å² reg rSignal_d, rSignal_q; // è¼¸å‡ºä¿¡è™Ÿçš„çµ„åˆé‚è¼¯å’Œæ™‚åºé‚è¼¯æš«å­˜å™¨ // ç¬¬ä¸€å€‹æ™‚åºé‚è¼¯å€å¡Šï¼šç§»ä½æš«å­˜å™¨çš„æ™‚åºæ§åˆ¶ always @(posedge clk or negedge nRst) begin if(!nRst) rvShiftSignal_q \u0026lt;= 32\u0026#39;hFFFFFFFF; // é‡ç½®æ™‚è¨­å®šç‚ºå…¨1ç‹€æ…‹ else rvShiftSignal_q \u0026lt;= rvShiftSignal_d; // æ­£å¸¸å·¥ä½œæ™‚æ›´æ–°ç§»ä½æš«å­˜å™¨ end // ç¬¬ä¸€å€‹çµ„åˆé‚è¼¯å€å¡Šï¼šç§»ä½æ“ä½œ always @(*) begin rvShiftSignal_d = {rvShiftSignal_q[30:0], iSignal}; // æ¯å€‹æ™‚è„ˆé€±æœŸå°‡è¼¸å…¥ä¿¡è™Ÿç§»å…¥æœ€ä½ä½ end // ç¬¬äºŒå€‹æ™‚åºé‚è¼¯å€å¡Šï¼šè¼¸å‡ºä¿¡è™Ÿçš„æ™‚åºæ§åˆ¶ always @(posedge clk or negedge nRst) begin if(!nRst) rSignal_q \u0026lt;= 1\u0026#39;b1; // é‡ç½®æ™‚è¼¸å‡ºä¿¡è™Ÿè¨­å®šç‚º1 else rSignal_q \u0026lt;= rSignal_d; // æ­£å¸¸å·¥ä½œæ™‚æ›´æ–°è¼¸å‡ºä¿¡è™Ÿ end // ç¬¬äºŒå€‹çµ„åˆé‚è¼¯å€å¡Šï¼šè¼¸å‡ºä¿¡è™Ÿçš„é‚è¼¯åˆ¤æ–· always @(*) begin if(rvShiftSignal_q == 32\u0026#39;hFFFFFFFF) // å¦‚æœç§»ä½æš«å­˜å™¨ä¸­å…¨æ˜¯1 rSignal_d = 1\u0026#39;b1; // è¼¸å‡ºè¨­å®šç‚º1 else if(rvShiftSignal_q == 32\u0026#39;h0) // å¦‚æœç§»ä½æš«å­˜å™¨ä¸­å…¨æ˜¯0 rSignal_d = 1\u0026#39;b0; // è¼¸å‡ºè¨­å®šç‚º0 else rSignal_d = rSignal_q; // å…¶ä»–æƒ…æ³ä¿æŒåŸç‹€æ…‹ end assign oSignal = rSignal_q; // å°‡å…§éƒ¨ä¿¡è™Ÿé€£æ¥åˆ°è¼¸å‡ºç«¯ endmodule æŠ€è¡“è¦é»èªªæ˜ #\r1. ç§»ä½æš«å­˜å™¨æ©Ÿåˆ¶ #\rä½¿ç”¨32ä½ç§»ä½æš«å­˜å™¨è¨˜éŒ„è¼¸å…¥ä¿¡è™Ÿçš„æ­·å²ç‹€æ…‹ æ¯å€‹æ™‚è„ˆé€±æœŸï¼Œæ–°çš„è¼¸å…¥ä¿¡è™Ÿè¢«ç§»å…¥æš«å­˜å™¨çš„æœ€ä½ä½ é€™æ¨£å¯ä»¥è§€å¯Ÿä¿¡è™Ÿåœ¨32å€‹æ™‚è„ˆé€±æœŸå…§çš„è®ŠåŒ– 2. æ¿¾æ³¢é‚è¼¯è¨­è¨ˆ #\råªæœ‰ç•¶ç§»ä½æš«å­˜å™¨ä¸­çš„æ‰€æœ‰ä½å…ƒéƒ½ç‚º1æ™‚ï¼Œè¼¸å‡ºæ‰æœƒè®Šç‚º1 åªæœ‰ç•¶ç§»ä½æš«å­˜å™¨ä¸­çš„æ‰€æœ‰ä½å…ƒéƒ½ç‚º0æ™‚ï¼Œè¼¸å‡ºæ‰æœƒè®Šç‚º0 å…¶ä»–æƒ…æ³ä¸‹ä¿æŒåŸæœ‰è¼¸å‡ºç‹€æ…‹ä¸è®Š 3. é‡ç½®æ©Ÿåˆ¶å¯¦ç¾ #\rç•¶é‡ç½®ä¿¡è™Ÿï¼ˆnRstï¼‰ç‚ºä½é›»ä½æ™‚ï¼š ç§»ä½æš«å­˜å™¨è¢«è¨­å®šç‚ºå…¨1ï¼ˆ32\u0026rsquo;hFFFFFFFFï¼‰ è¼¸å‡ºä¿¡è™Ÿè¢«è¨­å®šç‚º1 æ‡‰ç”¨å ´æ™¯ #\rè©²æ¯›åˆºæ¿¾æ³¢å™¨é©ç”¨æ–¼ä»¥ä¸‹å ´æ™¯ï¼š\næŒ‰éµå»å½ˆè·³ å¤–éƒ¨ä¿¡è™Ÿè¼¸å…¥è™•ç† éœ€è¦ç©©å®šä¿¡è™Ÿçš„æ§åˆ¶ç³»çµ± æ•¸ä½é›»è·¯ä¸­çš„é›œè¨Šè™•ç† æ”¹é€²å»ºè­° #\r1. å¯é…ç½®çš„æ¿¾æ³¢å¯¬åº¦ #\rmodule glitch_filter #( parameter WIDTH = 32 // å¯é…ç½®çš„ç§»ä½æš«å­˜å™¨å¯¬åº¦ )( input clk, input nRst, input iSignal, output oSignal ); reg [WIDTH-1:0] rvShiftSignal_d, rvShiftSignal_q; // ... å…¶é¤˜ä»£ç¢¼ç›¸åŒ endmodule æ³¨æ„äº‹é … #\ræ¿¾æ³¢å™¨çš„å»¶é²æ™‚é–“èˆ‡ç§»ä½æš«å­˜å™¨çš„ä½å…ƒæ•¸ç›¸é—œï¼Œæœ¬è¨­è¨ˆä¸­ç‚º32å€‹æ™‚è„ˆé€±æœŸ éœ€è¦æ ¹æ“šå¯¦éš›æ‡‰ç”¨å ´æ™¯èª¿æ•´ç§»ä½æš«å­˜å™¨çš„ä½å…ƒæ•¸ æ™‚è„ˆé »ç‡çš„é¸æ“‡éœ€è¦è€ƒæ…®å¯¦éš›ä¿¡è™Ÿçš„ç‰¹æ€§ æ¨¡æ“¬çµæœ #\ræ³¢å½¢æ¨¡æ“¬ #\rä¸Šåœ–ç‚ºä½¿ç”¨ModelSimé€²è¡Œçš„æ³¢å½¢æ¨¡æ“¬çµæœï¼Œå¾ä¸Šåˆ°ä¸‹ä¾åºç‚ºï¼š\nclkï¼šç³»çµ±æ™‚è„ˆä¿¡è™Ÿ nRstï¼šé‡ç½®ä¿¡è™Ÿ iSignalï¼šè¼¸å…¥ä¿¡è™Ÿï¼ˆåŒ…å«æ¯›åˆºï¼‰ oSignalï¼šæ¿¾æ³¢å¾Œçš„è¼¸å‡ºä¿¡è™Ÿ æ¨¡æ“¬æƒ…å¢ƒèªªæ˜ #\ræ¯›åˆºæ¿¾é™¤æ¸¬è©¦\nè¼¸å…¥ä¿¡è™Ÿ(iSignal)åŒ…å«å¤šå€‹çŸ­æš«çš„æ¯›åˆºï¼ˆå°æ–¼32å€‹æ™‚è„ˆé€±æœŸï¼‰ è¼¸å‡ºä¿¡è™Ÿ(oSignal)ä¿æŒç©©å®šï¼ŒæˆåŠŸæ¿¾é™¤é€™äº›æ¯›åˆº å¯¦æ¸¬çµæœé¡¯ç¤ºï¼Œå¯¬åº¦å°æ–¼32å€‹æ™‚è„ˆé€±æœŸçš„æ¯›åˆºéƒ½è¢«æœ‰æ•ˆæ¿¾é™¤ æ­£å¸¸ä¿¡è™ŸéŸ¿æ‡‰\nç•¶è¼¸å…¥ä¿¡è™Ÿä¿æŒç©©å®šè¶…é32å€‹æ™‚è„ˆé€±æœŸ è¼¸å‡ºä¿¡è™Ÿæ‰æœƒè·Ÿéš¨è®ŠåŒ– é©—è­‰äº†è¨­è¨ˆçš„ç©©å®šæ€§è¦æ±‚ é‡ç½®åŠŸèƒ½é©—è­‰\né‡ç½®ä¿¡è™Ÿ(nRst)è§¸ç™¼æ™‚ è¼¸å‡ºç«‹å³å›åˆ°é è¨­ç‹€æ…‹ï¼ˆé«˜é›»ä½ï¼‰ ç§»ä½æš«å­˜å™¨æ­£ç¢ºæ¸…é™¤ç‚ºå…¨1 é—œéµæ€§èƒ½æŒ‡æ¨™ #\rå»¶é²ç‰¹æ€§\nä¿¡è™Ÿè®ŠåŒ–å»¶é²ï¼š32å€‹æ™‚è„ˆé€±æœŸ é‡ç½®éŸ¿æ‡‰æ™‚é–“ï¼š1å€‹æ™‚è„ˆé€±æœŸ è³‡æºä½¿ç”¨\nä½¿ç”¨32ä½å…ƒç§»ä½æš«å­˜å™¨ ç°¡å–®çš„çµ„åˆé‚è¼¯é›»è·¯ æ•´é«”è³‡æºä½¿ç”¨ç‡ä½ çµèª #\ré€™å€‹æ¯›åˆºæ¿¾æ³¢å™¨è¨­è¨ˆç°¡å–®ä½†æ•ˆæœé¡¯è‘—ï¼Œé€šéç§»ä½æš«å­˜å™¨å’Œç‹€æ…‹æ©Ÿåˆ¶å¯¦ç¾äº†å°è¼¸å…¥ä¿¡è™Ÿçš„æœ‰æ•ˆæ¿¾æ³¢ã€‚åœ¨å¯¦éš›æ‡‰ç”¨ä¸­ï¼Œå¯ä»¥æ ¹æ“šå…·é«”éœ€æ±‚èª¿æ•´åƒæ•¸ï¼Œä½¿å…¶æ›´å¥½åœ°é©æ‡‰ä¸åŒçš„æ‡‰ç”¨å ´æ™¯ã€‚å®Œæ•´çš„ç¨‹å¼ç¢¼å¯¦ç¾å’Œè©³ç´°çš„è¨»è§£ï¼Œæœ‰åŠ©æ–¼ç†è§£æ•¸å­—é›»è·¯è¨­è¨ˆä¸­çš„æ¿¾æ³¢å™¨å¯¦ç¾æ–¹æ³•ã€‚\n","date":"11 February 2025","externalUrl":null,"permalink":"/posts/digital_filter/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ”§ æ•¸å­—é›»è·¯æ¯›åˆºæ¿¾æ³¢å™¨è¨­è¨ˆèˆ‡å¯¦ç¾ \r\n    \u003cdiv id=\"-%E6%95%B8%E5%AD%97%E9%9B%BB%E8%B7%AF%E6%AF%9B%E5%88%BA%E6%BF%BE%E6%B3%A2%E5%99%A8%E8%A8%AD%E8%A8%88%E8%88%87%E5%AF%A6%E7%8F%BE\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-%E6%95%B8%E5%AD%97%E9%9B%BB%E8%B7%AF%E6%AF%9B%E5%88%BA%E6%BF%BE%E6%B3%A2%E5%99%A8%E8%A8%AD%E8%A8%88%E8%88%87%E5%AF%A6%E7%8F%BE\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \r\n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨æ•¸ä½é›»è·¯è¨­è¨ˆä¸­ï¼Œä¿¡è™Ÿæ¯›åˆºï¼ˆGlitchï¼‰æ˜¯ä¸€å€‹å¸¸è¦‹çš„å•é¡Œï¼Œå¸¸è¦‹æ–¼æŒ‰éµå»å½ˆè·³ã€å¤–éƒ¨ä¿¡è™Ÿè¼¸å…¥è™•ç†ã€éœ€è¦ç©©å®šä¿¡è™Ÿçš„æ§åˆ¶ç³»çµ±ã€æ•¸ä½é›»è·¯ä¸­çš„é›œè¨Šè™•ç†ç­‰ã€‚æœ¬æ–‡å°‡ä»‹ç´¹ä¸€å€‹ä½¿ç”¨Verilogå¯¦ç¾çš„æ¯›åˆºæ¿¾æ³¢å™¨è¨­è¨ˆï¼Œè©²æ¿¾æ³¢å™¨å¯ä»¥æœ‰æ•ˆéæ¿¾æ‰è¼¸å…¥ä¿¡è™Ÿä¸­çš„çŸ­æš«æ¯›åˆºï¼Œæé«˜ç³»çµ±çš„ç©©å®šæ€§ã€‚\u003c/p\u003e","title":"ğŸ”§ æ•¸å­—é›»è·¯æ¯›åˆºæ¿¾æ³¢å™¨è¨­è¨ˆèˆ‡å¯¦ç¾","type":"posts"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/digital-filter/","section":"Tags","summary":"","title":"Digital Filter","type":"tags"},{"content":"\rğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Service) #\rå‰è¨€ #\råœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡å¯¦ä½œä¸€å€‹ ROS2 çš„å·¡é‚æœå‹™ç¯€é»ï¼Œé€é Service å’Œ Topic çš„çµåˆä¾†æ§åˆ¶ turtlesim ä¸­çš„çƒé¾œç§»å‹•åˆ°æŒ‡å®šä½ç½®ã€‚é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†å¦‚ä½•åœ¨ ROS2 ä¸­å¯¦ç¾æœå‹™ç«¯å’Œå®¢æˆ¶ç«¯çš„é€šä¿¡ï¼Œä»¥åŠåŸºæœ¬çš„é‹å‹•æ§åˆ¶ã€‚\nå°ˆæ¡ˆæ¶æ§‹ #\r1. æª”æ¡ˆçµæ§‹ #\rpatrol/\râ”œâ”€â”€ CMakeLists.txt # æ§‹å»ºé…ç½®æ–‡ä»¶\râ”œâ”€â”€ package.xml # åŒ…é…ç½®æ–‡ä»¶\râ”œâ”€â”€ src/\râ”‚ â””â”€â”€ service.cpp # æœå‹™ç¯€é»å¯¦ç¾\râ””â”€â”€ srv/\râ””â”€â”€ Patrol.srv # æœå‹™ä»‹é¢å®šç¾© 2. æœå‹™ä»‹é¢å®šç¾© #\r# Patrol.srv\rfloat64 target_x # ç›®æ¨™ X åº§æ¨™\rfloat64 target_y # ç›®æ¨™ Y åº§æ¨™\r---\rint8 SUCCESS = 1 # æˆåŠŸç‹€æ…‹ç¢¼\rint8 FAIL = 0 # å¤±æ•—ç‹€æ…‹ç¢¼\rint8 result # åŸ·è¡Œçµæœ 3. å®Œæ•´ç¨‹å¼ç¢¼å¯¦ç¾ #\r// åŒ…å«å¿…è¦çš„æ¨™é ­æ–‡ä»¶ #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; // ROS2 C++ å®¢æˆ¶ç«¯åº« #include \u0026#34;patrol/srv/patrol.hpp\u0026#34; // ç”Ÿæˆçš„æœå‹™ä»‹é¢ #include \u0026#34;geometry_msgs/msg/pose.hpp\u0026#34; // ä½ç½®è¨Šæ¯ #include \u0026#34;turtlesim/msg/pose.hpp\u0026#34; // turtlesim ä½ç½®è¨Šæ¯ #include \u0026#34;geometry_msgs/msg/twist.hpp\u0026#34; // é€Ÿåº¦è¨Šæ¯ // å·¡é‚æœå‹™ç¯€é»é¡åˆ¥ï¼Œç¹¼æ‰¿è‡ª rclcpp::Node class PatrolService: public rclcpp::Node { private: // æˆå“¡è®Šé‡ double targetX_ {1.0}; // ç›®æ¨™ X åº§æ¨™ double targetY_ {1.0}; // ç›®æ¨™ Y åº§æ¨™ // ROS2 é€šä¿¡çµ„ä»¶ rclcpp::Service\u0026lt;patrol::srv::Patrol\u0026gt;::SharedPtr service_; // æœå‹™ turtlesim::msg::Pose::SharedPtr turtlePose_; // ç•¶å‰ä½ç½® rclcpp::Subscription\u0026lt;turtlesim::msg::Pose\u0026gt;::SharedPtr turtlePoseSub_; // ä½ç½®è¨‚é–±è€… rclcpp::Publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;::SharedPtr publisher_; // é€Ÿåº¦ç™¼å¸ƒè€… public: // å»ºæ§‹å‡½æ•¸ PatrolService(std::string nodeName); // è§£æ§‹å‡½æ•¸ ~PatrolService() = default; // æœå‹™å›èª¿å‡½æ•¸ void handle_patrol(const std::shared_ptr\u0026lt;patrol::srv::Patrol::Request\u0026gt; request, const std::shared_ptr\u0026lt;patrol::srv::Patrol::Response\u0026gt; response); // ç§»å‹•æ§åˆ¶å‡½æ•¸ void move_to_target(double targetX, double targetY); }; // å»ºæ§‹å‡½æ•¸å¯¦ç¾ PatrolService::PatrolService(std::string nodeName): Node(nodeName) { // å‰µå»ºä½ç½®è¨‚é–±è€… turtlePoseSub_ = this-\u0026gt;create_subscription\u0026lt;turtlesim::msg::Pose\u0026gt;( \u0026#34;/turtle1/pose\u0026#34;, 10, [this](const turtlesim::msg::Pose::SharedPtr msg) { turtlePose_ = msg; move_to_target(turtlePose_-\u0026gt;x, turtlePose_-\u0026gt;y); } ); // å‰µå»ºé€Ÿåº¦ç™¼å¸ƒè€… publisher_ = this-\u0026gt;create_publisher\u0026lt;geometry_msgs::msg::Twist\u0026gt;(\u0026#34;/turtle1/cmd_vel\u0026#34;, 10); // å‰µå»ºæœå‹™ service_ = this-\u0026gt;create_service\u0026lt;patrol::srv::Patrol\u0026gt;( \u0026#34;patrol\u0026#34;, std::bind(\u0026amp;PatrolService::handle_patrol, this, std::placeholders::_1, std::placeholders::_2) ); } // æœå‹™å›èª¿å‡½æ•¸å¯¦ç¾ void PatrolService::handle_patrol( const std::shared_ptr\u0026lt;patrol::srv::Patrol::Request\u0026gt; request, const std::shared_ptr\u0026lt;patrol::srv::Patrol::Response\u0026gt; response) { // æª¢æŸ¥ç›®æ¨™åº§æ¨™æ˜¯å¦åœ¨æœ‰æ•ˆç¯„åœå…§ï¼ˆ0-12ä¹‹é–“ï¼‰ if((request-\u0026gt;target_x \u0026gt; 0.0f \u0026amp;\u0026amp; request-\u0026gt;target_x \u0026lt; 12.0f) \u0026amp;\u0026amp; (request-\u0026gt;target_y \u0026gt; 0.0f \u0026amp;\u0026amp; request-\u0026gt;target_y \u0026lt; 12.0f)) { // æ›´æ–°ç›®æ¨™ä½ç½® targetX_ = request-\u0026gt;target_x; targetY_ = request-\u0026gt;target_y; response-\u0026gt;result = patrol::srv::Patrol::Response::SUCCESS; } else { // åº§æ¨™ç„¡æ•ˆ response-\u0026gt;result = patrol::srv::Patrol::Response::FAIL; } } // ç§»å‹•æ§åˆ¶å‡½æ•¸å¯¦ç¾ void PatrolService::move_to_target(double currentX, double currentY) { // å‰µå»ºé€Ÿåº¦è¨Šæ¯ auto twist = geometry_msgs::msg::Twist(); // è¨ˆç®—è·é›¢å’Œè§’åº¦ double dx = targetX_ - currentX; double dy = targetY_ - currentY; double distance = std::sqrt(dx * dx + dy * dy); double target_angle = std::atan2(dy, dx); // å¦‚æœè·é›¢å¤§æ–¼é–¾å€¼ï¼Œå‰‡ç§»å‹• if (distance \u0026gt; 0.1) { // è¨ˆç®—è§’åº¦å·® double angle_diff = target_angle - turtlePose_-\u0026gt;theta; // è§’åº¦æ­¸ä¸€åŒ– if (angle_diff \u0026gt; M_PI) angle_diff -= 2 * M_PI; if (angle_diff \u0026lt; -M_PI) angle_diff += 2 * M_PI; // è¨­ç½®è§’é€Ÿåº¦å’Œç·šé€Ÿåº¦ twist.angular.z = 1.0 * angle_diff; twist.linear.x = 0.5 * distance; // è¼¸å‡ºç•¶å‰ä½ç½®è³‡è¨Š RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;currentX: %f, currentY: %f\u0026#34;, currentX, currentY); // ç™¼å¸ƒé€Ÿåº¦å‘½ä»¤ publisher_-\u0026gt;publish(twist); } } // ä¸»å‡½æ•¸ int main(int argc, char **argv) { // åˆå§‹åŒ– ROS2 rclcpp::init(argc, argv); // å‰µå»ºæœå‹™ç¯€é» auto node = std::make_shared\u0026lt;PatrolService\u0026gt;(\u0026#34;patrol_service_node\u0026#34;); // é‹è¡Œç¯€é» rclcpp::spin(node); // é—œé–‰ ROS2 rclcpp::shutdown(); return 0; } 4. é…ç½®æ–‡ä»¶èªªæ˜ #\r4.1 CMakeLists.txt #\r# æŒ‡å®š CMake æœ€ä½ç‰ˆæœ¬è¦æ±‚ cmake_minimum_required(VERSION 3.8) # å®šç¾©å°ˆæ¡ˆåç¨± project(patrol) # å¦‚æœä½¿ç”¨ GCC æˆ– Clang ç·¨è­¯å™¨ï¼Œæ·»åŠ ç·¨è­¯è­¦å‘Šé¸é … if(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES \u0026#34;Clang\u0026#34;) add_compile_options(-Wall -Wextra -Wpedantic) endif() # å°‹æ‰¾ä¸¦è¼‰å…¥æ‰€éœ€çš„ä¾è³´å¥—ä»¶ find_package(ament_cmake REQUIRED) # ROS 2 CMake å·¥å…· find_package(rclcpp REQUIRED) # ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« find_package(std_msgs REQUIRED) # æ¨™æº–è¨Šæ¯é¡å‹ find_package(rosidl_default_generators REQUIRED)# æœå‹™ä»‹é¢ç”Ÿæˆå™¨ find_package(turtlesim REQUIRED) # çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ find_package(geometry_msgs REQUIRED) # å¹¾ä½•è¨Šæ¯é¡å‹ # ç”Ÿæˆæœå‹™ä»‹é¢ rosidl_generate_interfaces(${PROJECT_NAME} \u0026#34;srv/Patrol.srv\u0026#34; ) # å‰µå»ºå¯åŸ·è¡Œæª” add_executable(service_node src/service.cpp) # ç‚ºå¯åŸ·è¡Œæª”æ·»åŠ ä¾è³´ ament_target_dependencies(service_node rclcpp # ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« std_msgs # æ¨™æº–è¨Šæ¯é¡å‹ geometry_msgs # å¹¾ä½•è¨Šæ¯é¡å‹ turtlesim # çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ ) # å®‰è£å¯åŸ·è¡Œæª”åˆ°æŒ‡å®šç›®éŒ„ install(TARGETS service_node DESTINATION lib/${PROJECT_NAME} ) # å®Œæˆ ament å¥—ä»¶çš„é…ç½® ament_package() 4.2 package.xml #\r\u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;!-- æŒ‡å®š XML æ¨¡å¼å®šç¾©ï¼ˆXSDï¼‰æª”æ¡ˆçš„ä½ç½®ï¼Œç”¨æ–¼é©—è­‰æ­¤æª”æ¡ˆçš„æ ¼å¼ --\u0026gt; \u0026lt;?xml-model href=\u0026#34;http://download.ros.org/schema/package_format3.xsd\u0026#34; schematypens=\u0026#34;http://www.w3.org/2001/XMLSchema\u0026#34;?\u0026gt; \u0026lt;!-- ROS 2 å¥—ä»¶é…ç½®æª”æ¡ˆï¼Œä½¿ç”¨æ ¼å¼ç‰ˆæœ¬ 3 --\u0026gt; \u0026lt;package format=\u0026#34;3\u0026#34;\u0026gt; \u0026lt;!-- å¥—ä»¶åŸºæœ¬è³‡è¨Š --\u0026gt; \u0026lt;name\u0026gt;patrol\u0026lt;/name\u0026gt; \u0026lt;!-- å¥—ä»¶åç¨± --\u0026gt; \u0026lt;version\u0026gt;0.0.0\u0026lt;/version\u0026gt; \u0026lt;!-- å¥—ä»¶ç‰ˆæœ¬ --\u0026gt; \u0026lt;description\u0026gt;TODO: Package description\u0026lt;/description\u0026gt; \u0026lt;!-- å¥—ä»¶æè¿° --\u0026gt; \u0026lt;maintainer email=\u0026#34;tienyao@todo.todo\u0026#34;\u0026gt;tienyao\u0026lt;/maintainer\u0026gt; \u0026lt;!-- ç¶­è­·è€…è³‡è¨Š --\u0026gt; \u0026lt;license\u0026gt;TODO: License declaration\u0026lt;/license\u0026gt; \u0026lt;!-- æˆæ¬Šè²æ˜ --\u0026gt; \u0026lt;!-- å»ºæ§‹å·¥å…·ä¾è³´ --\u0026gt; \u0026lt;buildtool_depend\u0026gt;ament_cmake\u0026lt;/buildtool_depend\u0026gt; \u0026lt;!-- ä½¿ç”¨ ament_cmake ä½œç‚ºå»ºæ§‹å·¥å…· --\u0026gt; \u0026lt;!-- å»ºæ§‹æ™‚ä¾è³´ --\u0026gt; \u0026lt;build_depend\u0026gt;rosidl_default_generators\u0026lt;/build_depend\u0026gt;\u0026lt;!-- ç”¨æ–¼ç”Ÿæˆä»‹é¢æª”æ¡ˆ --\u0026gt; \u0026lt;!-- åŸ·è¡Œæ™‚ä¾è³´ --\u0026gt; \u0026lt;exec_depend\u0026gt;rosidl_default_runtime\u0026lt;/exec_depend\u0026gt; \u0026lt;!-- åŸ·è¡Œæ™‚éœ€è¦çš„ä»‹é¢é‹è¡Œåº« --\u0026gt; \u0026lt;!-- å»ºæ§‹å’ŒåŸ·è¡Œéƒ½éœ€è¦çš„ä¾è³´ --\u0026gt; \u0026lt;depend\u0026gt;rclcpp\u0026lt;/depend\u0026gt; \u0026lt;!-- ROS 2 C++ å®¢æˆ¶ç«¯ç¨‹å¼åº« --\u0026gt; \u0026lt;depend\u0026gt;std_msgs\u0026lt;/depend\u0026gt; \u0026lt;!-- æ¨™æº–è¨Šæ¯é¡å‹ --\u0026gt; \u0026lt;depend\u0026gt;turtlesim\u0026lt;/depend\u0026gt; \u0026lt;!-- çƒé¾œæ¨¡æ“¬å™¨å¥—ä»¶ --\u0026gt; \u0026lt;depend\u0026gt;geometry_msgs\u0026lt;/depend\u0026gt; \u0026lt;!-- å¹¾ä½•è¨Šæ¯é¡å‹ --\u0026gt; \u0026lt;!-- è²æ˜æ­¤å¥—ä»¶æ˜¯ä¸€å€‹ä»‹é¢å¥—ä»¶ --\u0026gt; \u0026lt;member_of_group\u0026gt;rosidl_interface_packages\u0026lt;/member_of_group\u0026gt; \u0026lt;!-- æ¸¬è©¦ç›¸é—œä¾è³´ --\u0026gt; \u0026lt;test_depend\u0026gt;ament_lint_auto\u0026lt;/test_depend\u0026gt; \u0026lt;!-- è‡ªå‹•åŒ–ç¨‹å¼ç¢¼æª¢æŸ¥å·¥å…· --\u0026gt; \u0026lt;test_depend\u0026gt;ament_lint_common\u0026lt;/test_depend\u0026gt; \u0026lt;!-- å¸¸ç”¨ç¨‹å¼ç¢¼æª¢æŸ¥è¦å‰‡ --\u0026gt; \u0026lt;!-- ROS 2 å¥—ä»¶ç‰¹å®šè³‡è¨Š --\u0026gt; \u0026lt;export\u0026gt; \u0026lt;build_type\u0026gt;ament_cmake\u0026lt;/build_type\u0026gt; \u0026lt;!-- æŒ‡å®šä½¿ç”¨ ament_cmake å»ºæ§‹ç³»çµ± --\u0026gt; \u0026lt;/export\u0026gt; \u0026lt;/package\u0026gt; åŸ·è¡Œæ–¹å¼ #\rç·¨è­¯å°ˆæ¡ˆ cd ros2_ws colcon build --packages-select patrol åŸ·è¡Œç¯€é» # çµ‚ç«¯æ©Ÿ 1ï¼šå•Ÿå‹• turtlesim ros2 run turtlesim turtlesim_node # çµ‚ç«¯æ©Ÿ 2ï¼šå•Ÿå‹•å·¡é‚æœå‹™ ros2 run patrol patrol_service # çµ‚ç«¯æ©Ÿ 3ï¼šç™¼é€æœå‹™è«‹æ±‚ ros2 service call /patrol patrol/srv/Patrol \u0026#34;{target_x: 5.0, target_y: 5.0}\u0026#34; ä½¿ç”¨ RQT æ¸¬è©¦ #\rRQT æ˜¯ ROS çš„åœ–å½¢åŒ–å·¥å…·ï¼Œå¯ä»¥ç”¨ä¾†ç›£æ§å’Œæ¸¬è©¦ç¯€é»ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ RQT æ¸¬è©¦å·¡é‚æœå‹™çš„æ­¥é©Ÿï¼š\nå•Ÿå‹• RQT rqt ä½¿ç”¨ Service Caller\nåœ¨èœå–®ä¸­é¸æ“‡ Plugins -\u0026gt; Services -\u0026gt; Service Caller åœ¨ Service ä¸‹æ‹‰é¸å–®ä¸­é¸æ“‡ /patrol å¡«å…¥æ¸¬è©¦æ•¸æ“šï¼š { \u0026#34;target_x\u0026#34;: 5.0, \u0026#34;target_y\u0026#34;: 5.0 } é»æ“Š \u0026ldquo;Call\u0026rdquo; æŒ‰éˆ•ç™¼é€è«‹æ±‚ ä½¿ç”¨ Plot å·¥å…·ç›£æ§ä½ç½®\né¸æ“‡ Plugins -\u0026gt; Visualization -\u0026gt; Plot æ·»åŠ ä»¥ä¸‹è©±é¡Œé€²è¡Œç›£æ§ï¼š /turtle1/pose/xï¼šçƒé¾œçš„ X åº§æ¨™ /turtle1/pose/yï¼šçƒé¾œçš„ Y åº§æ¨™ /turtle1/pose/thetaï¼šçƒé¾œçš„è§’åº¦ ä½¿ç”¨ Topic Monitor\né¸æ“‡ Plugins -\u0026gt; Topics -\u0026gt; Topic Monitor å¯ä»¥ç›£æ§ä»¥ä¸‹è©±é¡Œï¼š /turtle1/cmd_velï¼šç™¼å¸ƒçš„é€Ÿåº¦å‘½ä»¤ /turtle1/poseï¼šçƒé¾œçš„ç•¶å‰ä½ç½® RQT ç›£æ§æˆªåœ–ç¤ºä¾‹ #\rRQT çš„å„ªå‹¢ #\råœ–å½¢åŒ–ä»‹é¢ï¼Œæ“ä½œç›´è§€ å³æ™‚æ•¸æ“šå¯è¦–åŒ– æ–¹ä¾¿é€²è¡Œæœå‹™æ¸¬è©¦ æ”¯æ´å¤šç¨®ç›£æ§å·¥å…· æŠ€è¡“è¦é»èªªæ˜ #\ræœå‹™é€šä¿¡æ©Ÿåˆ¶\nä½¿ç”¨ Service è™•ç†ä¸€æ¬¡æ€§è«‹æ±‚ é€šé Topic å¯¦ç¾é€£çºŒçš„ä½ç½®å’Œé€Ÿåº¦æ›´æ–° çµåˆåŒæ­¥ï¼ˆServiceï¼‰å’Œç•°æ­¥ï¼ˆTopicï¼‰é€šä¿¡ é‹å‹•æ§åˆ¶\nä½¿ç”¨æ¯”ä¾‹æ§åˆ¶å¯¦ç¾å¹³æ»‘ç§»å‹• è€ƒæ…®è§’åº¦é€£çºŒæ€§ï¼Œé¿å…çªè®Š è·é›¢å’Œè§’åº¦çš„å¯¦æ™‚è¨ˆç®— éŒ¯èª¤è™•ç†\næª¢æŸ¥åº§æ¨™ç¯„åœæœ‰æ•ˆæ€§ å›å‚³é©ç•¶çš„åŸ·è¡Œçµæœ ç§»å‹•é–¾å€¼æ§åˆ¶ æ”¹é€²å»ºè­° #\rPID æ§åˆ¶å„ªåŒ– // æ·»åŠ ç©åˆ†å’Œå¾®åˆ†é … class PatrolService { private: double angle_integral = 0.0; double last_angle_error = 0.0; void move_to_target() { double angle_error = target_angle - current_angle; angle_integral += angle_error; double angle_derivative = angle_error - last_angle_error; twist.angular.z = Kp * angle_error + Ki * angle_integral + Kd * angle_derivative; last_angle_error = angle_error; } }; è¶…æ™‚è™•ç† class PatrolService { private: rclcpp::Time start_time_; const double timeout_duration_ = 10.0; // 10 ç§’è¶…æ™‚ bool move_timeout() { return (this-\u0026gt;now() - start_time_).seconds() \u0026gt; timeout_duration_; } void handle_patrol() { start_time_ = this-\u0026gt;now(); if (move_timeout()) { response-\u0026gt;result = patrol::srv::Patrol::Response::FAIL; return; } } }; åƒè€ƒè³‡æº #\rROS2 Service æ•™ç¨‹ turtlesim æ–‡æª” çµèª #\ré€éé€™å€‹å°ˆæ¡ˆï¼Œæˆ‘å€‘å­¸ç¿’äº†å¦‚ä½•åœ¨ ROS2 ä¸­çµåˆ Service å’Œ Topic ä¾†å¯¦ç¾æ©Ÿå™¨äººçš„é‹å‹•æ§åˆ¶ã€‚é€™ç¨®çµåˆä¸åŒé€šä¿¡æ©Ÿåˆ¶çš„æ–¹å¼ï¼Œèƒ½å¤ æ›´éˆæ´»åœ°è™•ç†å„ç¨®æ§åˆ¶éœ€æ±‚ã€‚å®Œæ•´çš„ç¨‹å¼ç¢¼å¯¦ç¾å’Œè©³ç´°çš„æ³¨è§£ï¼Œæœ‰åŠ©æ–¼ç†è§£ ROS2 çš„æ ¸å¿ƒæ¦‚å¿µå’Œå¯¦ä½œæ–¹æ³•ã€‚\n","date":"11 February 2025","externalUrl":null,"permalink":"/posts/ros2_service_node/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Service) \r\n    \u003cdiv id=\"-ros2-%E5%B7%A1%E9%82%8F%E6%9C%8D%E5%8B%99%E7%AF%80%E9%BB%9E%E9%96%8B%E7%99%BC%E6%95%99%E5%AD%B8%E4%BD%BF%E7%94%A8-service\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-%E5%B7%A1%E9%82%8F%E6%9C%8D%E5%8B%99%E7%AF%80%E9%BB%9E%E9%96%8B%E7%99%BC%E6%95%99%E5%AD%B8%E4%BD%BF%E7%94%A8-service\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003eå‰è¨€ \r\n    \u003cdiv id=\"%E5%89%8D%E8%A8%80\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å€‘å°‡å¯¦ä½œä¸€å€‹ ROS2 çš„å·¡é‚æœå‹™ç¯€é»ï¼Œé€é Service å’Œ Topic çš„çµåˆä¾†æ§åˆ¶ turtlesim ä¸­çš„çƒé¾œç§»å‹•åˆ°æŒ‡å®šä½ç½®ã€‚é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†å¦‚ä½•åœ¨ ROS2 ä¸­å¯¦ç¾æœå‹™ç«¯å’Œå®¢æˆ¶ç«¯çš„é€šä¿¡ï¼Œä»¥åŠåŸºæœ¬çš„é‹å‹•æ§åˆ¶ã€‚\u003c/p\u003e","title":"ğŸ¢ ROS2 å·¡é‚æœå‹™ç¯€é»é–‹ç™¼æ•™å­¸(ä½¿ç”¨ Service)","type":"posts"},{"content":"\rğŸš€ ROS2 Launch æª”æ¡ˆå»ºç«‹ #\r1. Launch æª”æ¡ˆç°¡ä»‹ #\rLaunch æª”æ¡ˆå…è¨±æ‚¨åŒæ™‚å•Ÿå‹•å¤šå€‹ ROS2 ç¯€é»ï¼Œç°¡åŒ–äº†æ“ä½œæµç¨‹ã€‚\n2. åŸºæœ¬çµæ§‹ #\r2.1 æª”æ¡ˆä½ç½® #\ryour_package/ â”œâ”€â”€ launch/ â”‚ â””â”€â”€ multi_turtles.launch.py â””â”€â”€ setup.py 2.2 åŸºæœ¬ç¯„ä¾‹ #\r# å°å…¥å¿…è¦çš„å¥—ä»¶ import launch # å°å…¥ launch æ ¸å¿ƒåŠŸèƒ½ import launch_ros # å°å…¥ ROS2 ç›¸é—œçš„ launch åŠŸèƒ½ def generate_launch_description(): # å‰µå»ºç¬¬ä¸€å€‹çƒé¾œç¯€é» action_node_turtle0 = launch_ros.actions.Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± output=\u0026#39;both\u0026#39;, # è¼¸å‡ºæ–¹å¼ï¼šåŒæ™‚è¼¸å‡ºåˆ°çµ‚ç«¯å’Œæ—¥èªŒ ) # å‰µå»ºç¬¬äºŒå€‹çƒé¾œç¯€é» action_node_turtle1 = launch_ros.actions.Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± output=\u0026#39;both\u0026#39;, # è¼¸å‡ºæ–¹å¼ï¼šåŒæ™‚è¼¸å‡ºåˆ°çµ‚ç«¯å’Œæ—¥èªŒ ) # å‰µå»ºç¬¬ä¸‰å€‹çƒé¾œç¯€é» action_node_turtle2 = launch_ros.actions.Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± output=\u0026#39;both\u0026#39;, # è¼¸å‡ºæ–¹å¼ï¼šåŒæ™‚è¼¸å‡ºåˆ°çµ‚ç«¯å’Œæ—¥èªŒ ) # å‰µå»º launch æè¿°å°è±¡ï¼ŒåŒ…å«æ‰€æœ‰ç¯€é» launch_description = launch.LaunchDescription([ action_node_turtle0, # æ·»åŠ ç¬¬ä¸€å€‹çƒé¾œç¯€é» action_node_turtle1, # æ·»åŠ ç¬¬äºŒå€‹çƒé¾œç¯€é» action_node_turtle2, # æ·»åŠ ç¬¬ä¸‰å€‹çƒé¾œç¯€é» ]) # è¿”å› launch æè¿°å°è±¡ return launch_description 2.3 CMakeLists.txt é…ç½® #\rä¸»è¦é…ç½®åŒ…æ‹¬ï¼š\nå°ˆæ¡ˆåç¨±å’Œç‰ˆæœ¬è¦æ±‚ ä¾è³´å¥—ä»¶é…ç½® å¯åŸ·è¡Œæª”ç·¨è­¯è¨­å®š å®‰è£è·¯å¾‘é…ç½® ç‰¹åˆ¥æ³¨æ„ä»¥ä¸‹å®‰è£é…ç½®ï¼š\n# å®‰è£å¯åŸ·è¡Œæª” install(TARGETS service_parameters_node client_parameters_node DESTINATION lib/${PROJECT_NAME} ) # å®‰è£å•Ÿå‹•æ–‡ä»¶ install(DIRECTORY launch DESTINATION share/${PROJECT_NAME} ) # å®Œæˆ ament å¥—ä»¶é…ç½® ament_package() é€™äº›é…ç½®ç¢ºä¿äº†ï¼š\nå¯åŸ·è¡Œæª”è¢«æ­£ç¢ºå®‰è£åˆ°æŒ‡å®šç›®éŒ„ å•Ÿå‹•æ–‡ä»¶ï¼ˆlaunch filesï¼‰è¢«å®‰è£åˆ°å…±äº«ç›®éŒ„ å¥—ä»¶é…ç½®æ­£ç¢ºå®Œæˆ 3. åƒæ•¸èªªæ˜ #\r3.1 Node åƒæ•¸ #\rpackage: å¥—ä»¶åç¨± executable: å¯åŸ·è¡Œæª”åç¨± output: è¼¸å‡ºæ–¹å¼ï¼ˆ\u0026lsquo;screen\u0026rsquo;, \u0026rsquo;log\u0026rsquo;, \u0026lsquo;both\u0026rsquo;ï¼‰ name: ç¯€é»åç¨±ï¼ˆå¯é¸ï¼‰ namespace: å‘½åç©ºé–“ï¼ˆå¯é¸ï¼‰ 3.2 å¸¸ç”¨é…ç½® #\r# è¨­å®šç¯€é»åç¨±å’Œå‘½åç©ºé–“ Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± name=\u0026#39;turtle1\u0026#39;, # ç¯€é»åç¨± namespace=\u0026#39;group1\u0026#39; # å‘½åç©ºé–“ ) # æ·»åŠ åƒæ•¸é…ç½® Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± parameters=[{\u0026#39;background_r\u0026#39;: 255}, {\u0026#39;background_g\u0026#39;: 150}, {\u0026#39;background_b\u0026#39;: 50}] # è¨­å®šèƒŒæ™¯é¡è‰²åƒæ•¸ ) 4. ä½¿ç”¨æ–¹æ³• #\r4.1 åŸ·è¡Œ Launch æª”æ¡ˆ #\r# ç·¨è­¯å°ˆæ¡ˆ colcon build # åŸ·è¡Œ launch æª”æ¡ˆ ros2 launch your_package multi_turtles.launch.py 5. é€²éšåŠŸèƒ½ #\r5.1 æ¢ä»¶å¼å•Ÿå‹• #\r# å°å…¥å¿…è¦çš„æ¢ä»¶å’Œé…ç½®é¡åˆ¥ from launch.conditions import IfCondition from launch.substitutions import LaunchConfiguration # æ ¹æ“šæ¢ä»¶å•Ÿå‹•ç¯€é» Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± condition=IfCondition(LaunchConfiguration(\u0026#39;start_turtle\u0026#39;)) # æ¢ä»¶åˆ¤æ–· ) 5.2 ç¾¤çµ„ç®¡ç† #\r# å°å…¥å¿…è¦çš„é¡åˆ¥ from launch import LaunchDescription from launch_ros.actions import Node from launch.actions import GroupAction # å‰µå»ºç¯€é»ç¾¤çµ„ group = GroupAction([ Node(package=\u0026#39;turtlesim\u0026#39;, executable=\u0026#39;turtlesim_node\u0026#39;), # çƒé¾œæ¨¡æ“¬å™¨ç¯€é» Node(package=\u0026#39;turtlesim\u0026#39;, executable=\u0026#39;turtle_teleop_key\u0026#39;) # éµç›¤æ§åˆ¶ç¯€é» ]) ğŸ’¡ æç¤ºï¼š\nä½¿ç”¨ ros2 launch --show æŸ¥çœ‹ launch æª”æ¡ˆçš„é…ç½® å¯ä»¥åœ¨ launch æª”æ¡ˆä¸­åŒ…å«å…¶ä»– launch æª”æ¡ˆ å–„ç”¨å‘½åç©ºé–“é¿å…ç¯€é»åç¨±è¡çª ","date":"11 February 2025","externalUrl":null,"permalink":"/posts/c_array/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸš€ ROS2 Launch æª”æ¡ˆå»ºç«‹ \r\n    \u003cdiv id=\"-ros2-launch-%E6%AA%94%E6%A1%88%E5%BB%BA%E7%AB%8B\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-launch-%E6%AA%94%E6%A1%88%E5%BB%BA%E7%AB%8B\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003e1. Launch æª”æ¡ˆç°¡ä»‹ \r\n    \u003cdiv id=\"1-launch-%E6%AA%94%E6%A1%88%E7%B0%A1%E4%BB%8B\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#1-launch-%E6%AA%94%E6%A1%88%E7%B0%A1%E4%BB%8B\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eLaunch æª”æ¡ˆå…è¨±æ‚¨åŒæ™‚å•Ÿå‹•å¤šå€‹ ROS2 ç¯€é»ï¼Œç°¡åŒ–äº†æ“ä½œæµç¨‹ã€‚\u003c/p\u003e","title":"ğŸš€ ROS2 Launch æª”æ¡ˆå»ºç«‹","type":"posts"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/array/","section":"Tags","summary":"","title":"Array","type":"tags"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/c/","section":"Tags","summary":"","title":"C","type":"tags"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/categories/c/","section":"Categories","summary":"","title":"C","type":"categories"},{"content":"\rğŸš€ ROS2 Launch æª”æ¡ˆå»ºç«‹ #\r1. Launch æª”æ¡ˆç°¡ä»‹ #\rLaunch æª”æ¡ˆå…è¨±æ‚¨åŒæ™‚å•Ÿå‹•å¤šå€‹ ROS2 ç¯€é»ï¼Œç°¡åŒ–äº†æ“ä½œæµç¨‹ã€‚\n2. åŸºæœ¬çµæ§‹ #\r2.1 æª”æ¡ˆä½ç½® #\ryour_package/ â”œâ”€â”€ launch/ â”‚ â””â”€â”€ multi_turtles.launch.py â””â”€â”€ setup.py 2.2 åŸºæœ¬ç¯„ä¾‹ #\r# å°å…¥å¿…è¦çš„å¥—ä»¶ import launch # å°å…¥ launch æ ¸å¿ƒåŠŸèƒ½ import launch_ros # å°å…¥ ROS2 ç›¸é—œçš„ launch åŠŸèƒ½ def generate_launch_description(): # å‰µå»ºç¬¬ä¸€å€‹çƒé¾œç¯€é» action_node_turtle0 = launch_ros.actions.Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± output=\u0026#39;both\u0026#39;, # è¼¸å‡ºæ–¹å¼ï¼šåŒæ™‚è¼¸å‡ºåˆ°çµ‚ç«¯å’Œæ—¥èªŒ ) # å‰µå»ºç¬¬äºŒå€‹çƒé¾œç¯€é» action_node_turtle1 = launch_ros.actions.Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± output=\u0026#39;both\u0026#39;, # è¼¸å‡ºæ–¹å¼ï¼šåŒæ™‚è¼¸å‡ºåˆ°çµ‚ç«¯å’Œæ—¥èªŒ ) # å‰µå»ºç¬¬ä¸‰å€‹çƒé¾œç¯€é» action_node_turtle2 = launch_ros.actions.Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± output=\u0026#39;both\u0026#39;, # è¼¸å‡ºæ–¹å¼ï¼šåŒæ™‚è¼¸å‡ºåˆ°çµ‚ç«¯å’Œæ—¥èªŒ ) # å‰µå»º launch æè¿°å°è±¡ï¼ŒåŒ…å«æ‰€æœ‰ç¯€é» launch_description = launch.LaunchDescription([ action_node_turtle0, # æ·»åŠ ç¬¬ä¸€å€‹çƒé¾œç¯€é» action_node_turtle1, # æ·»åŠ ç¬¬äºŒå€‹çƒé¾œç¯€é» action_node_turtle2, # æ·»åŠ ç¬¬ä¸‰å€‹çƒé¾œç¯€é» ]) # è¿”å› launch æè¿°å°è±¡ return launch_description 2.3 CMakeLists.txt é…ç½® #\rä¸»è¦é…ç½®åŒ…æ‹¬ï¼š\nå°ˆæ¡ˆåç¨±å’Œç‰ˆæœ¬è¦æ±‚ ä¾è³´å¥—ä»¶é…ç½® å¯åŸ·è¡Œæª”ç·¨è­¯è¨­å®š å®‰è£è·¯å¾‘é…ç½® ç‰¹åˆ¥æ³¨æ„ä»¥ä¸‹å®‰è£é…ç½®ï¼š\n# å®‰è£å¯åŸ·è¡Œæª” install(TARGETS service_parameters_node client_parameters_node DESTINATION lib/${PROJECT_NAME} ) # å®‰è£å•Ÿå‹•æ–‡ä»¶ install(DIRECTORY launch DESTINATION share/${PROJECT_NAME} ) # å®Œæˆ ament å¥—ä»¶é…ç½® ament_package() é€™äº›é…ç½®ç¢ºä¿äº†ï¼š\nå¯åŸ·è¡Œæª”è¢«æ­£ç¢ºå®‰è£åˆ°æŒ‡å®šç›®éŒ„ å•Ÿå‹•æ–‡ä»¶ï¼ˆlaunch filesï¼‰è¢«å®‰è£åˆ°å…±äº«ç›®éŒ„ å¥—ä»¶é…ç½®æ­£ç¢ºå®Œæˆ 3. åƒæ•¸èªªæ˜ #\r3.1 Node åƒæ•¸ #\rpackage: å¥—ä»¶åç¨± executable: å¯åŸ·è¡Œæª”åç¨± output: è¼¸å‡ºæ–¹å¼ï¼ˆ\u0026lsquo;screen\u0026rsquo;, \u0026rsquo;log\u0026rsquo;, \u0026lsquo;both\u0026rsquo;ï¼‰ name: ç¯€é»åç¨±ï¼ˆå¯é¸ï¼‰ namespace: å‘½åç©ºé–“ï¼ˆå¯é¸ï¼‰ 3.2 å¸¸ç”¨é…ç½® #\r# è¨­å®šç¯€é»åç¨±å’Œå‘½åç©ºé–“ Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± name=\u0026#39;turtle1\u0026#39;, # ç¯€é»åç¨± namespace=\u0026#39;group1\u0026#39; # å‘½åç©ºé–“ ) # æ·»åŠ åƒæ•¸é…ç½® Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± parameters=[{\u0026#39;background_r\u0026#39;: 255}, {\u0026#39;background_g\u0026#39;: 150}, {\u0026#39;background_b\u0026#39;: 50}] # è¨­å®šèƒŒæ™¯é¡è‰²åƒæ•¸ ) 4. ä½¿ç”¨æ–¹æ³• #\r4.1 åŸ·è¡Œ Launch æª”æ¡ˆ #\r# ç·¨è­¯å°ˆæ¡ˆ colcon build # åŸ·è¡Œ launch æª”æ¡ˆ ros2 launch your_package multi_turtles.launch.py 5. é€²éšåŠŸèƒ½ #\r5.1 æ¢ä»¶å¼å•Ÿå‹• #\r# å°å…¥å¿…è¦çš„æ¢ä»¶å’Œé…ç½®é¡åˆ¥ from launch.conditions import IfCondition from launch.substitutions import LaunchConfiguration # æ ¹æ“šæ¢ä»¶å•Ÿå‹•ç¯€é» Node( package=\u0026#39;turtlesim\u0026#39;, # å¥—ä»¶åç¨± executable=\u0026#39;turtlesim_node\u0026#39;, # å¯åŸ·è¡Œæª”åç¨± condition=IfCondition(LaunchConfiguration(\u0026#39;start_turtle\u0026#39;)) # æ¢ä»¶åˆ¤æ–· ) 5.2 ç¾¤çµ„ç®¡ç† #\r# å°å…¥å¿…è¦çš„é¡åˆ¥ from launch import LaunchDescription from launch_ros.actions import Node from launch.actions import GroupAction # å‰µå»ºç¯€é»ç¾¤çµ„ group = GroupAction([ Node(package=\u0026#39;turtlesim\u0026#39;, executable=\u0026#39;turtlesim_node\u0026#39;), # çƒé¾œæ¨¡æ“¬å™¨ç¯€é» Node(package=\u0026#39;turtlesim\u0026#39;, executable=\u0026#39;turtle_teleop_key\u0026#39;) # éµç›¤æ§åˆ¶ç¯€é» ]) ğŸ’¡ æç¤ºï¼š\nä½¿ç”¨ ros2 launch --show æŸ¥çœ‹ launch æª”æ¡ˆçš„é…ç½® å¯ä»¥åœ¨ launch æª”æ¡ˆä¸­åŒ…å«å…¶ä»– launch æª”æ¡ˆ å–„ç”¨å‘½åç©ºé–“é¿å…ç¯€é»åç¨±è¡çª ","date":"11 February 2025","externalUrl":null,"permalink":"/posts/ros2_launch_file_create/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸš€ ROS2 Launch æª”æ¡ˆå»ºç«‹ \r\n    \u003cdiv id=\"-ros2-launch-%E6%AA%94%E6%A1%88%E5%BB%BA%E7%AB%8B\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-launch-%E6%AA%94%E6%A1%88%E5%BB%BA%E7%AB%8B\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003e1. Launch æª”æ¡ˆç°¡ä»‹ \r\n    \u003cdiv id=\"1-launch-%E6%AA%94%E6%A1%88%E7%B0%A1%E4%BB%8B\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#1-launch-%E6%AA%94%E6%A1%88%E7%B0%A1%E4%BB%8B\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eLaunch æª”æ¡ˆå…è¨±æ‚¨åŒæ™‚å•Ÿå‹•å¤šå€‹ ROS2 ç¯€é»ï¼Œç°¡åŒ–äº†æ“ä½œæµç¨‹ã€‚\u003c/p\u003e","title":"ğŸš€ ROS2 Launch æª”æ¡ˆå»ºç«‹","type":"posts"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/launch/","section":"Tags","summary":"","title":"Launch","type":"tags"},{"content":"\rğŸ” ROS2 GDB é™¤éŒ¯æ–¹æ³• #\r1. è¨­å®š CMake é™¤éŒ¯æ¨¡å¼ #\råœ¨ CMakeLists.txt ä¸­æ·»åŠ ä»¥ä¸‹è¨­å®šï¼š\nSET(CMAKE_BUILD_TYPE \u0026#34;Debug\u0026#34;) SET(CMAKE_CXX_FLAGS_DEBUG \u0026#34;$ENV{CXXFLAGS} -O0 -Wall -g -ggdb\u0026#34;) SET(CMAKE_CXX_FLAGS_RELEASE \u0026#34;$ENV{CXXFLAGS} -O3 -Wall\u0026#34;) è¨­å®šèªªæ˜ #\rCMAKE_BUILD_TYPE \u0026quot;Debug\u0026quot;: è¨­å®šç‚ºé™¤éŒ¯æ¨¡å¼ -O0: é—œé–‰ç·¨è­¯å„ªåŒ–ï¼Œæ–¹ä¾¿é™¤éŒ¯ -Wall: é–‹å•Ÿæ‰€æœ‰è­¦å‘Šè¨Šæ¯ -g -ggdb: ç”Ÿæˆé™¤éŒ¯è³‡è¨Š 2. ä½¿ç”¨ GDB é™¤éŒ¯ #\r2.1 å•Ÿå‹• GDB #\r# åˆ‡æ›åˆ°å¥—ä»¶ç›®éŒ„ cd path/to/your_package # å•Ÿå‹• GDB gdb your_package 2.2 é–‹å§‹é™¤éŒ¯ #\råœ¨ GDB æç¤ºç¬¦ä¸‹è¼¸å…¥ï¼š\n# åŸ·è¡Œç¨‹å¼ (gdb) r 3. å¸¸ç”¨ GDB æŒ‡ä»¤ #\råŸºæœ¬æ§åˆ¶ #\rr (run): åŸ·è¡Œç¨‹å¼ c (continue): ç¹¼çºŒåŸ·è¡Œ n (next): ä¸‹ä¸€æ­¥ s (step): é€²å…¥å‡½å¼ q (quit): é€€å‡º GDB ğŸ’¡ æç¤ºï¼š\nç¢ºä¿å…ˆç·¨è­¯å°ˆæ¡ˆå†é€²è¡Œé™¤éŒ¯ å¯ä»¥ä½¿ç”¨ bt æŸ¥çœ‹å‘¼å«å †ç–Š ä½¿ç”¨ help ç²å–æ›´å¤š GDB æŒ‡ä»¤èªªæ˜ ","date":"11 February 2025","externalUrl":null,"permalink":"/posts/ros2_gdb_debug/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ” ROS2 GDB é™¤éŒ¯æ–¹æ³• \r\n    \u003cdiv id=\"-ros2-gdb-%E9%99%A4%E9%8C%AF%E6%96%B9%E6%B3%95\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-gdb-%E9%99%A4%E9%8C%AF%E6%96%B9%E6%B3%95\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003e1. è¨­å®š CMake é™¤éŒ¯æ¨¡å¼ \r\n    \u003cdiv id=\"1-%E8%A8%AD%E5%AE%9A-cmake-%E9%99%A4%E9%8C%AF%E6%A8%A1%E5%BC%8F\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#1-%E8%A8%AD%E5%AE%9A-cmake-%E9%99%A4%E9%8C%AF%E6%A8%A1%E5%BC%8F\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cp\u003eåœ¨ \u003ccode\u003eCMakeLists.txt\u003c/code\u003e ä¸­æ·»åŠ ä»¥ä¸‹è¨­å®šï¼š\u003c/p\u003e","title":"ğŸ” ROS2 GDB é™¤éŒ¯æ–¹æ³• ","type":"posts"},{"content":"","date":"11 February 2025","externalUrl":null,"permalink":"/tags/gdb/","section":"Tags","summary":"","title":"GDB","type":"tags"},{"content":"\rğŸ¤– ROS2 å‰µå»ºç¯€é» #\r1. å»ºç«‹å·¥ä½œç©ºé–“ #\rmkdir -p ~/ros2_ws/src cd ~/ros2_ws/src 2. å‰µå»ºå¥—ä»¶ #\rros2 pkg create --build-type ament_cmake hello_pkg 3. ç·¨å¯«ç¯€é»ç¨‹å¼ç¢¼ #\rå»ºç«‹ C++ æºæ–‡ä»¶ #\råœ¨ ~/ros2_ws/src/hello_pkg/src ç›®éŒ„ä¸‹å‰µå»º hello_node.cppï¼š\n#include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; #include \u0026lt;chrono\u0026gt; class HelloNode : public rclcpp::Node { public: HelloNode() : Node(\u0026#34;hello_node\u0026#34;) { timer_ = this-\u0026gt;create_wall_timer( std::chrono::seconds(1), std::bind(\u0026amp;HelloNode::hello, this) ); } private: void hello() { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;hello world\u0026#34;); } rclcpp::TimerBase::SharedPtr timer_; }; int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;HelloNode\u0026gt;(); rclcpp::spin(node); rclcpp::shutdown(); return 0; } ç¨‹å¼ç¢¼èªªæ˜ #\rHelloNode é¡ç¹¼æ‰¿è‡ª rclcpp::Node å»ºæ§‹å‡½å¼ä¸­å‰µå»ºä¸€å€‹è¨ˆæ™‚å™¨ï¼Œæ¯ç§’åŸ·è¡Œä¸€æ¬¡ hello() å‡½å¼è¼¸å‡º \u0026ldquo;hello world\u0026rdquo; è¨Šæ¯ main() å‡½å¼åˆå§‹åŒ– ROS2 ä¸¦é‹è¡Œç¯€é» 4. ä¿®æ”¹ CMakeLists.txt #\råœ¨ ~/ros2_ws/src/hello_pkg/CMakeLists.txt åŠ å…¥ï¼š\ncmake_minimum_required(VERSION 3.8) project(hello_pkg) # è¨­å®š C++ æ¨™æº– if(NOT CMAKE_CXX_STANDARD) set(CMAKE_CXX_STANDARD 14) endif() # å°‹æ‰¾ç›¸ä¾å¥—ä»¶ find_package(ament_cmake REQUIRED) find_package(rclcpp REQUIRED) # æ·»åŠ å¯åŸ·è¡Œæ–‡ä»¶ add_executable(hello_node src/hello_node.cpp) ament_target_dependencies(hello_node rclcpp) # å®‰è£è¨­å®š install(TARGETS hello_node DESTINATION lib/${PROJECT_NAME} ) ament_package() 5. ç·¨è­¯èˆ‡åŸ·è¡Œ #\rç·¨è­¯å¥—ä»¶ #\rcd ~/ros2_ws colcon build --packages-select hello_pkg è¨­å®šç’°å¢ƒè®Šæ•¸ #\rsource ~/ros2_ws/install/setup.bash åŸ·è¡Œç¯€é» #\rros2 run hello_pkg hello_node ç¨‹å¼åŸ·è¡Œçµæœ #\rä½ å°‡çœ‹åˆ°æ¯ç§’è¼¸å‡ºä¸€æ¬¡ï¼š\n[INFO] [hello_node]: hello world å¸¸è¦‹å•é¡Œè§£æ±º #\rç·¨è­¯éŒ¯èª¤\næª¢æŸ¥ CMakeLists.txt è¨­å®š ç¢ºèªæ‰€æœ‰ç›¸ä¾å¥—ä»¶å·²å®‰è£ åŸ·è¡ŒéŒ¯èª¤\nç¢ºèªç’°å¢ƒè®Šæ•¸å·²æ­£ç¢ºè¨­å®š æª¢æŸ¥ç¯€é»åç¨±æ˜¯å¦æ­£ç¢º é€²éšä¸»é¡Œ #\rä½¿ç”¨åƒæ•¸ ç™¼å¸ƒ/è¨‚é–±è©±é¡Œ æœå‹™å®¢æˆ¶ç«¯/ä¼ºæœå™¨ è‡ªå®šç¾©è¨Šæ¯é¡å‹ ğŸ’¡ æç¤ºï¼š\nä½¿ç”¨ ros2 node list æŸ¥çœ‹é‹è¡Œä¸­çš„ç¯€é» ä½¿ç”¨ ros2 node info /hello_node æŸ¥çœ‹ç¯€é»è³‡è¨Š å–„ç”¨ rclcpp çš„æ—¥èªŒåŠŸèƒ½é€²è¡Œé™¤éŒ¯ ","date":"10 February 2025","externalUrl":null,"permalink":"/posts/create_ros_node/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ¤– ROS2 å‰µå»ºç¯€é» \r\n    \u003cdiv id=\"-ros2-%E5%89%B5%E5%BB%BA%E7%AF%80%E9%BB%9E\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-%E5%89%B5%E5%BB%BA%E7%AF%80%E9%BB%9E\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003e1. å»ºç«‹å·¥ä½œç©ºé–“ \r\n    \u003cdiv id=\"1-%E5%BB%BA%E7%AB%8B%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%96%93\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#1-%E5%BB%BA%E7%AB%8B%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%96%93\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003emkdir -p ~/ros2_ws/src\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003e\u003cspan class=\"nb\"\u003ecd\u003c/span\u003e ~/ros2_ws/src\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e2. å‰µå»ºå¥—ä»¶ \r\n    \u003cdiv id=\"2-%E5%89%B5%E5%BB%BA%E5%A5%97%E4%BB%B6\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#2-%E5%89%B5%E5%BB%BA%E5%A5%97%E4%BB%B6\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"line\"\u003e\u003cspan class=\"cl\"\u003eros2 pkg create --build-type ament_cmake hello_pkg\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\r\n\r\n\u003ch2 class=\"relative group\"\u003e3. ç·¨å¯«ç¯€é»ç¨‹å¼ç¢¼ \r\n    \u003cdiv id=\"3-%E7%B7%A8%E5%AF%AB%E7%AF%80%E9%BB%9E%E7%A8%8B%E5%BC%8F%E7%A2%BC\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#3-%E7%B7%A8%E5%AF%AB%E7%AF%80%E9%BB%9E%E7%A8%8B%E5%BC%8F%E7%A2%BC\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003eå»ºç«‹ C++ æºæ–‡ä»¶ \r\n    \u003cdiv id=\"%E5%BB%BA%E7%AB%8B-c-%E6%BA%90%E6%96%87%E4%BB%B6\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%BB%BA%E7%AB%8B-c-%E6%BA%90%E6%96%87%E4%BB%B6\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003cp\u003eåœ¨ \u003ccode\u003e~/ros2_ws/src/hello_pkg/src\u003c/code\u003e ç›®éŒ„ä¸‹å‰µå»º \u003ccode\u003ehello_node.cpp\u003c/code\u003eï¼š\u003c/p\u003e","title":"ğŸ¤– ROS2 å‰µå»ºç¯€é»","type":"posts"},{"content":"\rğŸ¢ ROS2 å•Ÿå‹•å°æµ·é¾œ #\r1. å®‰è£ ROS2 Humble #\rå®‰è£æ­¥é©Ÿ #\ré¦–å…ˆè«‹ä¾ç…§å®˜æ–¹æ–‡ä»¶å®‰è£ ROS2 Humbleï¼š ROS2 Humble / Ubuntu (deb packages)\nè¨­å®šç’°å¢ƒè®Šæ•¸ï¼š\nsource /opt/ros/humble/setup.bash ğŸ’¡ å»ºè­°å°‡æ­¤å‘½ä»¤åŠ å…¥ ~/.bashrcï¼š\necho \u0026#34;source /opt/ros/humble/setup.bash\u0026#34; \u0026gt;\u0026gt; ~/.bashrc 2. å•Ÿå‹•å°æµ·é¾œæ¨¡æ“¬å™¨ #\råŸ·è¡Œæ¨¡æ“¬å™¨ #\råœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š\nros2 run turtlesim turtlesim_node æŒ‡ä»¤èªªæ˜ #\rros2 runï¼šä½¿ç”¨ ros2 é‹è¡Œç¨‹åº turtlesimï¼šç¨‹åºåŒ…çš„åç¨± turtlesim_nodeï¼šå¯åŸ·è¡Œæ–‡ä»¶åç¨± 3. æ§åˆ¶å°æµ·é¾œ #\rå•Ÿå‹•æ§åˆ¶ç¨‹åº #\ré–‹å•Ÿæ–°çš„çµ‚ç«¯æ©Ÿ åŸ·è¡Œ source æŒ‡ä»¤ï¼š source /opt/ros/humble/setup.bash è¼¸å…¥ä»¥ä¸‹æŒ‡ä»¤å•Ÿå‹•éµç›¤æ§åˆ¶ï¼š ros2 run turtlesim turtle_teleop_key æ§åˆ¶èªªæ˜ #\rä½¿ç”¨æ–¹å‘éµæ§åˆ¶æµ·é¾œç§»å‹• Upï¼šå‘å‰ç§»å‹• Downï¼šå‘å¾Œç§»å‹• Leftï¼šå‘å·¦è½‰ Rightï¼šå‘å³è½‰ å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ #\r1. æ‰¾ä¸åˆ° ROS2 å‘½ä»¤ #\rè§£æ±ºæ–¹æ¡ˆï¼š\nç¢ºèª ROS2 å®‰è£æ˜¯å¦æˆåŠŸ æª¢æŸ¥ç’°å¢ƒè®Šæ•¸æ˜¯å¦æ­£ç¢ºè¨­å®š é‡æ–° source ç’°å¢ƒè¨­å®šæª” 2. ç„¡æ³•å•Ÿå‹•å°æµ·é¾œ #\rè§£æ±ºæ–¹æ¡ˆï¼š\nç¢ºèª turtlesim å¥—ä»¶æ˜¯å¦å®‰è£ æª¢æŸ¥ç³»çµ±è³‡æºä½¿ç”¨ç‹€æ³ æŸ¥çœ‹éŒ¯èª¤è¨Šæ¯ ç›¸é—œè³‡æº #\rROS2 å®˜æ–¹æ–‡ä»¶ Turtlesim æ•™å­¸ ROS2 æŒ‡ä»¤åƒè€ƒ ğŸ”” æ³¨æ„äº‹é …ï¼š\næ¯æ¬¡é–‹å•Ÿæ–°çµ‚ç«¯æ©Ÿéƒ½éœ€è¦é‡æ–° source ç’°å¢ƒè®Šæ•¸ ç¢ºä¿ç³»çµ±ç¬¦åˆ ROS2 çš„æœ€ä½éœ€æ±‚ å»ºè­°ä½¿ç”¨ Ubuntu 22.04 LTS ","date":"10 February 2025","externalUrl":null,"permalink":"/posts/turtle_launch/","section":"Posts","summary":"\u003ch1 class=\"relative group\"\u003eğŸ¢ ROS2 å•Ÿå‹•å°æµ·é¾œ \r\n    \u003cdiv id=\"-ros2-%E5%95%9F%E5%8B%95%E5%B0%8F%E6%B5%B7%E9%BE%9C\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#-ros2-%E5%95%9F%E5%8B%95%E5%B0%8F%E6%B5%B7%E9%BE%9C\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h1\u003e\r\n\r\n\r\n\u003ch2 class=\"relative group\"\u003e1. å®‰è£ ROS2 Humble \r\n    \u003cdiv id=\"1-%E5%AE%89%E8%A3%9D-ros2-humble\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#1-%E5%AE%89%E8%A3%9D-ros2-humble\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h2\u003e\r\n\r\n\r\n\u003ch3 class=\"relative group\"\u003eå®‰è£æ­¥é©Ÿ \r\n    \u003cdiv id=\"%E5%AE%89%E8%A3%9D%E6%AD%A5%E9%A9%9F\" class=\"anchor\"\u003e\u003c/div\u003e\r\n    \r\n    \u003cspan\r\n        class=\"absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100\"\u003e\r\n        \u003ca class=\"group-hover:text-primary-300 dark:group-hover:text-neutral-700\"\r\n            style=\"text-decoration-line: none !important;\" href=\"#%E5%AE%89%E8%A3%9D%E6%AD%A5%E9%A9%9F\" aria-label=\"Anchor\"\u003e#\u003c/a\u003e\r\n    \u003c/span\u003e        \r\n    \r\n\u003c/h3\u003e\r\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eé¦–å…ˆè«‹ä¾ç…§å®˜æ–¹æ–‡ä»¶å®‰è£ ROS2 Humbleï¼š\n\u003ca href=\"https://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debs.html\"title=\"å‰å¾€humbleå®‰è£æµç¨‹\" target=\"_blank\"\u003eROS2 Humble / Ubuntu (deb packages)\u003c/a\u003e\u003c/p\u003e","title":"ğŸ¢ ROS2 å•Ÿå‹•å°æµ·é¾œ","type":"posts"},{"content":"ğŸ‘¨â€ğŸ’» å·¥ç¨‹å¸«ä¸€å€‹ï¼Œå° FPGA/SoC FPGA/Verilog/C++/C/ROS éƒ½æœ‰èˆˆè¶£ ğŸ‘¨â€ğŸ’» An engineer with interests in FPGA/SoC FPGA/Verilog/C++/C/ROS\né€™å€‹ä¸–ç•Œæœ‰å¤ªå¤šå€¼å¾—å­¸ç¿’é …ç›®ï¼Œå› ç‚ºå­¸ä¸å®Œäº†æ‰€ä»¥é€™è£¡è¨˜éŒ„æˆ‘å­¸ç¿’éçš„ç—•è·¡ï¼Œå¿˜è¨˜å°±ä¾†é€™è£¡çœ‹çœ‹ã€‚\nğŸ“ è¨˜éŒ„æ—¥å¸¸å­¸ç¿’å¿ƒå¾—\nâ“ å•é¡Œè§£æ±ºç´€éŒ„\nğŸ“ˆ å­¸ç¿’æˆæœè¿½è¹¤\nğŸ“‚ è³‡æºæ•´ç†\nğŸ” çŸ¥è­˜åº«å­˜\n","date":"10 February 2025","externalUrl":null,"permalink":"/about/","section":"TienYao@Tech","summary":"\u003cp\u003eğŸ‘¨â€ğŸ’» å·¥ç¨‹å¸«ä¸€å€‹ï¼Œå° FPGA/SoC FPGA/Verilog/C++/C/ROS éƒ½æœ‰èˆˆè¶£\nğŸ‘¨â€ğŸ’» An engineer with interests in FPGA/SoC FPGA/Verilog/C++/C/ROS\u003c/p\u003e\n\u003cp\u003eé€™å€‹ä¸–ç•Œæœ‰å¤ªå¤šå€¼å¾—å­¸ç¿’é …ç›®ï¼Œå› ç‚ºå­¸ä¸å®Œäº†æ‰€ä»¥é€™è£¡è¨˜éŒ„æˆ‘å­¸ç¿’éçš„ç—•è·¡ï¼Œå¿˜è¨˜å°±ä¾†é€™è£¡çœ‹çœ‹ã€‚\u003c/p\u003e","title":"About","type":"page"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/tienyao/","section":"Tienyao","summary":"","title":"Tienyao","type":"tienyao"}]